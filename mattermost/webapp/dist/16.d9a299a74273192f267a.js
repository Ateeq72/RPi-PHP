webpackJsonp([16],{1686:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var i=a(3),s=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(s,"a",s);var l=a(7),d=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(d,"a",d);var o=a(4),u=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(u,"a",u);var c=a(2),p=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(p,"a",p);var h=a(1),m=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(m,"a",m);var _=a(18),f=a(1635),g=a(1641),v=a(13),M=a(1636),A=a(12),E=A&&A.__esModule?function(){return A["default"]}:function(){return A};a.d(E,"a",E);var S=a(1859),C=function(e){function t(e){s()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));a.handleIntegrationChange=a.handleIntegrationChange.bind(a),a.deleteOAuthApp=a.deleteOAuthApp.bind(a);var n=_.a.getCurrentId();return a.state={oauthApps:f.a.getOAuthApps(n),loading:!f.a.hasReceivedOAuthApps(n)},a}return p()(t,e),u()(t,null,[{key:"propTypes",get:function(){return{team:m.a.propTypes.object.isRequired}}}]),u()(t,[{key:"componentDidMount",value:function(){f.a.addChangeListener(this.handleIntegrationChange),"true"===window.mm_config.EnableOAuthServiceProvider&&g.listOAuthApps(_.a.getCurrentId())}},{key:"componentWillUnmount",value:function(){f.a.removeChangeListener(this.handleIntegrationChange)}},{key:"handleIntegrationChange",value:function(){var e=_.a.getCurrentId();this.setState({oauthApps:f.a.getOAuthApps(e),loading:!f.a.hasReceivedOAuthApps(e)})}},{key:"deleteOAuthApp",value:function(e){var t=_.a.getCurrentId();g.deleteOAuthApp(e.id,t)}},{key:"render",value:function(){var e=this,t=this.state.oauthApps.map(function(t){return m.a.createElement(S.a,{key:t.id,oauthApp:t,onDelete:e.deleteOAuthApp})});return m.a.createElement(M.a,{header:m.a.createElement(A.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),helpText:m.a.createElement(A.FormattedMessage,{id:"installed_oauth_apps.help",defaultMessage:"OAuth 2.0 Applications are available to everyone on your server."}),addText:m.a.createElement(A.FormattedMessage,{id:"installed_oauth_apps.add",defaultMessage:"Add OAuth 2.0 Application"}),addLink:"/"+this.props.team.name+"/integrations/oauth2-apps/add",emptyText:m.a.createElement(A.FormattedMessage,{id:"installed_oauth_apps.empty",defaultMessage:"No OAuth 2.0 Applications found"}),searchPlaceholder:a.i(v.localizeMessage)("installed_oauth_apps.search","Search OAuth 2.0 Applications"),loading:this.state.loading},t)}}]),t}(m.a.Component);t["default"]=C},1859:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var i=a(3),s=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(s,"a",s);var l=a(7),d=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(d,"a",d);var o=a(4),u=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(u,"a",u);var c=a(2),p=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(p,"a",p);var h=a(1),m=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(m,"a",m);var _=a(1630),f=a(19),g=a(13),v=a(12),M=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(M,"a",M);var A="***************",E=function(e){function t(e){s()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleShowClientSecret=a.handleShowClientSecret.bind(a),a.handleHideClientScret=a.handleHideClientScret.bind(a),a.handleRegenerate=a.handleRegenerate.bind(a),a.handleDelete=a.handleDelete.bind(a),a.matchesFilter=a.matchesFilter.bind(a),a.state={clientSecret:A},a}return p()(t,e),u()(t,null,[{key:"propTypes",get:function(){return{oauthApp:m.a.PropTypes.object.isRequired,onDelete:m.a.PropTypes.func.isRequired,filter:m.a.PropTypes.string}}}]),u()(t,[{key:"handleShowClientSecret",value:function(e){e.preventDefault(),this.setState({clientSecret:this.props.oauthApp.client_secret})}},{key:"handleHideClientScret",value:function(e){e.preventDefault(),this.setState({clientSecret:A})}},{key:"handleRegenerate",value:function(e){var t=this;e.preventDefault(),f.a.regenerateOAuthAppSecret(this.props.oauthApp.id,function(a){t.props.oauthApp.client_secret=a.client_secret,t.handleShowClientSecret(e)},function(e){t.setState({error:e.message})})}},{key:"handleDelete",value:function(e){e.preventDefault(),this.props.onDelete(this.props.oauthApp)}},{key:"matchesFilter",value:function(e,t){return!t||e.name.toLowerCase().indexOf(t)!==-1}},{key:"render",value:function(){var e=this.props.oauthApp,t=void 0;if(this.state.error&&(t=m.a.createElement(_.a,{error:this.state.error})),!this.matchesFilter(e,this.props.filter))return null;var a=void 0;a=e.name?e.name:m.a.createElement(v.FormattedMessage,{id:"installed_integrations.unnamed_oauth_app",defaultMessage:"Unnamed OAuth 2.0 Application"});var n=void 0;e.description&&(n=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__description"},e.description)));var r=m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__url"},m.a.createElement(v.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),i=void 0;i=e.is_trusted?g.localizeMessage("installed_oauth_apps.trusted.yes","Yes"):g.localizeMessage("installed_oauth_apps.trusted.no","No");var s=void 0;s=this.state.clientSecret===A?m.a.createElement("a",{href:"#",onClick:this.handleShowClientSecret},m.a.createElement(v.FormattedMessage,{id:"installed_integrations.showSecret",defaultMessage:"Show Secret"})):m.a.createElement("a",{href:"#",onClick:this.handleHideClientScret},m.a.createElement(v.FormattedMessage,{id:"installed_integrations.hideSecret",defaultMessage:"Hide Secret"}));var l=m.a.createElement("a",{href:"#",onClick:this.handleRegenerate},m.a.createElement(v.FormattedMessage,{id:"installed_integrations.regenSecret",defaultMessage:"Regenerate Secret"})),d=void 0;return e.icon_url&&(d=m.a.createElement("div",{className:"integration__icon integration-list__icon"},m.a.createElement("img",{src:e.icon_url}))),m.a.createElement("div",{className:"backstage-list__item"},d,m.a.createElement("div",{className:"item-details"},m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__name"},a)),t,n,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__url"},m.a.createElement(v.FormattedHTMLMessage,{id:"installed_oauth_apps.is_trusted",defaultMessage:"Is Trusted: <strong>{isTrusted}</strong>",values:{isTrusted:i}}))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__token"},m.a.createElement(v.FormattedHTMLMessage,{id:"installed_integrations.client_id",defaultMessage:"Client ID: <strong>{clientId}</strong>",values:{clientId:e.id}}))),m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__token"},m.a.createElement(v.FormattedHTMLMessage,{id:"installed_integrations.client_secret",defaultMessage:"Client Secret: <strong>{clientSecret}</strong>",values:{clientSecret:this.state.clientSecret}}))),r,m.a.createElement("div",{className:"item-details__row"},m.a.createElement("span",{className:"item-details__creation"},m.a.createElement(v.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:g.displayUsername(e.creator_id),createAt:e.create_at}})))),m.a.createElement("div",{className:"item-actions"},s," - ",l," - ",m.a.createElement("a",{href:"#",onClick:this.handleDelete},m.a.createElement(v.FormattedMessage,{id:"installed_integrations.delete",defaultMessage:"Delete"}))))}}]),t}(m.a.Component);t.a=E}});