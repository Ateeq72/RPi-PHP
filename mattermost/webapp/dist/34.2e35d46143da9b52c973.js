webpackJsonp([34],{1679:function(e,t,a){"use strict";var s=a(6),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(l,"a",l);var o=a(3),r=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(r,"a",r);var m=a(7),n=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(n,"a",n);var c=a(4),d=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(d,"a",d);var i=a(2),u=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(u,"a",u);var p=a(1),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var h=a(26),f=a(13),E=a(1634),v=a(12),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var M=a(1630),N=a(53),b=a(565),y=a(11),F="P",x="G",k=function(e){function t(e){r()(this,t);var a=n()(this,(t.__proto__||l()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.updateDisplayName=a.updateDisplayName.bind(a),a.updateDescription=a.updateDescription.bind(a),a.updateTrigger=a.updateTrigger.bind(a),a.updateUrl=a.updateUrl.bind(a),a.updateMethod=a.updateMethod.bind(a),a.updateUsername=a.updateUsername.bind(a),a.updateIconUrl=a.updateIconUrl.bind(a),a.updateAutocomplete=a.updateAutocomplete.bind(a),a.updateAutocompleteHint=a.updateAutocompleteHint.bind(a),a.updateAutocompleteDescription=a.updateAutocompleteDescription.bind(a),a.state={displayName:"",description:"",trigger:"",url:"",method:F,username:"",iconUrl:"",autocomplete:!1,autocompleteHint:"",autocompleteDescription:"",saving:!1,serverError:"",clientError:null},a}return u()(t,e),d()(t,null,[{key:"propTypes",get:function(){return{team:g.a.propTypes.object.isRequired}}}]),d()(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.saving){this.setState({saving:!0,serverError:"",clientError:""});var a=this.state.trigger.trim().toLowerCase();0===a.indexOf("/")&&(a=a.substr(1));var s={display_name:this.state.displayName,description:this.state.description,trigger:a,url:this.state.url.trim(),method:this.state.method,username:this.state.username,icon_url:this.state.iconUrl,auto_complete:this.state.autocomplete};return s.auto_complete&&(s.auto_complete_desc=this.state.autocompleteDescription,s.auto_complete_hint=this.state.autocompleteHint),s.trigger?0===s.trigger.indexOf("/")?void this.setState({saving:!1,clientError:g.a.createElement(v.FormattedMessage,{id:"add_command.triggerInvalidSlash",defaultMessage:"A trigger word cannot begin with a /"})}):s.trigger.indexOf(" ")!==-1?void this.setState({saving:!1,clientError:g.a.createElement(v.FormattedMessage,{id:"add_command.triggerInvalidSpace",defaultMessage:"A trigger word must not contain spaces"})}):s.trigger.length<y.a.MIN_TRIGGER_LENGTH||s.trigger.length>y.a.MAX_TRIGGER_LENGTH?void this.setState({saving:!1,clientError:g.a.createElement(v.FormattedMessage,{id:"add_command.triggerInvalidLength",defaultMessage:"A trigger word must contain between {min} and {max} characters",values:{min:y.a.MIN_TRIGGER_LENGTH,max:y.a.MAX_TRIGGER_LENGTH}})}):s.url?void h.addCommand(s,function(e){N.a.push("/"+t.props.team.name+"/integrations/confirm?type=commands&id="+e.id)},function(e){t.setState({saving:!1,serverError:e.message})}):void this.setState({saving:!1,clientError:g.a.createElement(v.FormattedMessage,{id:"add_command.urlRequired",defaultMessage:"A request URL is required"})}):void this.setState({saving:!1,clientError:g.a.createElement(v.FormattedMessage,{id:"add_command.triggerRequired",defaultMessage:"A trigger word is required"})})}}},{key:"updateDisplayName",value:function(e){this.setState({displayName:e.target.value})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateTrigger",value:function(e){this.setState({trigger:e.target.value})}},{key:"updateUrl",value:function(e){this.setState({url:e.target.value})}},{key:"updateMethod",value:function(e){this.setState({method:e.target.value})}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"updateIconUrl",value:function(e){this.setState({iconUrl:e.target.value})}},{key:"updateAutocomplete",value:function(e){this.setState({autocomplete:e.target.checked})}},{key:"updateAutocompleteHint",value:function(e){this.setState({autocompleteHint:e.target.value})}},{key:"updateAutocompleteDescription",value:function(e){this.setState({autocompleteDescription:e.target.value})}},{key:"render",value:function(){var e=null;return this.state.autocomplete&&(e=[g.a.createElement("div",{key:"autocompleteHint",className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteHint"},g.a.createElement(v.FormattedMessage,{id:"add_command.autocompleteHint",defaultMessage:"Autocomplete Hint"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"autocompleteHint",type:"text",maxLength:"1024",className:"form-control",value:this.state.autocompleteHint,onChange:this.updateAutocompleteHint,placeholder:f.localizeMessage("add_command.autocompleteHint.placeholder","Example: [Patient Name]")}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.autocompleteHint.help",defaultMessage:"(Optional) Arguments associated with your slash command, displayed as help in the autocomplete list."})))),g.a.createElement("div",{key:"autocompleteDescription",className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteDescription"},g.a.createElement(v.FormattedMessage,{id:"add_command.autocompleteDescription",defaultMessage:"Autocomplete Description"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.autocompleteDescription,onChange:this.updateAutocompleteDescription,placeholder:f.localizeMessage("add_command.autocompleteDescription.placeholder",'Example: "Returns search results for patient records"')}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.autocompleteDescription.help",defaultMessage:"(Optional) Short description of slash command for the autocomplete list."}))))]),g.a.createElement("div",{className:"backstage-content row"},g.a.createElement(E.a,null,g.a.createElement(N.b,{to:"/"+this.props.team.name+"/integrations/commands"},g.a.createElement(v.FormattedMessage,{id:"installed_command.header",defaultMessage:"Slash Commands"})),g.a.createElement(v.FormattedMessage,{id:"integrations.add",defaultMessage:"Add"})),g.a.createElement("div",{className:"backstage-form"},g.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},g.a.createElement(v.FormattedMessage,{id:"add_command.displayName",defaultMessage:"Display Name"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.displayName.help",defaultMessage:"Display name for your slash command made of up to 64 characters."})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},g.a.createElement(v.FormattedMessage,{id:"add_command.description",defaultMessage:"Description"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.description.help",defaultMessage:"Description for your incoming webhook."})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"trigger"},g.a.createElement(v.FormattedMessage,{id:"add_command.trigger",defaultMessage:"Command Trigger Word"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"trigger",type:"text",maxLength:y.a.MAX_TRIGGER_LENGTH,className:"form-control",value:this.state.trigger,onChange:this.updateTrigger,placeholder:f.localizeMessage("add_command.trigger.placeholder",'Command trigger e.g. "hello" not including the slash')}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.trigger.help",defaultMessage:"Trigger word must be unique, and cannot begin with a slash or contain any spaces."})),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.trigger.helpExamples",defaultMessage:"Examples: client, employee, patient, weather"})),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.trigger.helpReserved",defaultMessage:"Reserved: {link}",values:{link:g.a.createElement("a",{href:"https://docs.mattermost.com/help/messaging/executing-commands.html#built-in-commands",target:"_blank",rel:"noopener noreferrer"},g.a.createElement(v.FormattedMessage,{id:"add_command.trigger.helpReservedLinkText",defaultMessage:"see list of built-in slash commands"}))}})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"url"},g.a.createElement(v.FormattedMessage,{id:"add_command.url",defaultMessage:"Request URL"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"url",type:"text",maxLength:"1024",className:"form-control",value:this.state.url,onChange:this.updateUrl,placeholder:f.localizeMessage("add_command.url.placeholder","Must start with http:// or https://")}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.url.help",defaultMessage:"The callback URL to receive the HTTP POST or GET event request when the slash command is run."})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"method"},g.a.createElement(v.FormattedMessage,{id:"add_command.method",defaultMessage:"Request Method"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("select",{id:"method",className:"form-control",value:this.state.method,onChange:this.updateMethod},g.a.createElement("option",{value:F},f.localizeMessage("add_command.method.post","POST")),g.a.createElement("option",{value:x},f.localizeMessage("add_command.method.get","GET"))),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.method.help",defaultMessage:"The type of command request issued to the Request URL."})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},g.a.createElement(v.FormattedMessage,{id:"add_command.username",defaultMessage:"Response Username"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"username",type:"text",maxLength:"64",className:"form-control",value:this.state.username,onChange:this.updateUsername,placholder:f.localizeMessage("add_command.username.placeholder","Username")}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.username.help",defaultMessage:'(Optional) Choose a username override for responses for this slash command. Usernames can consist of up to 22 characters consisting of lowercase letters, numbers and they symbols "-", "_", and "." .'})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconUrl"},g.a.createElement(v.FormattedMessage,{id:"add_command.iconUrl",defaultMessage:"Response Icon"})),g.a.createElement("div",{className:"col-md-5 col-sm-8"},g.a.createElement("input",{id:"iconUrl",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconUrl,onChange:this.updateIconUrl,placeholder:f.localizeMessage("add_command.iconUrl.placeholder","https://www.example.com/myicon.png")}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.iconUrl.help",defaultMessage:"(Optional) Choose a profile picture override for the post responses to this slash command. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),g.a.createElement("div",{className:"form-group"},g.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocomplete"},g.a.createElement(v.FormattedMessage,{id:"add_command.autocomplete",defaultMessage:"Autocomplete"})),g.a.createElement("div",{className:"col-md-5 col-sm-8 checkbox"},g.a.createElement("input",{id:"autocomplete",type:"checkbox",checked:this.state.autocomplete,onChange:this.updateAutocomplete}),g.a.createElement("div",{className:"form__help"},g.a.createElement(v.FormattedMessage,{id:"add_command.autocomplete.help",defaultMessage:"(Optional) Show slash command in autocomplete list."})))),e,g.a.createElement("div",{className:"backstage-form__footer"},g.a.createElement(M.a,{type:"backstage",errors:[this.state.serverError,this.state.clientError]}),g.a.createElement(N.b,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/commands"},g.a.createElement(v.FormattedMessage,{id:"add_command.cancel",defaultMessage:"Cancel"})),g.a.createElement(b.a,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},g.a.createElement(v.FormattedMessage,{id:"add_command.save",defaultMessage:"Save"}))))))}}]),t}(g.a.Component);t["default"]=k}});