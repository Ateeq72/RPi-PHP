webpackJsonp([22],{1699:function(e,a,t){"use strict";(function(e){var n=t(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};t.d(r,"a",r);var i=t(3),o=i&&i.__esModule?function(){return i["default"]}:function(){return i};t.d(o,"a",o);var s=t(4),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};t.d(l,"a",l);var c=t(7),u=c&&c.__esModule?function(){return c["default"]}:function(){return c};t.d(u,"a",u);var m=t(2),d=m&&m.__esModule?function(){return m["default"]}:function(){return m};t.d(d,"a",d);var g=t(1),f=g&&g.__esModule?function(){return g["default"]}:function(){return g};t.d(f,"a",f);var p=t(1630),h=t(152),E=t(18),v=t(85),w=t(26),_=t(19),b=t(54),M=t(1632),N=M&&M.__esModule?function(){return M["default"]}:function(){return M};t.d(N,"a",N);var y=t(1633),S=t(12),k=S&&S.__esModule?function(){return S["default"]}:function(){return S};t.d(k,"a",k);var F=t(53),L=function(a){function t(a){o()(this,t);var n=u()(this,(t.__proto__||r()(t)).call(this,a));n.renderSignupControls=n.renderSignupControls.bind(n);var i=!1,s="",l=!1,c=!1;if(a.location.query){var m=a.location.query.h,d=a.location.query.id;d?i=!0:m&&!E.a.getCurrentUser()?c=v.a.getGlobalItem(m):d||"true"===e.window.mm_config.EnableOpenServer||E.a.getNoAccounts()||(l=!0,s=f.a.createElement(S.FormattedMessage,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."}))}return n.state={loading:i,serverError:s,noOpenServerError:l,usedBefore:c},n}return d()(t,a),l()(t,[{key:"componentDidMount",value:function(){var e=this;if(w.checkVersion(),this.props.location.query){var a=this.props.location.query.h,t=this.props.location.query.d,n=this.props.location.query.id,r=null!=E.a.getCurrentUser();if((n||a)&&r)return void _.a.addUserToTeamFromInvite(t,a,n,function(e){b.emitInitialLoad(function(){F.a.push("/"+e.name+"/channels/town-square")})},function(){e.setState({noOpenServerError:!0,loading:!1,serverError:f.a.createElement(S.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."})})});if(n)return void _.a.getInviteInfo(n,function(a){a&&e.setState({serverError:"",loading:!1})},function(){e.setState({noOpenServerError:!0,loading:!1,serverError:f.a.createElement(S.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."})})});r&&F.a.push("/select_team")}}},{key:"renderSignupControls",value:function(){var a=[];if("true"===e.window.mm_config.EnableSignUpWithEmail&&a.push(f.a.createElement(F.b,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},f.a.createElement("span",{className:"icon fa fa-envelope"}),f.a.createElement("span",null,f.a.createElement(S.FormattedMessage,{id:"signup.email",defaultMessage:"Email and Password"})))),"true"===e.window.mm_config.EnableSignUpWithGitLab&&a.push(f.a.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:_.a.getOAuthRoute()+"/gitlab/signup"+window.location.search},f.a.createElement("span",{className:"icon"}),f.a.createElement("span",null,f.a.createElement(S.FormattedMessage,{id:"signup.gitlab",defaultMessage:"GitLab Single-Sign-On"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithGoogle&&a.push(f.a.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:_.a.getOAuthRoute()+"/google/signup"+window.location.search},f.a.createElement("span",{className:"icon"}),f.a.createElement("span",null,f.a.createElement(S.FormattedMessage,{id:"signup.google",defaultMessage:"Google Account"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithOffice365&&a.push(f.a.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:_.a.getOAuthRoute()+"/office365/signup"+window.location.search},f.a.createElement("span",{className:"icon"}),f.a.createElement("span",null,f.a.createElement(S.FormattedMessage,{id:"signup.office365",defaultMessage:"Office 365"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap&&a.push(f.a.createElement(F.b,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/signup_ldap"+window.location.search},f.a.createElement("span",{className:"icon fa fa-folder-open fa--margin-top"}),f.a.createElement("span",null,f.a.createElement(S.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSaml){var t="";t=window.location.search?"&action=signup":"?action=signup",a.push(f.a.createElement("a",{className:"btn btn-custom-login btn--full saml",key:"saml",href:"/login/sso/saml"+window.location.search+t},f.a.createElement("span",{className:"icon fa fa-lock fa--margin-top"}),f.a.createElement("span",null,e.window.mm_config.SamlLoginButtonText)))}if(0===a.length){var n=f.a.createElement(S.FormattedMessage,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});a=f.a.createElement(p.a,{error:n,margin:!0})}else if(1===a.length){if("true"===e.window.mm_config.EnableSignUpWithEmail)return F.a.push("/signup_email"+window.location.search);if("true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap)return F.a.push("/signup_ldap")}return a}},{key:"render",value:function(){if(this.state.loading)return f.a.createElement(h.a,null);if(this.state.usedBefore)return f.a.createElement("div",null,f.a.createElement(S.FormattedMessage,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var a=null;this.state.serverError&&(a=f.a.createElement("div",{className:"form-group has-error"},f.a.createElement("label",{className:"control-label"},this.state.serverError)));var t=void 0;return t=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),f.a.createElement("div",null,f.a.createElement(y.a,null),f.a.createElement("div",{className:"signup-header"},f.a.createElement(F.b,{to:"/"},f.a.createElement("span",{className:"fa fa-chevron-left"}),f.a.createElement(S.FormattedMessage,{id:"web.header.back"}))),f.a.createElement("div",{className:"col-sm-12"},f.a.createElement("div",{className:"signup-team__container"},f.a.createElement("img",{className:"signup-team-logo",src:N.a}),f.a.createElement("div",{className:"signup__content"},f.a.createElement("h1",null,e.window.mm_config.SiteName),f.a.createElement("h4",{className:"color--light"},f.a.createElement(S.FormattedMessage,{id:"web.root.signup_info"})),f.a.createElement("div",{className:"margin--extra"},f.a.createElement("h5",null,f.a.createElement("strong",null,f.a.createElement(S.FormattedMessage,{id:"signup.title",defaultMessage:"Create an account with:"})))),t,a))))}}]),t}(f.a.Component);a["default"]=L,L.propTypes={location:f.a.PropTypes.object}}).call(a,t(17))}});