webpackJsonp([21],{1664:function(e,t,a){"use strict";(function(e){var r=a(112),n=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(n,"a",n);var s=a(6),i=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(i,"a",i);var u=a(3),l=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(l,"a",l);var o=a(4),c=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(c,"a",c);var m=a(7),d=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(d,"a",d);var f=a(2),_=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(_,"a",_);var p=a(13),h=a(1783),E=a(566),g=a(11),v=a(1632),M=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(M,"a",M);var b=a(1),N=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(N,"a",N);var T=a(23),y=T&&T.__esModule?function(){return T["default"]}:function(){return T};a.d(y,"a",y);var S=a(30),L=S&&S.__esModule?function(){return S["default"]}:function(){return S};a.d(L,"a",L);var k=a(12),A=k&&k.__esModule?function(){return k["default"]}:function(){return k};a.d(A,"a",A);var w=function(t){function r(e){l()(this,r);var t=d()(this,(r.__proto__||i()(r)).call(this,e));return t.submitBack=t.submitBack.bind(t),t.submitNext=t.submitNext.bind(t),t.handleFocus=t.handleFocus.bind(t),t.state={nameError:"",isLoading:!1},t}return _()(r,t),c()(r,[{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="display_name",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(t){var r=this;t.preventDefault();var s=y.a.findDOMNode(this.refs.name).value.trim();if(!s)return void this.setState({nameError:p.localizeMessage("create_team.team_url.required","This field is required")});var i=p.cleanUpUrlable(s),u=/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g;if(i!==s||!u.test(s))return void this.setState({nameError:p.localizeMessage("create_team.team_url.regex","Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash.")});if(i.length<g.a.MIN_TEAMNAME_LENGTH||i.length>g.a.MAX_TEAMNAME_LENGTH)return void this.setState({nameError:p.localizeMessage("create_team.team_url.charLength","Name must be 4 or more characters up to a maximum of 15")});if("true"===e.window.mm_config.RestrictTeamNames)for(var l=0;l<g.a.RESERVED_TEAM_NAMES.length;l++)if(0===i.indexOf(g.a.RESERVED_TEAM_NAMES[l]))return void this.setState({nameError:p.localizeMessage("create_team.team_url.taken","URL is taken or contains a reserved word")});this.setState({isLoading:!0});var o=JSON.parse(n()(this.props.state));o.team.type="O",o.team.name=s,a.i(h.a)(s,function(e){return e?(r.setState({nameError:p.localizeMessage("create_team.team_url.unavailable","This URL is unavailable. Please try another.")}),void r.setState({isLoading:!1})):void a.i(h.b)(o.team,function(){a.i(E.b)("signup","signup_team_08_complete")},function(e){r.setState({nameError:e.message}),r.setState({isLoading:!1})})},function(e){r.setState({nameError:e.message})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){a.i(E.b)("signup","signup_team_03_url");var e=null,t="form-group";this.state.nameError&&(e=N.a.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var r=p.getSiteURL()+"/",n=N.a.createElement(S.Tooltip,{id:"urlTooltip"},r),s=N.a.createElement(k.FormattedMessage,{id:"create_team.team_url.finish",defaultMessage:"Finish"});return this.state.isLoading&&(s=N.a.createElement(k.FormattedMessage,{id:"create_team.team_url.creatingTeam",defaultMessage:"Creating team..."})),N.a.createElement("div",null,N.a.createElement("form",null,N.a.createElement("img",{className:"signup-team-logo",src:M.a}),N.a.createElement("h2",null,N.a.createElement(k.FormattedMessage,{id:"create_team.team_url.teamUrl",defaultMessage:"Team URL"})),N.a.createElement("div",{className:t},N.a.createElement("div",{className:"row"},N.a.createElement("div",{className:"col-sm-11"},N.a.createElement("div",{className:"input-group input-group--limit"},N.a.createElement(S.OverlayTrigger,{delayShow:g.a.OVERLAY_TIME_DELAY,placement:"top",overlay:n},N.a.createElement("span",{className:"input-group-addon"},r)),N.a.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"})))),e),N.a.createElement("p",null,N.a.createElement(k.FormattedMessage,{id:"create_team.team_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),N.a.createElement("ul",{className:"color--light"},N.a.createElement(k.FormattedHTMLMessage,{id:"create_team.team_url.hint",defaultMessage:"<li>Short and memorable is best</li> <li>Use lowercase letters, numbers and dashes</li> <li>Must start with a letter and can't end in a dash</li>"})),N.a.createElement("div",{className:"margin--extra"},N.a.createElement(S.Button,{type:"submit",bsStyle:"primary",disabled:this.state.isLoading,onClick:this.submitNext},s)),N.a.createElement("div",{className:"margin--extra"},N.a.createElement("a",{href:"#",onClick:this.submitBack},N.a.createElement(k.FormattedMessage,{id:"create_team.team_url.back",defaultMessage:"Back to previous step"})))))}}]),r}(N.a.Component);t["default"]=w,w.propTypes={state:N.a.PropTypes.object,updateParent:N.a.PropTypes.func}}).call(t,a(17))},1783:function(e,t,a){"use strict";function r(e,t,a){l.a.findTeamByName(e,t,a)}function n(e,t,a){l.a.createTeam(e,function(e){u.getDirectProfiles(),c.a.handleServerAction({type:d.CREATED_TEAM,team:e,member:{team_id:e.id,user_id:s.a.getCurrentId(),roles:"admin"}}),m.a.push("/"+e.name+"/channels/town-square"),t&&t(e)},a)}var s=a(18),i=a(11),u=a(26),l=a(19),o=a(25),c=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(c,"a",c);var m=a(53);t.a=r,t.b=n;var d=i.a.ActionTypes}});