webpackJsonp([33],{1680:function(e,a,t){"use strict";var n=t(6),s=n&&n.__esModule?function(){return n["default"]}:function(){return n};t.d(s,"a",s);var i=t(3),r=i&&i.__esModule?function(){return i["default"]}:function(){return i};t.d(r,"a",r);var o=t(7),l=o&&o.__esModule?function(){return o["default"]}:function(){return o};t.d(l,"a",l);var c=t(4),d=c&&c.__esModule?function(){return c["default"]}:function(){return c};t.d(d,"a",d);var m=t(2),u=m&&m.__esModule?function(){return m["default"]}:function(){return m};t.d(u,"a",u);var h=t(1),p=h&&h.__esModule?function(){return h["default"]}:function(){return h};t.d(p,"a",p);var g=t(26),f=t(1634),v=t(1645),_=t(12),b=_&&_.__esModule?function(){return _["default"]}:function(){return _};t.d(b,"a",b);var E=t(1630),N=t(53),y=t(565),k=function(e){function a(e){r()(this,a);var t=l()(this,(a.__proto__||s()(a)).call(this,e));return t.handleSubmit=t.handleSubmit.bind(t),t.updateDisplayName=t.updateDisplayName.bind(t),t.updateDescription=t.updateDescription.bind(t),t.updateChannelId=t.updateChannelId.bind(t),t.state={displayName:"",description:"",channelId:"",saving:!1,serverError:"",clientError:null},t}return u()(a,e),d()(a,null,[{key:"propTypes",get:function(){return{team:p.a.propTypes.object.isRequired}}}]),d()(a,[{key:"handleSubmit",value:function(e){var a=this;if(e.preventDefault(),!this.state.saving){if(this.setState({saving:!0,serverError:"",clientError:""}),!this.state.channelId)return void this.setState({saving:!1,clientError:p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.channelRequired",defaultMessage:"A valid channel is required"})});var t={channel_id:this.state.channelId,display_name:this.state.displayName,description:this.state.description};g.addIncomingHook(t,function(e){N.a.push("/"+a.props.team.name+"/integrations/confirm?type=incoming_webhooks&id="+e.id)},function(e){a.setState({saving:!1,serverError:e.message})})}}},{key:"updateDisplayName",value:function(e){this.setState({displayName:e.target.value})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"render",value:function(){return p.a.createElement("div",{className:"backstage-content"},p.a.createElement(f.a,null,p.a.createElement(N.b,{to:"/"+this.props.team.name+"/integrations/incoming_webhooks"},p.a.createElement(_.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"})),p.a.createElement(_.FormattedMessage,{id:"integrations.add",defaultMessage:"Add"})),p.a.createElement("div",{className:"backstage-form"},p.a.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},p.a.createElement("div",{className:"form-group"},p.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.displayName",defaultMessage:"Display Name"})),p.a.createElement("div",{className:"col-md-5 col-sm-8"},p.a.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),p.a.createElement("div",{className:"form__help"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.displayName.help",defaultMessage:"Display name for your incoming webhook made of up to 64 characters."})))),p.a.createElement("div",{className:"form-group"},p.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.description",defaultMessage:"Description"})),p.a.createElement("div",{className:"col-md-5 col-sm-8"},p.a.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),p.a.createElement("div",{className:"form__help"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),p.a.createElement("div",{className:"form-group"},p.a.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.channel",defaultMessage:"Channel"})),p.a.createElement("div",{className:"col-md-5 col-sm-8"},p.a.createElement(v.a,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0,selectPrivate:!0}),p.a.createElement("div",{className:"form__help"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.channel.help",defaultMessage:"Public channel or private group that receives the webhook payloads. You must belong to the private group when setting up the webhook."})))),p.a.createElement("div",{className:"backstage-form__footer"},p.a.createElement(E.a,{type:"backstage",errors:[this.state.serverError,this.state.clientError]}),p.a.createElement(N.b,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/incoming_webhooks"},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.cancel",defaultMessage:"Cancel"})),p.a.createElement(y.a,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},p.a.createElement(_.FormattedMessage,{id:"add_incoming_webhook.save",defaultMessage:"Save"}))))))}}]),a}(p.a.Component);a["default"]=k}});