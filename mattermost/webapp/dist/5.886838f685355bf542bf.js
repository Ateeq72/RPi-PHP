webpackJsonp([5],{1691:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(1),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(0),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(53),_=a(13),E=a(26),M=a(37),b=a(18),y=a(45),S=a(36),T=a(54),C=a(11),k=a(1633),w=a(1883),N=a(1884),P=a(1867),I=a(1854),D=a(1855),L=a(1856),F=a(1852),A=a(1851),O=a(1865),H=a(1889),R=a(1873),x=a(1892),U=a(1862),G=a(1863),z=a(1643),V=C.a.TutorialSteps,W=C.a.Preferences,Y=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));a.onTeamChanged=a.onTeamChanged.bind(a),a.onPreferencesChanged=a.onPreferencesChanged.bind(a);var n=M.a.getCurrent();return a.state={team:n,theme:y.a.getTheme(n.id)},a}return m()(t,e),l()(t,[{key:"onTeamChanged",value:function(){var e=M.a.getCurrent();this.setState({team:e,theme:y.a.getTheme(e.id)})}},{key:"onPreferencesChanged",value:function(e){e&&e!==W.CATEGORY_THEME||this.setState({theme:y.a.getTheme(this.state.team.id)})}},{key:"componentWillMount",value:function(){var e=y.a.getInt(W.TUTORIAL_STEP,b.a.getCurrentId(),999);e<=V.INTRO_SCREENS&&v.a.push(M.a.getCurrentTeamRelativeUrl()+"/tutorial")}},{key:"componentDidMount",value:function(){M.a.addChangeListener(this.onTeamChanged),y.a.addChangeListener(this.onPreferencesChanged),T.viewLoggedIn(),window.isActive=!0,g()(window).on("focus",function(){E.updateLastViewedAt(),S.a.resetCounts(S.a.getCurrentId()),S.a.emitChange(),window.isActive=!0}),g()(window).on("blur",function(){window.isActive=!1,E.setActiveChannel("")}),_.applyTheme(this.state.theme)}},{key:"componentDidUpdate",value:function(e,t){_.areObjectsEqual(t.theme,this.state.theme)||_.applyTheme(this.state.theme)}},{key:"componentWillUnmount",value:function(){M.a.removeChangeListener(this.onTeamChanged),y.a.removeChangeListener(this.onPreferencesChanged),g()(window).off("focus"),g()(window).off("blur")}},{key:"render",value:function(){var e=[];return this.props.children?e=this.props.children:(e.push(this.props.navbar),e.push(this.props.sidebar),e.push(f.a.createElement("div",{key:"inner-wrap",className:"inner-wrap channel__wrap"},f.a.createElement("div",{className:"row header"},f.a.createElement("div",{id:"navbar"},f.a.createElement(P.a,null))),f.a.createElement("div",{className:"row main"},f.a.cloneElement(this.props.center,{user:this.props.user,team:this.state.team}))))),f.a.createElement("div",{className:"channel-view"},f.a.createElement(k.a,null),f.a.createElement("div",{className:"container-fluid"},f.a.createElement(w.a,null),f.a.createElement(N.a,{teamType:this.state.team.type}),e,f.a.createElement(I.a,null),f.a.createElement(D.a,null),f.a.createElement(L.a,null),f.a.createElement(U.a,null),f.a.createElement(G.a,null),f.a.createElement(x.a,null),f.a.createElement(H.a,null),f.a.createElement(O.a,null),f.a.createElement(F.a,null),f.a.createElement(A.a,null),f.a.createElement(R.a,null),f.a.createElement(z.a,null)))}}]),t}(f.a.Component);t["default"]=Y,Y.propTypes={children:f.a.PropTypes.oneOfType([f.a.PropTypes.arrayOf(f.a.PropTypes.element),f.a.PropTypes.element]),navbar:f.a.PropTypes.element,sidebar:f.a.PropTypes.element,center:f.a.PropTypes.element,params:f.a.PropTypes.object,user:f.a.PropTypes.object}},1714:function(e,t,a){"use strict";var n=a(230),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(6),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(3),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(4),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(7),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(2),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(25),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(55),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(11),M=E.a.ActionTypes,b=function(e){function t(){l()(this,t);var e=m()(this,(t.__proto__||o()(t)).call(this));return e.addModalListener=e.addModalListener.bind(e),e.removeModalListener=e.removeModalListener.bind(e),e.handleEventPayload=e.handleEventPayload.bind(e),e.dispatchToken=g.a.register(e.handleEventPayload),e}return f()(t,e),d()(t,[{key:"addModalListener",value:function(e,t){this.on(e,t)}},{key:"removeModalListener",value:function(e,t){this.removeListener(e,t)}},{key:"handleEventPayload",value:function(e){var t=e.action,a=t.type,n=t.value,s=r()(t,["type","value"]);switch(a){case M.TOGGLE_IMPORT_THEME_MODAL:case M.TOGGLE_INVITE_MEMBER_MODAL:case M.TOGGLE_LEAVE_TEAM_MODAL:case M.TOGGLE_DELETE_POST_MODAL:case M.TOGGLE_GET_POST_LINK_MODAL:case M.TOGGLE_GET_TEAM_INVITE_LINK_MODAL:case M.TOGGLE_GET_PUBLIC_LINK_MODAL:this.emit(a,n,s)}}}]),t}(_.a),y=new b;t.a=y},1735:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(23),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(12),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(30),M=E&&E.__esModule?function(){return E["default"]}:function(){return E};a.d(M,"a",M);var b=a(1),y=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(y,"a",y);var S=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.onHide=a.onHide.bind(a),a.copyLink=a.copyLink.bind(a),a.selectLinkOnClick=a.selectLinkOnClick.bind(a),a.state={copiedLink:!1},a}return m()(t,e),l()(t,[{key:"componntWillUnmount",value:function(){f()(this.refs.textarea).off("click")}},{key:"onHide",value:function(){this.setState({copiedLink:!1}),this.props.onHide()}},{key:"selectLinkOnClick",value:function(){f()(this.refs.textarea).on("click",function(){f()(this).select(),this.setSelectionRange(0,this.value.length)})}},{key:"copyLink",value:function(){var e=f()(g.a.findDOMNode(this.refs.textarea));e.select();try{var t=document.execCommand("copy");t?this.setState({copiedLink:!0}):this.setState({copiedLink:!1})}catch(a){this.setState({copiedLink:!1})}}},{key:"render",value:function(){var e=null;this.props.helpText&&(e=y.a.createElement("p",null,this.props.helpText,y.a.createElement("br",null),y.a.createElement("br",null)));var t=null;document.queryCommandSupported("copy")&&(t=y.a.createElement("button",{"data-copy-btn":"true",type:"button",className:"btn btn-primary pull-left",onClick:this.copyLink},y.a.createElement(v.FormattedMessage,{id:"get_link.copy",defaultMessage:"Copy Link"})));var a=y.a.createElement("textarea",{className:"form-control no-resize min-height",ref:"textarea",value:this.props.link}),n=null;return this.state.copiedLink&&(n=y.a.createElement("p",{className:"alert alert-success alert--confirm"},y.a.createElement("i",{className:"fa fa-check"}),y.a.createElement(v.FormattedMessage,{id:"get_link.clipboard",defaultMessage:" Link copied to clipboard."}))),y.a.createElement(E.Modal,{show:this.props.show,onHide:this.onHide,onEntered:this.selectLinkOnClick},y.a.createElement(E.Modal.Header,{closeButton:!0},y.a.createElement("h4",{className:"modal-title"},this.props.title)),y.a.createElement(E.Modal.Body,null,e,a),y.a.createElement(E.Modal.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.onHide},y.a.createElement(v.FormattedMessage,{id:"get_link.close",defaultMessage:"Close"})),t,n))}}]),t}(y.a.Component);t.a=S,S.propTypes={show:y.a.PropTypes.bool.isRequired,onHide:y.a.PropTypes.func.isRequired,title:y.a.PropTypes.string.isRequired,helpText:y.a.PropTypes.string,link:y.a.PropTypes.string.isRequired},S.defaultProps={helpText:null}},1771:function(e,t,a){function n(e,t,a){var n=u[t];if("undefined"==typeof n&&(n=s(t)),n){if(void 0===a)return e.style[n];e.style[n]=d(n,a)}}function r(e,t){for(var a in t)t.hasOwnProperty(a)&&n(e,a,t[a])}function s(e){var t=l(e),a=i(t);return u[t]=u[e]=u[a]=a,a}function o(){2===arguments.length?"string"==typeof arguments[1]?arguments[0].style.cssText=arguments[1]:r(arguments[0],arguments[1]):n(arguments[0],arguments[1],arguments[2])}var i=(a(0),a(0),a(2002)),l=a(2033),u={"float":"cssFloat"},d=a(1904);e.exports=o,e.exports.set=o,e.exports.get=function(e,t){return Array.isArray(t)?t.reduce(function(t,a){return t[a]=n(e,a||""),t},{}):n(e,t||"")}},1848:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(327),f=a(326),p=a(1885),g=a(12),v=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(v,"a",v);var _=a(30),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(36),b=a(18),y=a(11),S=a(13),T=a(568),C=a(1),k=C&&C.__esModule?function(){return C["default"]}:function(){return C};a.d(k,"a",k);var w=a(0),N=w&&w.__esModule?function(){return w["default"]}:function(){return w};a.d(N,"a",N);var P=function(e){function t(){o()(this,t);var e=d()(this,(t.__proto__||r()(t)).call(this));return e.onInput=e.onInput.bind(e),e.onShow=e.onShow.bind(e),e.onHide=e.onHide.bind(e),e.onExited=e.onExited.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e.handleSubmit=e.handleSubmit.bind(e),e.suggestionProviders=[new p.a],e.state={text:"",error:""},e}return m()(t,e),l()(t,[{key:"componentDidUpdate",value:function(e){if(this.props.show&&!e.show){var t=this.refs.search.getTextbox();t.focus(),S.placeCaretAtEnd(t)}}},{key:"onShow",value:function(){this.setState({text:"",error:""})}},{key:"onHide",value:function(){this.setState({text:"",error:""}),this.props.onHide()}},{key:"onExited",value:function(){setTimeout(function(){N()("#post_textbox").get(0).focus()})}},{key:"onInput",value:function(e){this.setState({text:e.target.value})}},{key:"handleKeyDown",value:function(e){this.setState({error:""}),e.keyCode===y.a.KeyCodes.ENTER&&this.handleSubmit()}},{key:"handleSubmit",value:function(){var e=this.state.text.trim(),t=null;if(e.indexOf(S.localizeMessage("channel_switch_modal.dm","(Direct Message)"))>0){var a=e.substr(0,e.indexOf(S.localizeMessage("channel_switch_modal.dm","(Direct Message)"))-1);t=M.a.getByName(S.getDirectChannelNameByUsername(a,b.a.getCurrentUser().username).trim())}else t=M.a.getByName(this.state.text.trim());null!==t?(T.goToChannel(t),this.onHide()):""!==this.state.text&&this.setState({error:S.localizeMessage("channel_switch_modal.not_found","No matches found.")})}},{key:"render",value:function(){var e=this.state.error;return k.a.createElement(_.Modal,{className:"modal-browse-channel",ref:"modal",show:this.props.show,onHide:this.onHide,onExited:this.onExited},k.a.createElement(_.Modal.Header,{closeButton:!0},k.a.createElement(_.Modal.Title,null,k.a.createElement("span",null,k.a.createElement(g.FormattedMessage,{id:"channel_switch_modal.title",defaultMessage:"Switch Channels"})))),k.a.createElement(_.Modal.Body,null,k.a.createElement("div",{className:"modal__hint"},k.a.createElement(g.FormattedMessage,{id:"channel_switch_modal.help",defaultMessage:"Type channel name. Use ↑↓ to browse, TAB to select, ↵ to confirm, ESC to dismiss"})),k.a.createElement(f.a,{ref:"search",className:"form-control focused",type:"input",onInput:this.onInput,value:this.state.text,onKeyDown:this.handleKeyDown,listComponent:h.a,maxLength:"64",providers:this.suggestionProviders,preventDefaultSubmit:!1,listStyle:"bottom"})),k.a.createElement(_.Modal.Footer,null,k.a.createElement("div",{className:"modal__error"},e),k.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.onHide},k.a.createElement(g.FormattedMessage,{id:"edit_channel_header_modal.cancel",defaultMessage:"Cancel"})),k.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleSubmit},k.a.createElement(g.FormattedMessage,{id:"channel_switch_modal.submit",defaultMessage:"Switch"}))))}}]),t}(k.a.Component);t.a=P,P.propTypes={show:k.a.PropTypes.bool.isRequired,onHide:k.a.PropTypes.func.isRequired}},1849:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(23),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(25),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(19),M=a(18),b=a(1651),y=a(153),S=a(45),T=a(1640),C=a(1639),k=a(1649),w=a(1647),N=a(1646),P=a(13),I=a(75),D=a(54),L=a(11),F=a(12),A=F&&F.__esModule?function(){return F["default"]}:function(){return F};a.d(A,"a",A);var O=a(1),H=O&&O.__esModule?function(){return O["default"]}:function(){return O};a.d(H,"a",H);var R=L.a.ActionTypes,x=L.a.KeyCodes,U=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));a.lastTime=0,a.handleSubmit=a.handleSubmit.bind(a),a.commentMsgKeyPress=a.commentMsgKeyPress.bind(a),a.handleInput=a.handleInput.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleUploadClick=a.handleUploadClick.bind(a),a.handleUploadStart=a.handleUploadStart.bind(a),a.handleFileUploadComplete=a.handleFileUploadComplete.bind(a),a.handleUploadError=a.handleUploadError.bind(a),a.removePreview=a.removePreview.bind(a),a.getFileCount=a.getFileCount.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.focusTextbox=a.focusTextbox.bind(a),a.showPostDeletedModal=a.showPostDeletedModal.bind(a),a.hidePostDeletedModal=a.hidePostDeletedModal.bind(a),y.a.clearCommentDraftUploads(),T.a.resetHistoryIndex("comment");var n=y.a.getCommentDraft(a.props.rootId);return a.state={messageText:n.message,uploadsInProgress:n.uploadsInProgress,previews:n.previews,submitting:!1,ctrlSend:S.a.getBool(L.a.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),showPostDeletedModal:!1},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){S.a.addChangeListener(this.onPreferenceChange),this.focusTextbox()}},{key:"componentWillUnmount",value:function(){S.a.removeChangeListener(this.onPreferenceChange)}},{key:"onPreferenceChange",value:function(){this.setState({ctrlSend:S.a.getBool(L.a.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")})}},{key:"componentDidUpdate",value:function(e,t){t.uploadsInProgress<this.state.uploadsInProgress&&f()(".post-right__scroll").scrollTop(f()(".post-right__scroll")[0].scrollHeight),e.rootId!==this.props.rootId&&this.focusTextbox()}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!(this.state.uploadsInProgress.length>0||this.state.submitting)){var a={};if(a.filenames=[],a.message=this.state.messageText,0!==a.message.trim().length||0!==this.state.previews.length){if(a.message.length>L.a.CHARACTER_LIMIT)return void this.setState({postError:H.a.createElement(F.FormattedMessage,{id:"create_comment.commentLength",defaultMessage:"Comment length must be less than {max} characters.",values:{max:L.a.CHARACTER_LIMIT}})});T.a.storeMessageInHistory(this.state.messageText);var n=M.a.getCurrentId();a.channel_id=this.props.channelId,a.root_id=this.props.rootId,a.parent_id=this.props.rootId,a.filenames=this.state.previews;var r=P.getTimestamp();a.pending_post_id=n+":"+r,a.user_id=n,a.create_at=r,D.emitUserCommentedEvent(a),E.a.createPost(a,function(e){y.a.removePendingPost(a.channel_id,a.pending_post_id),_.a.handleServerAction({type:R.RECEIVED_POST,post:e})},function(e){"api.post.create_post.root_id.app_error"===e.id?(t.showPostDeletedModal(),y.a.removePendingPost(a.channel_id,a.pending_post_id)):(a.state=L.a.POST_FAILED,y.a.updatePendingPost(a)),t.setState({submitting:!1})}),this.setState({messageText:"",submitting:!1,postError:null,previews:[],serverError:null})}}}},{key:"commentMsgKeyPress",value:function(e){!I.isMobileApp()&&(this.state.ctrlSend&&e.ctrlKey||!this.state.ctrlSend)&&(e.which!==x.ENTER||e.shiftKey||e.altKey||(e.preventDefault(),g.a.findDOMNode(this.refs.textbox).blur(),this.handleSubmit(e))),D.emitLocalUserTypingEvent(this.props.channelId,this.props.rootId)}},{key:"handleInput",value:function(e){var t=e.target.value,a=y.a.getCommentDraft(this.props.rootId);a.message=t,y.a.storeCommentDraft(this.props.rootId,a),f()(".post-right__scroll").parent().scrollTop(f()(".post-right__scroll")[0].scrollHeight),this.setState({messageText:t})}},{key:"handleKeyDown",value:function(e){if(this.state.ctrlSend&&e.keyCode===x.ENTER&&e.ctrlKey===!0)return void this.commentMsgKeyPress(e);if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.keyCode!==x.UP||""!==this.state.messageText)){e.preventDefault();var t=y.a.getCurrentUsersLatestPost(this.props.channelId,this.props.rootId);if(!t)return;_.a.handleViewAction({type:R.RECEIVED_EDIT_POST,refocusId:"#reply_textbox",title:P.localizeMessage("create_comment.commentTitle","Comment"),message:t.message,postId:t.id,channelId:t.channel_id,comments:y.a.getCommentCount(t)})}if((e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey&&(e.keyCode===L.a.KeyCodes.UP||e.keyCode===L.a.KeyCodes.DOWN)){var a=T.a.nextMessageInHistory(e.keyCode,this.state.messageText,"comment");null!==a&&(e.preventDefault(),this.setState({messageText:a}))}}},{key:"handleUploadClick",value:function(){this.focusTextbox()}},{key:"handleUploadStart",value:function(e){var t=y.a.getCommentDraft(this.props.rootId);t.uploadsInProgress=t.uploadsInProgress.concat(e),y.a.storeCommentDraft(this.props.rootId,t),this.setState({uploadsInProgress:t.uploadsInProgress}),this.focusTextbox()}},{key:"handleFileUploadComplete",value:function(e,t){for(var a=y.a.getCommentDraft(this.props.rootId),n=0;n<t.length;n++){var r=a.uploadsInProgress.indexOf(t[n]);r!==-1&&a.uploadsInProgress.splice(r,1)}a.previews=a.previews.concat(e),y.a.storeCommentDraft(this.props.rootId,a),this.setState({uploadsInProgress:a.uploadsInProgress,previews:a.previews})}},{key:"handleUploadError",value:function(e,t){if(t===-1)this.setState({serverError:e});else{var a=y.a.getCommentDraft(this.props.rootId),n=a.uploadsInProgress.indexOf(t);n!==-1&&a.uploadsInProgress.splice(n,1),y.a.storeCommentDraft(this.props.rootId,a),this.setState({uploadsInProgress:a.uploadsInProgress,serverError:e})}}},{key:"removePreview",value:function(e){var t=this.state.previews,a=this.state.uploadsInProgress,n=t.indexOf(e);n===-1?(n=a.indexOf(e),n!==-1&&(a.splice(n,1),this.refs.fileUpload.getWrappedInstance().cancelUpload(e))):t.splice(n,1);var r=y.a.getCommentDraft(this.props.rootId);r.previews=t,r.uploadsInProgress=a,y.a.storeCommentDraft(this.props.rootId,r),this.setState({previews:t,uploadsInProgress:a})}},{key:"componentWillReceiveProps",value:function(e){if(e.rootId!==this.props.rootId){var t=y.a.getCommentDraft(e.rootId);this.setState({messageText:t.message,uploadsInProgress:t.uploadsInProgress,previews:t.previews})}}},{key:"getFileCount",value:function(){return this.state.previews.length+this.state.uploadsInProgress.length}},{key:"focusTextbox",value:function(){P.isMobile()||this.refs.textbox.focus()}},{key:"showPostDeletedModal",value:function(){this.setState({showPostDeletedModal:!0})}},{key:"hidePostDeletedModal",value:function(){this.setState({showPostDeletedModal:!1})}},{key:"render",value:function(){var e=null;this.state.serverError&&(e=H.a.createElement("div",{className:"form-group has-error"},H.a.createElement("label",{className:"control-label"},this.state.serverError)));var t=null;this.state.postError&&(t=H.a.createElement("label",{className:"control-label"},this.state.postError));var a=null;(this.state.previews.length>0||this.state.uploadsInProgress.length>0)&&(a=H.a.createElement(N.a,{files:this.state.previews,onRemove:this.removePreview,uploadsInProgress:this.state.uploadsInProgress}));var n="post-create-footer";t&&(n+=" has-error");var r=null;return this.state.uploadsInProgress.length>0&&(r=H.a.createElement("span",{className:"pull-right post-right-comments-upload-in-progress"},1===this.state.uploadsInProgress.length?H.a.createElement(F.FormattedMessage,{id:"create_comment.file",defaultMessage:"File uploading"}):H.a.createElement(F.FormattedMessage,{id:"create_comment.files",defaultMessage:"Files uploading"}))),H.a.createElement("form",{onSubmit:this.handleSubmit},H.a.createElement("div",{className:"post-create"},H.a.createElement("div",{id:this.props.rootId,className:"post-create-body comment-create-body"},H.a.createElement("div",{className:"post-body__cell"},H.a.createElement(C.a,{onInput:this.handleInput,onKeyPress:this.commentMsgKeyPress,onKeyDown:this.handleKeyDown,messageText:this.state.messageText,createMessage:P.localizeMessage("create_comment.addComment","Add a comment..."),initialText:"",supportsCommands:!1,id:"reply_textbox",ref:"textbox"}),H.a.createElement(w.a,{ref:"fileUpload",getFileCount:this.getFileCount,onClick:this.handleUploadClick,onUploadStart:this.handleUploadStart,onFileUpload:this.handleFileUploadComplete,onUploadError:this.handleUploadError,postType:"comment",channelId:this.props.channelId}))),H.a.createElement(k.a,{channelId:this.props.channelId,parentId:this.props.rootId}),H.a.createElement("div",{className:n},H.a.createElement("input",{type:"button",className:"btn btn-primary comment-btn pull-right",value:P.localizeMessage("create_comment.comment","Add Comment"),onClick:this.handleSubmit}),r,a,t,e)),H.a.createElement(b.a,{show:this.state.showPostDeletedModal,onHide:this.hidePostDeletedModal}))}}]),t}(H.a.Component);t.a=U,U.propTypes={channelId:H.a.PropTypes.string.isRequired,rootId:H.a.PropTypes.string.isRequired}},1851:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(23),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(19),_=a(153),E=a(1714),M=a(30),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=a(26),S=a(25),T=S&&S.__esModule?function(){return S["default"]}:function(){return S};a.d(T,"a",T);var C=a(11),k=a(12),w=k&&k.__esModule?function(){return k["default"]}:function(){return k};a.d(w,"a",w);var N=a(1),P=N&&N.__esModule?function(){return N["default"]}:function(){return N};a.d(P,"a",P);var I=C.a.ActionTypes,D=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a.handleToggle=a.handleToggle.bind(a),a.handleHide=a.handleHide.bind(a),a.state={show:!1,post:null,commentCount:0,error:""},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){E.a.addModalListener(I.TOGGLE_DELETE_POST_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){E.a.removeModalListener(I.TOGGLE_DELETE_POST_MODAL,this.handleToggle)}},{key:"componentDidUpdate",value:function(e,t){var a=this;this.state.show&&!t.show&&setTimeout(function(){f()(g.a.findDOMNode(a.refs.deletePostBtn)).focus()},0)}},{key:"handleDelete",value:function(){var e=this;v.a.deletePost(this.state.post.channel_id,this.state.post.id,function(){_.a.deletePost(e.state.post),e.state.post.id===_.a.getSelectedPostId()&&T.a.handleServerAction({type:I.RECEIVED_POST_SELECTED,postId:null})},function(e){y.dispatchError(e,"deletePost")}),this.handleHide()}},{key:"handleToggle",value:function(e,t){this.setState({show:e,post:t.post,commentCount:t.commentCount,error:""})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){if(!this.state.post)return null;var e=null;this.state.error&&(e=P.a.createElement("div",{className:"form-group has-error"},P.a.createElement("label",{className:"control-label"},this.state.error)));var t="";this.state.commentCount>0&&(t=P.a.createElement(k.FormattedMessage,{id:"delete_post.warning",defaultMessage:"This post has {count} comment(s) on it.",values:{count:this.state.commentCount}}));var a=this.state.post.root_id?P.a.createElement(k.FormattedMessage,{id:"delete_post.comment",defaultMessage:"Comment"}):P.a.createElement(k.FormattedMessage,{id:"delete_post.post",defaultMessage:"Post"});return P.a.createElement(M.Modal,{show:this.state.show,onHide:this.handleHide},P.a.createElement(M.Modal.Header,{closeButton:!0},P.a.createElement(M.Modal.Title,null,P.a.createElement(k.FormattedMessage,{id:"delete_post.confirm",defaultMessage:"Confirm {term} Delete",values:{term:a}}))),P.a.createElement(M.Modal.Body,null,P.a.createElement(k.FormattedMessage,{id:"delete_post.question",defaultMessage:"Are you sure you want to delete this {term}?",values:{term:a}}),P.a.createElement("br",null),P.a.createElement("br",null),t,e),P.a.createElement(M.Modal.Footer,null,P.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},P.a.createElement(k.FormattedMessage,{id:"delete_post.cancel",defaultMessage:"Cancel"})),P.a.createElement("button",{ref:"deletePostBtn",type:"button",className:"btn btn-danger",onClick:this.handleDelete},P.a.createElement(k.FormattedMessage,{id:"delete_post.del",defaultMessage:"Delete"}))))}}]),t}(P.a.Component);t.a=D},1852:function(e,t,a){"use strict";var n=a(99),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(6),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(3),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(4),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(7),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(2),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(0),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(23),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(19),M=a(26),b=a(54),y=a(1639),S=a(85),T=a(153),C=a(1640),k=a(45),w=a(13),N=a(11),P=a(12),I=P&&P.__esModule?function(){return P["default"]}:function(){return P};a.d(I,"a",I);var D=a(1),L=D&&D.__esModule?function(){return D["default"]}:function(){return D};a.d(L,"a",L);var F=N.a.KeyCodes,A=function(e){function t(e){l()(this,t);var a=m()(this,(t.__proto__||o()(t)).call(this,e));return a.handleEdit=a.handleEdit.bind(a),a.handleEditKeyPress=a.handleEditKeyPress.bind(a),a.handleEditPostEvent=a.handleEditPostEvent.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleInput=a.handleInput.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.onModalHidden=a.onModalHidden.bind(a),a.onModalShow=a.onModalShow.bind(a),a.onModalShown=a.onModalShown.bind(a),a.onModalHide=a.onModalHide.bind(a),a.onModalKeyDown=a.onModalKeyDown.bind(a),a.state={editText:"",originalText:"",title:"",post_id:"",channel_id:"",comments:0,refocusId:"",ctrlSend:k.a.getBool(N.a.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")},a}return f()(t,e),d()(t,[{key:"handleEdit",value:function(){var e={};if(e.message=this.state.editText.trim(),e.message===this.state.originalText.trim())return void g()("#edit_post").modal("hide");if(C.a.storeMessageInHistory(e.message),0===e.message.length){var t=this.state;return r()(t,"editText"),S.a.setItem("edit_state_transfer",t),g()("#edit_post").modal("hide"),void b.showDeletePostModal(T.a.getPost(this.state.channel_id,this.state.post_id),this.state.comments)}e.id=this.state.post_id,e.channel_id=this.state.channel_id,E.a.updatePost(e,function(){M.getPosts(e.channel_id),window.scrollTo(0,0)},function(e){M.dispatchError(e,"updatePost")}),g()("#edit_post").modal("hide")}},{key:"handleInput",value:function(e){this.setState({editText:e.target.value})}},{key:"handleEditKeyPress",value:function(e){this.state.ctrlSend||e.which!==F.ENTER||e.shiftKey||e.altKey?this.state.ctrlSend&&e.ctrlKey&&e.which===F.ENTER&&(e.preventDefault(),_.a.findDOMNode(this.refs.editbox).blur(),this.handleEdit()):(e.preventDefault(),_.a.findDOMNode(this.refs.editbox).blur(),this.handleEdit())}},{key:"handleEditPostEvent",value:function(e){this.setState({editText:e.message||"",originalText:e.message||"",title:e.title||"",post_id:e.postId||"",channel_id:e.channelId||"",comments:e.comments||0,refocusId:e.refocusId||""}),g()(_.a.findDOMNode(this.refs.modal)).modal("show")}},{key:"handleKeyDown",value:function(e){this.state.ctrlSend&&e.keyCode===F.ENTER&&e.ctrlKey===!0&&this.handleEdit()}},{key:"onPreferenceChange",value:function(){this.setState({ctrlSend:k.a.getBool(N.a.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")})}},{key:"onModalHidden",value:function(){this.setState({editText:"",originalText:"",title:"",channel_id:"",post_id:"",comments:0,refocusId:"",error:"",typing:!1})}},{key:"onModalShow",value:function(e){var t=e.relatedTarget;t&&this.setState({editText:g()(t).attr("data-message"),originalText:g()(t).attr("data-message"),title:g()(t).attr("data-title"),channel_id:g()(t).attr("data-channelid"),post_id:g()(t).attr("data-postid"),comments:g()(t).attr("data-comments"),refocusId:g()(t).attr("data-refocusid"),typing:!1})}},{key:"onModalShown",value:function(){this.refs.editbox.focus()}},{key:"onModalHide",value:function(){var e=this;""!==this.state.refocusId&&setTimeout(function(){g()(e.state.refocusId).get(0).focus()})}},{key:"onModalKeyDown",value:function(e){e.which===N.a.KeyCodes.ESCAPE&&e.stopPropagation()}},{key:"componentDidMount",value:function(){g()(this.refs.modal).on("hidden.bs.modal",this.onModalHidden),g()(this.refs.modal).on("show.bs.modal",this.onModalShow),g()(this.refs.modal).on("shown.bs.modal",this.onModalShown),g()(this.refs.modal).on("hide.bs.modal",this.onModalHide),g()(this.refs.modal).on("keydown",this.onModalKeyDown),T.a.addEditPostListener(this.handleEditPostEvent),k.a.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){g()(this.refs.modal).off("hidden.bs.modal",this.onModalHidden),
g()(this.refs.modal).off("show.bs.modal",this.onModalShow),g()(this.refs.modal).off("shown.bs.modal",this.onModalShown),g()(this.refs.modal).off("hide.bs.modal",this.onModalHide),g()(this.refs.modal).off("keydown",this.onModalKeyDown),T.a.removeEditPostListner(this.handleEditPostEvent),k.a.removeChangeListener(this.onPreferenceChange)}},{key:"render",value:function(){var e=L.a.createElement("div",{className:"form-group"},L.a.createElement("br",null));return this.state.error&&(e=L.a.createElement("div",{className:"form-group has-error"},L.a.createElement("br",null),L.a.createElement("label",{className:"control-label"},this.state.error))),L.a.createElement("div",{className:"modal fade edit-modal",ref:"modal",id:"edit_post",role:"dialog",tabIndex:"-1","aria-hidden":"true"},L.a.createElement("div",{className:"modal-dialog modal-push-down"},L.a.createElement("div",{className:"modal-content"},L.a.createElement("div",{className:"modal-header"},L.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},L.a.createElement("span",{"aria-hidden":"true"},"×")),L.a.createElement("h4",{className:"modal-title"},L.a.createElement(P.FormattedMessage,{id:"edit_post.edit",defaultMessage:"Edit {title}",values:{title:this.state.title}}))),L.a.createElement("div",{className:"edit-modal-body modal-body"},L.a.createElement(y.a,{onInput:this.handleInput,onKeyPress:this.handleEditKeyPress,onKeyDown:this.handleKeyDown,messageText:this.state.editText,createMessage:w.localizeMessage("edit_post.editPost","Edit the post..."),supportsCommands:!1,id:"edit_textbox",ref:"editbox"}),e),L.a.createElement("div",{className:"modal-footer"},L.a.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},L.a.createElement(P.FormattedMessage,{id:"edit_post.cancel",defaultMessage:"Cancel"})),L.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handleEdit},L.a.createElement(P.FormattedMessage,{id:"edit_post.save",defaultMessage:"Save"}))))))}}]),t}(L.a.Component);t.a=A},1854:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(1735),f=a(1714),p=a(37),g=a(13),v=a(11),_=a(1),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(320),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleToggle=a.handleToggle.bind(a),a.hide=a.hide.bind(a),a.shouldComponentUpdate=b.a.shouldComponentUpdate.bind(a),a.state={show:!1,post:{}},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){f.a.addModalListener(v.a.ActionTypes.TOGGLE_GET_POST_LINK_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){f.a.removeModalListener(v.a.ActionTypes.TOGGLE_GET_POST_LINK_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e,t){this.setState({show:e,post:t.post})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){return E.a.createElement(h.a,{show:this.state.show,onHide:this.hide,title:g.localizeMessage("get_post_link_modal.title","Copy Permalink"),helpText:g.localizeMessage("get_post_link_modal.help","The link below allows authorized users to see your post."),link:p.a.getCurrentTeamUrl()+"/pl/"+this.state.post.id})}}]),t}(E.a.Component);t.a=y},1855:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(1),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(26),g=a(11),v=a(1714),_=a(320),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(13),b=a(1735),y=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handlePublicLink=a.handlePublicLink.bind(a),a.handleToggle=a.handleToggle.bind(a),a.hide=a.hide.bind(a),a.shouldComponentUpdate=E.a.shouldComponentUpdate.bind(a),a.state={show:!1,filename:"",link:""},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){v.a.addModalListener(g.a.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}},{key:"componentDidUpdate",value:function(e,t){this.state.show&&!t.show&&p.getPublicLink(decodeURIComponent(this.state.filename),this.handlePublicLink)}},{key:"componentWillUnmount",value:function(){v.a.removeModalListener(g.a.ActionTypes.TOGGLE_GET_PUBLIC_LINK_MODAL,this.handleToggle)}},{key:"handlePublicLink",value:function(e){this.setState({link:e})}},{key:"handleToggle",value:function(e,t){this.setState({show:e,filename:t.filename,link:""})}},{key:"hide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){return f.a.createElement(b.a,{show:this.state.show,onHide:this.hide,title:M.localizeMessage("get_public_link_modal.title","Copy Public Link"),helpText:M.localizeMessage("get_public_link_modal.help","The link below allows anyone to see this file without being registered on this server."),link:this.state.link})}}]),t}(f.a.Component);t.a=y},1856:function(e,t,a){"use strict";(function(e){var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(1735),f=a(1714),p=a(37),g=a(13),v=a(11),_=a(1),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(320),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=function(t){function a(e){o()(this,a);var t=d()(this,(a.__proto__||r()(a)).call(this,e));return t.handleToggle=t.handleToggle.bind(t),t.shouldComponentUpdate=b.a.shouldComponentUpdate.bind(t),t.state={show:!1},t}return m()(a,t),l()(a,[{key:"componentDidMount",value:function(){f.a.addModalListener(v.a.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){f.a.removeModalListener(v.a.ActionTypes.TOGGLE_GET_TEAM_INVITE_LINK_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e){this.setState({show:e})}},{key:"render",value:function(){var t=this,a=void 0;return a="true"===e.window.mm_config.EnableUserCreation?g.localizeMessage("get_team_invite_link_modal.help","Send teammates the link below for them to sign-up to this team site. The Team Invite Link can be shared with multiple teammates as it does not change unless it's regenerated in Team Settings by a Team Admin."):g.localizeMessage("get_team_invite_link_modal.helpDisabled","User creation has been disabled for your team. Please ask your team administrator for details."),E.a.createElement(h.a,{show:this.state.show,onHide:function(){return t.setState({show:!1})},title:g.localizeMessage("get_team_invite_link_modal.title","Team Invite Link"),helpText:a,link:p.a.getCurrentInviteLink()})}}]),a}(E.a.Component);t.a=y}).call(t,a(17))},1862:function(e,t,a){"use strict";(function(e){var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(23),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(13),g=a(11),v=a(19),_=a(54),E=a(1714),M=a(18),b=a(36),y=a(37),S=a(323),T=a(12),C=T&&T.__esModule?function(){return T["default"]}:function(){return T};a.d(C,"a",C);var k=a(30),w=k&&k.__esModule?function(){return k["default"]}:function(){return k};a.d(w,"a",w);var N=a(1),P=N&&N.__esModule?function(){return N["default"]}:function(){return N};a.d(P,"a",P);var I=g.a.ActionTypes,D=a.i(T.defineMessages)({emailError:{id:"invite_member.emailError",defaultMessage:"Please enter a valid email address"},firstname:{id:"invite_member.firstname",defaultMessage:"First name"},lastname:{id:"invite_member.lastname",defaultMessage:"Last name"},modalTitle:{id:"invite_member.modalTitle",defaultMessage:"Discard Invitations?"},modalMessage:{id:"invite_member.modalMessage",defaultMessage:"You have unsent invitations, are you sure you want to discard them?"},modalButton:{id:"invite_member.modalButton",defaultMessage:"Yes, Discard"}}),L=function(t){function a(t){o()(this,a);var n=d()(this,(a.__proto__||r()(a)).call(this,t));n.teamChange=n.teamChange.bind(n),n.handleToggle=n.handleToggle.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleHide=n.handleHide.bind(n),n.addInviteFields=n.addInviteFields.bind(n),n.clearFields=n.clearFields.bind(n),n.removeInviteFields=n.removeInviteFields.bind(n),n.showGetTeamInviteLinkModal=n.showGetTeamInviteLinkModal.bind(n);var s=y.a.getCurrent();return n.state={show:!1,inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{},emailEnabled:"true"===e.window.mm_config.SendEmailNotifications,userCreationEnabled:"true"===e.window.mm_config.EnableUserCreation,showConfirmModal:!1,isSendingEmails:!1,teamType:s?s.type:null},n}return m()(a,t),l()(a,[{key:"teamChange",value:function(){var e=y.a.getCurrent(),t=e?e.type:null;this.setState({teamType:t})}},{key:"componentDidMount",value:function(){E.a.addModalListener(I.TOGGLE_INVITE_MEMBER_MODAL,this.handleToggle),y.a.addChangeListener(this.teamChange)}},{key:"componentWillUnmount",value:function(){E.a.removeModalListener(I.TOGGLE_INVITE_MEMBER_MODAL,this.handleToggle),y.a.removeChangeListener(this.teamChange)}},{key:"handleToggle",value:function(e){this.setState({show:e})}},{key:"handleSubmit",value:function(){var e=this;if(this.state.emailEnabled){for(var t=this.state.inviteIds,a=t.length,n=[],r=this.state.emailErrors,s=this.state.firstNameErrors,o=this.state.lastNameErrors,i=!0,l=0;l<a;l++){var u=t[l],d={};d.email=f.a.findDOMNode(this.refs["email"+u]).value.trim(),d.email&&p.isEmail(d.email)?r[u]="":(r[u]=this.props.intl.formatMessage(D.emailError),i=!1),d.firstName=f.a.findDOMNode(this.refs["first_name"+u]).value.trim(),d.lastName=f.a.findDOMNode(this.refs["last_name"+u]).value.trim(),n.push(d)}if(this.setState({emailErrors:r,firstNameErrors:s,lastNameErrors:o}),i&&0!==n.length){var c={};c.invites=n,this.setState({isSendingEmails:!0}),v.a.inviteMembers(c,function(){e.handleHide(!1),e.setState({isSendingEmails:!1})},function(t){"api.team.invite_members.already.app_error"===t.id?(r[t.detailed_error]=t.message,e.setState({emailErrors:r})):e.setState({serverError:t.message}),e.setState({isSendingEmails:!1})})}}}},{key:"handleHide",value:function(e){if(e){for(var t=!1,a=0;a<this.state.inviteIds.length;a++){var n=this.state.inviteIds[a];if(""!==f.a.findDOMNode(this.refs["email"+n]).value.trim()){t=!0;break}}if(t)return void this.setState({showConfirmModal:!0})}this.clearFields(),this.setState({show:!1,showConfirmModal:!1})}},{key:"addInviteFields",value:function(){var e=this.state.idCount+1,t=this.state.inviteIds;t.push(e),this.setState({inviteIds:t,idCount:e})}},{key:"clearFields",value:function(){for(var e=this.state.inviteIds,t=0;t<e.length;t++){var a=e[t];f.a.findDOMNode(this.refs["email"+a]).value="",f.a.findDOMNode(this.refs["first_name"+a]).value="",f.a.findDOMNode(this.refs["last_name"+a]).value=""}this.setState({inviteIds:[0],idCount:0,emailErrors:{},firstNameErrors:{},lastNameErrors:{}})}},{key:"removeInviteFields",value:function(e){var t=this.state.idCount,a=this.state.inviteIds,n=a.indexOf(e);n>-1&&a.splice(n,1),a.length||a.push(++t),this.setState({inviteIds:a,idCount:t})}},{key:"showGetTeamInviteLinkModal",value:function(){this.handleHide(!1),_.showGetTeamInviteLinkModal()}},{key:"render",value:function(){var e=this,t=M.a.getCurrentUser(),a=this.props.intl.formatMessage;if(null!=t&&null!=this.state.teamType){for(var n=[],r=this.state.inviteIds,s=0;s<r.length;s++){var o=r[s],i=null;this.state.emailErrors[o]&&(i=P.a.createElement("label",{className:"control-label"},this.state.emailErrors[o]));var l=null;this.state.firstNameErrors[o]&&(l=P.a.createElement("label",{className:"control-label"},this.state.firstNameErrors[o]));var u=null;this.state.lastNameErrors[o]&&(u=P.a.createElement("label",{className:"control-label"},this.state.lastNameErrors[o]));var d=null;o&&(d=P.a.createElement("div",null,P.a.createElement("button",{type:"button",className:"btn btn-link remove__member",onClick:this.removeInviteFields.bind(this,o)},P.a.createElement("span",{className:"fa fa-trash"}))));var c="form-group invite";i&&(c+=" has-error");var m=null,h="form-group";l&&(h+=" has-error");var f="form-group";u&&(f+=" has-error"),m=P.a.createElement("div",{className:"row row--invite"},P.a.createElement("div",{className:"col-sm-6"},P.a.createElement("div",{className:h},P.a.createElement("input",{type:"text",className:"form-control",ref:"first_name"+o,placeholder:a(D.firstname),maxLength:"64",disabled:!this.state.emailEnabled||!this.state.userCreationEnabled,spellCheck:"false"}),l)),P.a.createElement("div",{className:"col-sm-6"},P.a.createElement("div",{className:f},P.a.createElement("input",{type:"text",className:"form-control",ref:"last_name"+o,placeholder:a(D.lastname),maxLength:"64",disabled:!this.state.emailEnabled||!this.state.userCreationEnabled,spellCheck:"false"}),u))),n[o]=P.a.createElement("div",{key:"key"+o},d,P.a.createElement("div",{className:c},P.a.createElement("input",{onKeyUp:this.displayNameKeyUp,type:"text",ref:"email"+o,className:"form-control",placeholder:"email@domain.com",maxLength:"64",disabled:!this.state.emailEnabled||!this.state.userCreationEnabled,spellCheck:"false"}),i),m)}var p=null;this.state.serverError&&(p=P.a.createElement("div",{className:"form-group has-error"},P.a.createElement("label",{className:"control-label"},this.state.serverError)));var v=null,_=null,E="";if(b.a.getByName(g.a.DEFAULT_CHANNEL)&&(E=b.a.getByName(g.a.DEFAULT_CHANNEL).display_name),this.state.emailEnabled&&this.state.userCreationEnabled){v=P.a.createElement("div",null,p,P.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.addInviteFields},P.a.createElement(T.FormattedMessage,{id:"invite_member.addAnother",defaultMessage:"Add another"})),P.a.createElement("br",null),P.a.createElement("br",null),P.a.createElement("span",null,P.a.createElement(T.FormattedHTMLMessage,{id:"invite_member.autoJoin",defaultMessage:"People invited automatically join the <strong>{channel}</strong> channel.",values:{channel:E}})));var y=P.a.createElement(T.FormattedMessage,{id:"invite_member.send",defaultMessage:"Send Invitation"});this.state.isSendingEmails?y=P.a.createElement("span",null,P.a.createElement("i",{className:"fa fa-spinner fa-spin"}),P.a.createElement(T.FormattedMessage,{id:"invite_member.sending",defaultMessage:" Sending"})):this.state.inviteIds.length>1&&(y=P.a.createElement(T.FormattedMessage,{id:"invite_member.send2",defaultMessage:"Send Invitations"})),_=P.a.createElement("button",{onClick:this.handleSubmit,type:"button",className:"btn btn-primary",disabled:this.state.isSendingEmails},y)}else if(this.state.userCreationEnabled){var C=null;if(t&&"O"===this.state.teamType){var w=P.a.createElement("a",{href:"#",onClick:this.showGetTeamInviteLinkModal},P.a.createElement(T.FormattedMessage,{id:"invite_member.inviteLink",defaultMessage:"Team Invite Link"}));C=P.a.createElement("p",null,P.a.createElement(T.FormattedMessage,{id:"invite_member.teamInviteLink",defaultMessage:"You can also invite people using the {link}.",values:{link:w}}))}v=P.a.createElement("div",null,P.a.createElement("p",null,P.a.createElement(T.FormattedMessage,{id:"invite_member.content",defaultMessage:"Email is currently disabled for your team, and email invitations cannot be sent. Contact your System Administrator to enable email and email invitations."})),C)}else v=P.a.createElement("div",null,P.a.createElement("p",null,P.a.createElement(T.FormattedMessage,{id:"invite_member.disabled",defaultMessage:"User creation has been disabled for your team. Please ask your Team Administrator for details."})));return P.a.createElement("div",null,P.a.createElement(k.Modal,{dialogClassName:"modal-invite-member",show:this.state.show,onHide:this.handleHide.bind(this,!0),enforceFocus:!this.state.showConfirmModal,backdrop:!this.state.isSendingEmails||"static"},P.a.createElement(k.Modal.Header,{closeButton:!this.state.isSendingEmails},P.a.createElement(k.Modal.Title,null,P.a.createElement(T.FormattedMessage,{id:"invite_member.newMember",defaultMessage:"Invite New Member"}))),P.a.createElement(k.Modal.Body,{ref:"modalBody"},P.a.createElement("form",{role:"form"},n),v),P.a.createElement(k.Modal.Footer,null,P.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide.bind(this,!0),disabled:this.state.isSendingEmails},P.a.createElement(T.FormattedMessage,{id:"invite_member.cancel",defaultMessage:"Cancel"})),_)),P.a.createElement(S.a,{title:a(D.modalTitle),message:a(D.modalMessage),confirmButton:a(D.modalButton),show:this.state.showConfirmModal,onConfirm:this.handleHide.bind(this,!1),onCancel:function(){return e.setState({showConfirmModal:!1})}}))}return null}}]),a}(P.a.Component);L.propTypes={intl:T.intlShape.isRequired},t.a=a.i(T.injectIntl)(L)}).call(t,a(17))},1863:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(11),f=a(54),p=a(1714),g=a(18),v=a(12),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(30),M=E&&E.__esModule?function(){return E["default"]}:function(){return E};a.d(M,"a",M);var b=a(1),y=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(y,"a",y);var S=h.a.ActionTypes,T=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleToggle=a.handleToggle.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleHide=a.handleHide.bind(a),a.state={show:!1},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){p.a.addModalListener(S.TOGGLE_LEAVE_TEAM_MODAL,this.handleToggle)}},{key:"componentWillUnmount",value:function(){p.a.removeModalListener(S.TOGGLE_LEAVE_TEAM_MODAL,this.handleToggle)}},{key:"handleToggle",value:function(e){this.setState({show:e})}},{key:"handleSubmit",value:function(){f.emitLeaveTeam(),this.setState({show:!1})}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=g.a.getCurrentUser();return null!=e?y.a.createElement(E.Modal,{className:"modal-confirm",show:this.state.show,onHide:this.handleHide},y.a.createElement(E.Modal.Header,{closeButton:!1},y.a.createElement(E.Modal.Title,null,y.a.createElement(v.FormattedMessage,{id:"leave_team_modal.title",defaultMessage:"Leave the team?"}))),y.a.createElement(E.Modal.Body,null,y.a.createElement(v.FormattedMessage,{id:"leave_team_modal.desc",defaultMessage:"You will be removed from all public channels and private groups.  If the team is private you will not be able to rejoin the team.  Are you sure?"})),y.a.createElement(E.Modal.Footer,null,y.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleHide},y.a.createElement(v.FormattedMessage,{id:"leave_team_modal.no",defaultMessage:"No"})),y.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.handleSubmit},y.a.createElement(v.FormattedMessage,{id:"leave_team_modal.yes",defaultMessage:"Yes"})))):null}}]),t}(y.a.Component);T.propTypes={intl:v.intlShape.isRequired},t.a=a.i(v.injectIntl)(T)},1865:function(e,t,a){"use strict";(function(e){function n(){return{channels:_.a.getMoreAll(),serverError:null}}var r=a(6),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(s,"a",s);var o=a(3),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(i,"a",i);var l=a(4),u=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(u,"a",u);var d=a(7),c=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(c,"a",c);var m=a(2),h=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(h,"a",h);var f=a(0),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(p,"a",p);var g=a(152),v=a(1650),_=a(36),E=a(18),M=a(37),b=a(13),y=a(11),S=a(26),T=a(54),C=a(12),k=C&&C.__esModule?function(){return C["default"]}:function(){return C};a.d(k,"a",k);var w=a(53),N=a(1),P=N&&N.__esModule?function(){return N["default"]}:function(){return N};a.d(P,"a",P);var I=a(23),D=I&&I.__esModule?function(){return I["default"]}:function(){return I};a.d(D,"a",D);var L=a(320),F=L&&L.__esModule?function(){return L["default"]}:function(){return L};a.d(F,"a",F);var A=a(113),O=A&&A.__esModule?function(){return A["default"]}:function(){return A};a.d(O,"a",O);var H=function(t){function a(e){i()(this,a);var t=c()(this,(a.__proto__||s()(a)).call(this,e));t.onListenerChange=t.onListenerChange.bind(t),t.handleJoin=t.handleJoin.bind(t),t.handleNewChannel=t.handleNewChannel.bind(t),t.createChannelRow=t.createChannelRow.bind(t),t.shouldComponentUpdate=F.a.shouldComponentUpdate.bind(t);var r=n();return r.channelType="",r.joiningChannel="",r.showNewChannelModal=!1,t.state=r,t}return h()(a,t),u()(a,[{key:"componentDidMount",value:function(){_.a.addMoreChangeListener(this.onListenerChange),p()(D.a.findDOMNode(this.refs.modal)).on("shown.bs.modal",function(){S.getMoreChannels(!0)});var e=this;p()(D.a.findDOMNode(this.refs.modal)).on("show.bs.modal",function(t){var a=t.relatedTarget;e.setState({channelType:p()(a).attr("data-channeltype")})})}},{key:"componentWillUnmount",value:function(){_.a.removeMoreChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){var e=n();b.areObjectsEqual(e.channels,this.state.channels)||this.setState(e)}},{key:"handleJoin",value:function(e){var t=this;this.setState({joiningChannel:e.id}),T.emitJoinChannelEvent(e,function(){p()(D.a.findDOMNode(t.refs.modal)).modal("hide"),w.a.push(M.a.getCurrentTeamRelativeUrl()+"/channels/"+e.name),t.setState({joiningChannel:""})},function(e){t.setState({joiningChannel:"",serverError:e.message})})}},{key:"handleNewChannel",value:function(){p()(D.a.findDOMNode(this.refs.modal)).modal("hide"),this.setState({showNewChannelModal:!0})}},{key:"createChannelRow",value:function(e){var t=void 0;return t=this.state.joiningChannel===e.id?P.a.createElement("img",{className:"join-channel-loading-gif",src:O.a}):P.a.createElement("button",{onClick:this.handleJoin.bind(self,e),className:"btn btn-primary"},P.a.createElement(C.FormattedMessage,{id:"more_channels.join",defaultMessage:"Join"})),P.a.createElement("div",{className:"more-modal__row",key:e.id},P.a.createElement("div",{className:"more-modal__details"},P.a.createElement("p",{className:"more-modal__name"},e.display_name),P.a.createElement("p",{className:"more-modal__description"},e.purpose)),P.a.createElement("div",{className:"more-modal__actions"},t))}},{key:"render",value:function(){var t=this,a=1e3;b.windowHeight()<=1200&&(a=b.windowHeight()-300);var n;this.state.serverError&&(n=P.a.createElement("div",{className:"form-group has-error"},P.a.createElement("label",{className:"control-label"},this.state.serverError)));var r=P.a.createElement("button",{type:"button",className:"btn btn-primary channel-create-btn",onClick:this.handleNewChannel},P.a.createElement(C.FormattedMessage,{id:"more_channels.create",defaultMessage:"Create New Channel"})),s=P.a.createElement("p",{className:"secondary-message"},P.a.createElement(C.FormattedMessage,{id:"more_channels.createClick",defaultMessage:"Click 'Create New Channel' to make a new one"})),o=M.a.isTeamAdminForCurrentTeam()||E.a.isSystemAdminForCurrentUser(),i=E.a.isSystemAdminForCurrentUser();"true"===e.window.mm_license.IsLicensed&&(e.window.mm_config.RestrictPublicChannelManagement!==y.a.PERMISSIONS_SYSTEM_ADMIN||i?e.window.mm_config.RestrictPublicChannelManagement!==y.a.PERMISSIONS_TEAM_ADMIN||o||(r=null,s=null):(r=null,s=null));var l;if(null!=this.state.channels){var u=this.state.channels;l=u.loading?P.a.createElement(g.a,null):u.length?P.a.createElement("div",{className:"more-modal__list"},u.map(this.createChannelRow)):P.a.createElement("div",{className:"no-channel-message"},P.a.createElement("p",{className:"primary-message"},P.a.createElement(C.FormattedMessage,{id:"more_channels.noMore",defaultMessage:"No more channels to join"})),s)}return P.a.createElement("div",{className:"modal fade more-channel__modal",id:"more_channels",ref:"modal",tabIndex:"-1",role:"dialog","aria-hidden":"true"},P.a.createElement("div",{className:"modal-dialog"},P.a.createElement("div",{className:"modal-content"},P.a.createElement("div",{className:"modal-header"},P.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},P.a.createElement("span",{"aria-hidden":"true"},"×"),P.a.createElement("span",{className:"sr-only"},P.a.createElement(C.FormattedMessage,{id:"more_channels.close",defaultMessage:"Close"}))),P.a.createElement("h4",{className:"modal-title"},P.a.createElement(C.FormattedMessage,{id:"more_channels.title",defaultMessage:"More Channels"})),r,P.a.createElement(v.a,{show:this.state.showNewChannelModal,channelType:this.state.channelType,onModalDismissed:function(){return t.setState({showNewChannelModal:!1})}})),P.a.createElement("div",{className:"modal-body",style:{maxHeight:a}},l,n),P.a.createElement("div",{className:"modal-footer"},P.a.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},P.a.createElement(C.FormattedMessage,{id:"more_channels.close",defaultMessage:"Close"}))))))}}]),a}(P.a.Component);t.a=H}).call(t,a(17))},1867:function(e,t,a){"use strict";(function(e){var n=a(329),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(6),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(3),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(4),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(7),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(2),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(0),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(324),_=a(580),E=a(582),M=a(1869),b=a(576),y=a(231),S=a(577),T=a(578),C=a(579),k=a(585),w=a(227),N=a(1638),P=a(18),I=a(36),D=a(37),L=a(1848),F=a(19),A=a(26),O=a(13),H=a(11),R=a(25),x=R&&R.__esModule?function(){return R["default"]}:function(){return R};a.d(x,"a",x);var U=a(12),G=U&&U.__esModule?function(){return U["default"]}:function(){return U};a.d(G,"a",G);var z=a(30),V=z&&z.__esModule?function(){return z["default"]}:function(){return z};a.d(V,"a",V);var W=a(53),Y=a(1),q=Y&&Y.__esModule?function(){return Y["default"]}:function(){return Y};a.d(q,"a",q);var B=H.a.ActionTypes,j=function(t){function a(e){l()(this,a);var t=m()(this,(a.__proto__||o()(a)).call(this,e));t.onChange=t.onChange.bind(t),t.handleLeave=t.handleLeave.bind(t),t.showSearch=t.showSearch.bind(t),t.showEditChannelHeaderModal=t.showEditChannelHeaderModal.bind(t),t.showRenameChannelModal=t.showRenameChannelModal.bind(t),t.hideRenameChannelModal=t.hideRenameChannelModal.bind(t),t.isStateValid=t.isStateValid.bind(t),t.createCollapseButtons=t.createCollapseButtons.bind(t),t.createDropdown=t.createDropdown.bind(t),t.showChannelSwitchModal=t.showChannelSwitchModal.bind(t),t.hideChannelSwitchModal=t.hideChannelSwitchModal.bind(t);var n=t.getStateFromStores();return n.showEditChannelPurposeModal=!1,n.showEditChannelHeaderModal=!1,n.showMembersModal=!1,n.showRenameChannelModal=!1,n.showChannelSwitchModal=!1,t.state=n,t}return f()(a,t),d()(a,[{key:"getStateFromStores",value:function(){return{channel:I.a.getCurrent(),member:I.a.getCurrentMember(),users:I.a.getCurrentExtraInfo().members,userCount:I.a.getCurrentExtraInfo().member_count,currentUser:P.a.getCurrentUser()}}},{key:"isStateValid",value:function(){return this.state.channel&&this.state.member&&this.state.users&&this.state.currentUser}},{key:"componentDidMount",value:function(){I.a.addChangeListener(this.onChange),I.a.addExtraInfoChangeListener(this.onChange),P.a.addStatusesChangeListener(this.onChange),g()(".inner-wrap").click(this.hideSidebars),document.addEventListener("keydown",this.showChannelSwitchModal)}},{key:"componentWillUnmount",value:function(){I.a.removeChangeListener(this.onChange),I.a.removeExtraInfoChangeListener(this.onChange),P.a.removeStatusesChangeListener(this.onChange),document.removeEventListener("keydown",this.showChannelSwitchModal)}},{key:"handleSubmit",value:function(e){e.preventDefault()}},{key:"handleLeave",value:function(){F.a.leaveChannel(this.state.channel.id,function(){A.getChannels(!0),W.a.push(D.a.getCurrentTeamUrl()+"/channels/town-square")},function(e){A.dispatchError(e,"handleLeave")})}},{key:"hideSidebars",value:function(e){var t=g()(window).outerWidth();t<=768&&(x.a.handleServerAction({type:B.RECEIVED_SEARCH,results:null}),x.a.handleServerAction({type:B.RECEIVED_POST_SELECTED,postId:null}),"navbar-toggle"!==e.target.className&&"icon-bar"!==e.target.className&&(g()(".app__body .inner-wrap").removeClass("move--right move--left move--left-small"),g()(".app__body .sidebar--left").removeClass("move--right"),g()(".app__body .sidebar--right").removeClass("move--left"),g()(".app__body .sidebar--menu").removeClass("move--left")))}},{key:"toggleLeftSidebar",value:function(){g()(".app__body .inner-wrap").toggleClass("move--right"),g()(".app__body .sidebar--left").toggleClass("move--right")}},{key:"toggleRightSidebar",value:function(){g()(".app__body .inner-wrap").toggleClass("move--left-small"),g()(".app__body .sidebar--menu").toggleClass("move--left")}},{key:"showSearch",value:function(){x.a.handleServerAction({type:B.SHOW_SEARCH})}},{key:"onChange",value:function(){this.setState(this.getStateFromStores())}},{key:"showEditChannelHeaderModal",value:function(){this.refs.headerOverlay&&this.refs.headerOverlay.hide(),this.setState({showEditChannelHeaderModal:!0})}},{key:"showRenameChannelModal",value:function(e){e.preventDefault(),this.setState({showRenameChannelModal:!0})}},{key:"hideRenameChannelModal",value:function(){this.setState({showRenameChannelModal:!1})}},{key:"showChannelSwitchModal",value:function(e){O.cmdOrCtrlPressed(e)&&e.keyCode===H.a.KeyCodes.K&&(e.preventDefault(),
this.setState({showChannelSwitchModal:!this.state.showChannelSwitchModal}))}},{key:"hideChannelSwitchModal",value:function(){this.setState({showChannelSwitchModal:!1})}},{key:"showManagementOptions",value:function(t,a,n){if("true"!==e.window.mm_license.IsLicensed)return!0;if(t.type===H.a.OPEN_CHANNEL){if(e.window.mm_config.RestrictPublicChannelManagement===H.a.PERMISSIONS_SYSTEM_ADMIN&&!n)return!1;if(e.window.mm_config.RestrictPublicChannelManagement===H.a.PERMISSIONS_TEAM_ADMIN&&!a)return!1}else if(t.type===H.a.PRIVATE_CHANNEL){if(e.window.mm_config.RestrictPrivateChannelManagement===H.a.PERMISSIONS_SYSTEM_ADMIN&&!n)return!1;if(e.window.mm_config.RestrictPrivateChannelManagement===H.a.PERMISSIONS_TEAM_ADMIN&&!a)return!1}return!0}},{key:"createDropdown",value:function(e,t,a,n,r,s){var o=this;if(e){var i=q.a.createElement(U.FormattedMessage,{id:"channel_header.channel",defaultMessage:"Channel"});e.type===H.a.PRIVATE_CHANNEL&&(i=q.a.createElement(U.FormattedMessage,{id:"channel_header.group",defaultMessage:"Group"}));var l=void 0,u=void 0,d=void 0,c=void 0,m=void 0,h=void 0,f=void 0,p=void 0,g=void 0;if(r)c=q.a.createElement("li",{role:"presentation"},q.a.createElement("a",{role:"menuitem",href:"#",onClick:this.showEditChannelHeaderModal},q.a.createElement(U.FormattedMessage,{id:"channel_header.channelHeader",defaultMessage:"Set Channel Header..."})));else{l=q.a.createElement("li",{role:"presentation"},q.a.createElement(w.a,{role:"menuitem",dialogType:b.a,dialogProps:{channel:e}},q.a.createElement(U.FormattedMessage,{id:"navbar.viewInfo",defaultMessage:"View Info"}))),I.a.isDefault(e)||(u=q.a.createElement("li",{role:"presentation"},q.a.createElement(w.a,{role:"menuitem",dialogType:y.a,dialogProps:{channel:e,currentUser:this.state.currentUser}},q.a.createElement(U.FormattedMessage,{id:"navbar.addMembers",defaultMessage:"Add Members"}))),a&&(d=q.a.createElement("li",{role:"presentation"},q.a.createElement("a",{role:"menuitem",href:"#",onClick:function(){return o.setState({showMembersModal:!0})}},q.a.createElement(U.FormattedMessage,{id:"navbar.manageMembers",defaultMessage:"Manage Members"}))))),h=q.a.createElement("li",{role:"presentation"},q.a.createElement(w.a,{role:"menuitem",dialogType:T.a,dialogProps:{channel:e,channelMember:this.state.member,currentUser:this.state.currentUser}},q.a.createElement(U.FormattedMessage,{id:"navbar.preferences",defaultMessage:"Notification Preferences"}))),this.showManagementOptions(e,a,n)&&(c=q.a.createElement("li",{role:"presentation"},q.a.createElement("a",{role:"menuitem",href:"#",onClick:this.showEditChannelHeaderModal},q.a.createElement(U.FormattedMessage,{id:"channel_header.setHeader",defaultMessage:"Set {term} Header...",values:{term:i}}))),m=q.a.createElement("li",{role:"presentation"},q.a.createElement("a",{role:"menuitem",href:"#",onClick:function(){return o.setState({showEditChannelPurposeModal:!0})}},q.a.createElement(U.FormattedMessage,{id:"channel_header.setPurpose",defaultMessage:"Set {term} Purpose...",values:{term:i}}))),f=q.a.createElement("li",{role:"presentation"},q.a.createElement("a",{role:"menuitem",href:"#",onClick:this.showRenameChannelModal},q.a.createElement(U.FormattedMessage,{id:"channel_header.rename",defaultMessage:"Rename {term}...",values:{term:i}})))),(this.showManagementOptions(e,a,n)||1===this.state.userCount)&&(I.a.isDefault(e)||(p=q.a.createElement("li",{role:"presentation"},q.a.createElement(w.a,{role:"menuitem",dialogType:C.a,dialogProps:{channel:e}},q.a.createElement(U.FormattedMessage,{id:"channel_header.delete",defaultMessage:"Delete {term}...",values:{term:i}})))));var v=e.type!==H.a.PRIVATE_CHANNEL||this.state.userCount>1;!I.a.isDefault(e)&&v&&(g=q.a.createElement("li",{role:"presentation"},q.a.createElement("a",{role:"menuitem",href:"#",onClick:this.handleLeave},q.a.createElement(U.FormattedMessage,{id:"channel_header.leave",defaultMessage:"Leave {term}",values:{term:i}}))))}return q.a.createElement("div",{className:"navbar-brand"},q.a.createElement("div",{className:"dropdown"},q.a.createElement(z.OverlayTrigger,{ref:"headerOverlay",trigger:"click",placement:"bottom",overlay:s,className:"description",rootClose:!0},q.a.createElement("div",{className:"description info-popover"})),q.a.createElement("a",{href:"#",className:"dropdown-toggle theme",type:"button","data-toggle":"dropdown","aria-expanded":"true"},q.a.createElement("span",{className:"heading"},q.a.createElement(N.a,{status:this.getTeammateStatus()}),t," "),q.a.createElement("span",{className:"fa fa-chevron-down header-dropdown__icon"})),q.a.createElement("ul",{className:"dropdown-menu",role:"menu"},l,u,d,c,m,h,f,p,g)))}return q.a.createElement("div",{className:"navbar-brand"},q.a.createElement(W.b,{to:D.a.getCurrentTeamUrl()+"/channels/town-square",className:"heading"},t))}},{key:"createCollapseButtons",value:function(e){var t=[];return null==e?t.push(q.a.createElement("button",{key:"navbar-toggle-collapse",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#navbar-collapse-1"},q.a.createElement("span",{className:"sr-only"},q.a.createElement(U.FormattedMessage,{id:"navbar.toggle1",defaultMessage:"Toggle sidebar"})),q.a.createElement("span",{className:"icon-bar"}),q.a.createElement("span",{className:"icon-bar"}),q.a.createElement("span",{className:"icon-bar"}))):(t.push(q.a.createElement("button",{key:"navbar-toggle-sidebar",type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:this.toggleLeftSidebar},q.a.createElement("span",{className:"sr-only"},q.a.createElement(U.FormattedMessage,{id:"navbar.toggle2",defaultMessage:"Toggle sidebar"})),q.a.createElement("span",{className:"icon-bar"}),q.a.createElement("span",{className:"icon-bar"}),q.a.createElement("span",{className:"icon-bar"}),q.a.createElement(M.a,null))),t.push(q.a.createElement("button",{key:"navbar-toggle-menu",type:"button",className:"navbar-toggle menu-toggle pull-right","data-toggle":"collapse","data-target":"#sidebar-nav",onClick:this.toggleRightSidebar},q.a.createElement("span",{dangerouslySetInnerHTML:{__html:H.a.MENU_ICON}})))),t}},{key:"getTeammateStatus",value:function(){var e=this,t=this.state.channel;if("D"===t.type){var a=function(){var t=e.state.currentUser.id,a=e.state.users.find(function(e){return e.id!==t});if(a)return{v:P.a.getStatus(a.id)}}();if("object"===("undefined"==typeof a?"undefined":r()(a)))return a.v}return null}},{key:"render",value:function(){var e=this;if(!this.isStateValid())return null;var t,a=this.state.currentUser.id,n=this.state.channel,r=this.props.teamDisplayName,s=!1,o=!1,i=!1,l=null,u=null,d=null,c=null,m=null;if(n){if(t=q.a.createElement(z.Popover,{bsStyle:"info",placement:"bottom",id:"header-popover"},q.a.createElement(E.a,{message:n.header,options:{singleline:!0,mentionHighlight:!1}})),s=D.a.isTeamAdminForCurrentTeam()||P.a.isSystemAdminForCurrentUser(),o=P.a.isSystemAdminForCurrentUser(),"O"===n.type)r=n.display_name;else if("P"===n.type)r=n.display_name;else if("D"===n.type&&(i=!0,this.state.users.length>1)){var h=void 0;h=this.state.users[0].id===a?P.a.getProfile(this.state.users[1].id):P.a.getProfile(this.state.users[0].id),null!=h&&(r=h.username)}if(0===n.header.length){var f=q.a.createElement("a",{href:"#",onClick:this.showEditChannelHeaderModal},q.a.createElement(U.FormattedMessage,{id:"navbar.click",defaultMessage:"Click here"}));t=q.a.createElement(z.Popover,{bsStyle:"info",placement:"bottom",id:"header-popover"},q.a.createElement("div",null,q.a.createElement(U.FormattedMessage,{id:"navbar.noHeader",defaultMessage:"No channel header yet.{newline}{link} to add one.",values:{newline:q.a.createElement("br",null),link:f}})))}l=q.a.createElement(v.a,{show:this.state.showEditChannelHeaderModal,onHide:function(){return e.setState({showEditChannelHeaderModal:!1})},channel:n}),u=q.a.createElement(_.a,{show:this.state.showEditChannelPurposeModal,onModalDismissed:function(){return e.setState({showEditChannelPurposeModal:!1})},channel:n}),d=q.a.createElement(k.a,{show:this.state.showRenameChannelModal,onHide:this.hideRenameChannelModal,channel:n}),c=q.a.createElement(S.a,{show:this.state.showMembersModal,onModalDismissed:function(){return e.setState({showMembersModal:!1})},channel:n}),m=q.a.createElement(L.a,{show:this.state.showChannelSwitchModal,onHide:this.hideChannelSwitchModal})}var p=this.createCollapseButtons(a),g=q.a.createElement("button",{type:"button",className:"navbar-toggle pull-right",onClick:this.showSearch},q.a.createElement("span",{className:"fa fa-search icon-search icon--white"})),M=this.createDropdown(n,r,s,o,i,t);return q.a.createElement("div",null,q.a.createElement("nav",{className:"navbar navbar-default navbar-fixed-top",role:"navigation"},q.a.createElement("div",{className:"container-fluid theme"},q.a.createElement("div",{className:"navbar-header"},p,g,M))),l,u,d,c,m)}}]),a}(q.a.Component);t.a=j,j.defaultProps={teamDisplayName:""},j.propTypes={teamDisplayName:q.a.PropTypes.string}}).call(t,a(17))},1869:function(e,t,a){"use strict";function n(){var e=0,t=p.a.getAll(),a=p.a.getAllMembers();return t.forEach(function(t){var n=a[t.id];null!=n&&("D"===t.type?e+=t.total_msg_count-n.msg_count:n.mention_count>0?e+=n.mention_count:"mention"!==n.notify_props.mark_unread&&t.total_msg_count-n.msg_count>0&&(e+=1))}),{count:e}}var r=a(6),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(s,"a",s);var o=a(3),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(i,"a",i);var l=a(4),u=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(u,"a",u);var d=a(7),c=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(c,"a",c);var m=a(2),h=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(h,"a",h);var f=a(13),p=a(36),g=a(1),v=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(v,"a",v);var _=function(e){function t(e){i()(this,t);var a=c()(this,(t.__proto__||s()(t)).call(this,e));return a.onListenerChange=a.onListenerChange.bind(a),a.state=n(),a.mounted=!1,a}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.mounted=!0,p.a.addChangeListener(this.onListenerChange)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,p.a.removeChangeListener(this.onListenerChange)}},{key:"onListenerChange",value:function(){if(this.mounted){var e=n();f.areObjectsEqual(e,this.state)||this.setState(e)}}},{key:"render",value:function(){return this.state.count?v.a.createElement("span",{className:"badge badge-notify"},this.state.count):null}}]),t}(v.a.Component);t.a=_},1873:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(23),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(36),_=a(37),E=a(18),M=a(85),b=a(12),y=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(y,"a",y);var S=a(53),T=a(1),C=T&&T.__esModule?function(){return T["default"]}:function(){return T};a.d(C,"a",C);var k=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleShow=a.handleShow.bind(a),a.handleClose=a.handleClose.bind(a),a.state={channelName:"",remover:""},a}return m()(t,e),l()(t,[{key:"handleShow",value:function(){var e={};M.a.getItem("channel-removed-state")&&(e=M.a.getItem("channel-removed-state"),M.a.removeItem("channel-removed-state"));var t=v.a.getByName("town-square");setTimeout(function(){S.a.push(_.a.getCurrentTeamRelativeUrl()+"/channels/"+t.name)},1),this.setState(e)}},{key:"handleClose",value:function(){this.setState({channelName:"",remover:""})}},{key:"componentDidMount",value:function(){f()(g.a.findDOMNode(this)).on("show.bs.modal",this.handleShow),f()(g.a.findDOMNode(this)).on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){f()(g.a.findDOMNode(this)).off("show.bs.modal",this.handleShow),f()(g.a.findDOMNode(this)).off("hidden.bs.modal",this.handleClose)}},{key:"render",value:function(){var e=E.a.getCurrentUser(),t=C.a.createElement(b.FormattedMessage,{id:"removed_channel.channelName",defaultMessage:"the channel"});this.state.channelName&&(t=this.state.channelName);var a=C.a.createElement(b.FormattedMessage,{id:"removed_channel.someone",defaultMessage:"Someone"});return this.state.remover&&(a=this.state.remover),null!=e?C.a.createElement("div",{className:"modal fade",ref:"modal",id:"removed_from_channel",tabIndex:"-1",role:"dialog","aria-hidden":"true"},C.a.createElement("div",{className:"modal-dialog"},C.a.createElement("div",{className:"modal-content"},C.a.createElement("div",{className:"modal-header"},C.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},C.a.createElement("span",{"aria-hidden":"true"},"×")),C.a.createElement("h4",{className:"modal-title"},C.a.createElement(b.FormattedMessage,{id:"removed_channel.from",defaultMessage:"Removed from "}),C.a.createElement("span",{className:"name"},t))),C.a.createElement("div",{className:"modal-body"},C.a.createElement("p",null,C.a.createElement(b.FormattedMessage,{id:"removed_channel.remover",defaultMessage:"{remover} removed you from {channel}",values:{remover:a,channel:t}}))),C.a.createElement("div",{className:"modal-footer"},C.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal"},C.a.createElement(b.FormattedMessage,{id:"removed_channel.okay",defaultMessage:"Okay"})))))):C.a.createElement("div",null)}}]),t}(C.a.Component);t.a=k},1874:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(321),f=a(570),p=a(583),g=a(569),v=a(228),_=a(37),E=a(18),M=a(54),b=a(174),y=a(13),S=a(154),T=a(11),C=a(30),k=C&&C.__esModule?function(){return C["default"]}:function(){return C};a.d(k,"a",k);var w=a(12),N=w&&w.__esModule?function(){return w["default"]}:function(){return w};a.d(N,"a",N);var P=a(113),I=P&&P.__esModule?function(){return P["default"]}:function(){return P};a.d(I,"a",I);var D=a(1),L=D&&D.__esModule?function(){return D["default"]}:function(){return D};a.d(L,"a",L);var F=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handlePermalink=a.handlePermalink.bind(a),a.removePost=a.removePost.bind(a),a.flagPost=a.flagPost.bind(a),a.unflagPost=a.unflagPost.bind(a),a.state={},a}return m()(t,e),l()(t,[{key:"handlePermalink",value:function(e){e.preventDefault(),M.showGetPostLinkModal(this.props.post)}},{key:"removePost",value:function(){M.emitRemovePost(this.props.post)}},{key:"createRemovePostButton",value:function(){return L.a.createElement("a",{href:"#",className:"post__remove theme",type:"button",onClick:this.removePost},"×")}},{key:"shouldComponentUpdate",value:function(e){return e.status!==this.props.status||(e.compactDisplay!==this.props.compactDisplay||(e.useMilitaryTime!==this.props.useMilitaryTime||(e.isFlagged!==this.props.isFlagged||(!y.areObjectsEqual(e.post,this.props.post)||!y.areObjectsEqual(e.currentUser,this.props.currentUser)))))}},{key:"flagPost",value:function(e){e.preventDefault(),a.i(b.flagPost)(this.props.post.id)}},{key:"unflagPost",value:function(e){e.preventDefault(),a.i(b.unflagPost)(this.props.post.id)}},{key:"createDropdown",value:function(){var e=this.props.post;if(e.state===T.a.POST_FAILED||e.state===T.a.POST_LOADING||e.state===T.a.POST_DELETED)return"";var t=this.props.currentUser.id===e.user_id,a=_.a.isTeamAdminForCurrentTeam()||E.a.isSystemAdminForCurrentUser(),n=e.type&&e.type.startsWith(T.a.SYSTEM_MESSAGE_PREFIX),r=[];return y.isMobile()&&(this.props.isFlagged?r.push(L.a.createElement("li",{key:"mobileFlag",role:"presentation"},L.a.createElement("a",{href:"#",onClick:this.unflagPost},L.a.createElement(w.FormattedMessage,{id:"rhs_root.mobile.unflag",defaultMessage:"Unflag"})))):r.push(L.a.createElement("li",{key:"mobileFlag",role:"presentation"},L.a.createElement("a",{href:"#",onClick:this.flagPost},L.a.createElement(w.FormattedMessage,{id:"rhs_root.mobile.flag",defaultMessage:"Flag"}))))),r.push(L.a.createElement("li",{key:"rhs-root-permalink",role:"presentation"},L.a.createElement("a",{href:"#",onClick:this.handlePermalink},L.a.createElement(w.FormattedMessage,{id:"rhs_comment.permalink",defaultMessage:"Permalink"})))),t&&!n&&r.push(L.a.createElement("li",{role:"presentation",key:"edit-button"},L.a.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#reply_textbox","data-title":y.localizeMessage("rhs_comment.comment","Comment"),"data-message":e.message,"data-postid":e.id,"data-channelid":e.channel_id},L.a.createElement(w.FormattedMessage,{id:"rhs_comment.edit",defaultMessage:"Edit"})))),(t||a)&&r.push(L.a.createElement("li",{role:"presentation",key:"delete-button"},L.a.createElement("a",{href:"#",role:"menuitem",onClick:function(t){t.preventDefault(),M.showDeletePostModal(e,0)}},L.a.createElement(w.FormattedMessage,{id:"rhs_comment.del",defaultMessage:"Delete"})))),0===r.length?"":L.a.createElement("div",{className:"dropdown"},L.a.createElement("a",{href:"#",className:"post__dropdown dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),L.a.createElement("ul",{className:"dropdown-menu",role:"menu"},r))}},{key:"render",value:function(){var e=this.props.post,t=T.a.FLAG_ICON_SVG,a="";this.props.currentUser===e.user_id&&(a="current--user");var n=this.props.currentUser.update_at,r=void 0;e.props&&e.props.from_webhook&&(r=L.a.createElement("li",{className:"bot-indicator"},T.a.BOT_NAME));var s=void 0,o="",i=L.a.createElement(g.a,{post:e});e.state===T.a.POST_FAILED?(o+=" post-fail",s=L.a.createElement(p.a,{post:this.props.post})):e.state===T.a.POST_LOADING?(o+=" post-waiting",s=L.a.createElement("img",{className:"post-loading-gif pull-right",src:I.a})):this.props.post.state===T.a.POST_DELETED&&(i=L.a.createElement(w.FormattedMessage,{id:"post_body.deleted",defaultMessage:"(message deleted)"}));var l=L.a.createElement(v.a,{src:S.getProfilePicSrcForPost(e,n),status:this.props.status,width:"36",height:"36"}),u="",d=L.a.createElement("div",{className:"post__img"},l);this.props.compactDisplay&&(u="post--compact",d="");var c,m=this.createDropdown();e.filenames&&e.filenames.length>0&&(c=L.a.createElement(f.a,{filenames:e.filenames,channelId:e.channel_id,userId:e.user_id,compactDisplay:this.props.compactDisplay}));var _=void 0,E=void 0,M="",b=L.a.createElement(C.Tooltip,{id:"flagTooltip"},L.a.createElement(w.FormattedMessage,{id:"flag_post.flag",defaultMessage:"Flag for follow up"}));this.props.isFlagged?(M="visible",_=L.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:t}}),E=this.unflagPost,b=L.a.createElement(C.Tooltip,{id:"flagTooltip"},L.a.createElement(w.FormattedMessage,{id:"flag_post.unflag",defaultMessage:"Unflag"}))):(_=L.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:t}}),E=this.flagPost);var k=void 0;y.isPostEphemeral(e)||(k=L.a.createElement(C.OverlayTrigger,{key:"commentflagtooltipkey"+M,delayShow:T.a.OVERLAY_TIME_DELAY,placement:"top",overlay:b},L.a.createElement("a",{href:"#",className:"flag-icon__container "+M,onClick:E},_)));var N=void 0;return N=y.isPostEphemeral(e)?L.a.createElement("li",{className:"col col__remove"},this.createRemovePostButton()):L.a.createElement("li",{className:"col col__reply"},m),L.a.createElement("div",{className:"post post--thread "+a+" "+u},L.a.createElement("div",{className:"post__content"},d,L.a.createElement("div",null,L.a.createElement("ul",{className:"post__header"},L.a.createElement("li",{className:"col col__name"},L.a.createElement("strong",null,L.a.createElement(h.a,{user:this.props.user}))),r,L.a.createElement("li",{className:"col"},L.a.createElement("time",{className:"post__time"},L.a.createElement(w.FormattedDate,{value:e.create_at,day:"numeric",month:"short",year:"numeric",hour12:!this.props.useMilitaryTime,hour:"2-digit",minute:"2-digit"})),k),N),L.a.createElement("div",{className:"post__body"},L.a.createElement("div",{className:o},s,i),c))))}}]),t}(L.a.Component);t.a=F,F.propTypes={post:L.a.PropTypes.object,user:L.a.PropTypes.object.isRequired,currentUser:L.a.PropTypes.object.isRequired,compactDisplay:L.a.PropTypes.bool,useMilitaryTime:L.a.PropTypes.bool.isRequired,isFlagged:L.a.PropTypes.bool,status:L.a.PropTypes.string}},1875:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(25),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(11),g=a(30),v=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(v,"a",v);var _=a(54),E=a(174),M=a(12),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=a(1),S=y&&y.__esModule?function(){return y["default"]}:function(){return y};a.d(S,"a",S);var T=p.a.ActionTypes,C=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleClose=a.handleClose.bind(a),a.toggleSize=a.toggleSize.bind(a),a.handleBack=a.handleBack.bind(a),a.state={},a}return m()(t,e),l()(t,[{key:"handleClose",value:function(e){e.preventDefault(),_.emitCloseRightHandSide(),this.props.shrink()}},{key:"toggleSize",value:function(e){e.preventDefault(),this.props.toggleSize()}},{key:"handleBack",value:function(e){e.preventDefault(),this.props.fromSearch?(f.a.handleServerAction({type:T.RECEIVED_SEARCH_TERM,term:this.props.fromSearch,do_search:!0,is_mention_search:this.props.isMentionSearch}),f.a.handleServerAction({type:T.RECEIVED_POST_SELECTED,postId:null})):this.props.fromFlaggedPosts&&a.i(E.getFlaggedPosts)()}},{key:"render",value:function(){var e=void 0,t=S.a.createElement(g.Tooltip,{id:"closeSidebarTooltip"},S.a.createElement(M.FormattedMessage,{id:"rhs_header.closeSidebarTooltip",defaultMessage:"Close Sidebar"})),a=void 0;this.props.fromSearch?a=S.a.createElement(g.Tooltip,{id:"backToResultsTooltip"},S.a.createElement(M.FormattedMessage,{id:"rhs_header.backToResultsTooltip",defaultMessage:"Back to Search Results"})):this.props.fromFlaggedPosts&&(a=S.a.createElement(g.Tooltip,{id:"backToResultsTooltip"},S.a.createElement(M.FormattedMessage,{id:"rhs_header.backToFlaggedTooltip",defaultMessage:"Back to Flagged Posts"})));var n=S.a.createElement(g.Tooltip,{id:"expandSidebarTooltip"},S.a.createElement(M.FormattedMessage,{id:"rhs_header.expandSidebarTooltip",defaultMessage:"Expand Sidebar"})),r=S.a.createElement(g.Tooltip,{id:"shrinkSidebarTooltip"},S.a.createElement(M.FormattedMessage,{id:"rhs_header.shrinkSidebarTooltip",defaultMessage:"Shrink Sidebar"}));return(this.props.fromSearch||this.props.fromFlaggedPosts)&&(e=S.a.createElement("a",{href:"#",onClick:this.handleBack,className:"sidebar--right__back"},S.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:a},S.a.createElement("i",{className:"fa fa-angle-left"})))),S.a.createElement("div",{className:"sidebar--right__header"},S.a.createElement("span",{className:"sidebar--right__title"},e,S.a.createElement(M.FormattedMessage,{id:"rhs_header.details",defaultMessage:"Message Details"})),S.a.createElement("div",{className:"pull-right"},S.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.toggleSize},S.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:n},S.a.createElement("i",{className:"fa fa-expand"})),S.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:r},S.a.createElement("i",{className:"fa fa-compress"}))),S.a.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",onClick:this.handleClose},S.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:t},S.a.createElement("i",{className:"fa fa-sign-out"})))))}}]),t}(S.a.Component);t.a=C,C.defaultProps={isMentionSearch:!1,fromSearch:""},C.propTypes={isMentionSearch:S.a.PropTypes.bool,fromSearch:S.a.PropTypes.string,fromFlaggedPosts:S.a.PropTypes.bool,toggleSize:S.a.PropTypes["function"],shrink:S.a.PropTypes["function"]}},1876:function(e,t,a){"use strict";(function(e){var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(321),f=a(584),p=a(569),g=a(570),v=a(228),_=a(36),E=a(18),M=a(37),b=a(54),y=a(174),S=a(13),T=a(154),C=a(11),k=a(30),w=k&&k.__esModule?function(){return k["default"]}:function(){return k};a.d(w,"a",w);var N=a(12),P=N&&N.__esModule?function(){return N["default"]}:function(){return N};a.d(P,"a",P);var I=a(1),D=I&&I.__esModule?function(){return I["default"]}:function(){return I};a.d(D,"a",D);var L=function(t){function n(e){o()(this,n);var t=d()(this,(n.__proto__||r()(n)).call(this,e));return t.handlePermalink=t.handlePermalink.bind(t),t.flagPost=t.flagPost.bind(t),t.unflagPost=t.unflagPost.bind(t),t.state={},t}return m()(n,t),l()(n,[{key:"handlePermalink",value:function(e){e.preventDefault(),b.showGetPostLinkModal(this.props.post)}},{key:"shouldComponentUpdate",value:function(e){return e.status!==this.props.status||(e.compactDisplay!==this.props.compactDisplay||(e.useMilitaryTime!==this.props.useMilitaryTime||(e.isFlagged!==this.props.isFlagged||(!S.areObjectsEqual(e.post,this.props.post)||!S.areObjectsEqual(e.currentUser,this.props.currentUser)))))}},{key:"flagPost",value:function(e){e.preventDefault(),a.i(y.flagPost)(this.props.post.id)}},{key:"unflagPost",value:function(e){e.preventDefault(),a.i(y.unflagPost)(this.props.post.id)}},{key:"render",value:function(){var t=this,a=this.props.post,n=this.props.user,r=C.a.MATTERMOST_ICON_SVG,s=this.props.currentUser.id===a.user_id,o=M.a.isTeamAdminForCurrentTeam()||E.a.isSystemAdminForCurrentUser(),i=a.type&&a.type.startsWith(C.a.SYSTEM_MESSAGE_PREFIX),l=E.a.getProfile(a.user_id).update_at,u=_.a.get(a.channel_id),d=C.a.FLAG_ICON_SVG,c="Post";a.root_id.length>0&&(c="Comment");var m="";E.a.getCurrentId()===a.user_id&&(m="current--user");var y="";T.isSystemMessage(a)&&(y="post--system");var w;u&&(w="D"===u.type?D.a.createElement(N.FormattedMessage,{id:"rhs_root.direct",defaultMessage:"Direct Message"}):u.display_name);var P=[];S.isMobile()&&(this.props.isFlagged?P.push(D.a.createElement("li",{key:"mobileFlag",role:"presentation"},D.a.createElement("a",{href:"#",onClick:this.unflagPost},D.a.createElement(N.FormattedMessage,{id:"rhs_root.mobile.unflag",defaultMessage:"Unflag"})))):P.push(D.a.createElement("li",{key:"mobileFlag",role:"presentation"},D.a.createElement("a",{href:"#",onClick:this.flagPost},D.a.createElement(N.FormattedMessage,{id:"rhs_root.mobile.flag",defaultMessage:"Flag"}))))),P.push(D.a.createElement("li",{key:"rhs-root-permalink",role:"presentation"},D.a.createElement("a",{href:"#",onClick:this.handlePermalink},D.a.createElement(N.FormattedMessage,{id:"rhs_root.permalink",defaultMessage:"Permalink"})))),s&&!i&&P.push(D.a.createElement("li",{key:"rhs-root-edit",role:"presentation"},D.a.createElement("a",{href:"#",role:"menuitem","data-toggle":"modal","data-target":"#edit_post","data-refocusid":"#reply_textbox","data-title":c,"data-message":a.message,"data-postid":a.id,"data-channelid":a.channel_id},D.a.createElement(N.FormattedMessage,{id:"rhs_root.edit",defaultMessage:"Edit"})))),(s||o)&&P.push(D.a.createElement("li",{key:"rhs-root-delete",role:"presentation"},D.a.createElement("a",{href:"#",role:"menuitem",onClick:function(){return b.showDeletePostModal(a,t.props.commentCount)}},D.a.createElement(N.FormattedMessage,{id:"rhs_root.del",defaultMessage:"Delete"}))));var I="";P.length>0&&(I=D.a.createElement("div",{className:"dropdown"},D.a.createElement("a",{href:"#",className:"post__dropdown dropdown-toggle",type:"button","data-toggle":"dropdown","aria-expanded":"false"}),D.a.createElement("ul",{className:"dropdown-menu",role:"menu"},P)));var L;a.filenames&&a.filenames.length>0&&(L=D.a.createElement(g.a,{filenames:a.filenames,channelId:a.channel_id,userId:a.user_id,compactDisplay:this.props.compactDisplay}));var F=D.a.createElement(h.a,{user:n}),A=void 0;a.props&&a.props.from_webhook?(a.props.override_username&&"true"===e.window.mm_config.EnablePostUsernameOverride&&(F=D.a.createElement(h.a,{user:n,overwriteName:a.props.override_username,disablePopover:!0})),A=D.a.createElement("li",{className:"col col__name bot-indicator"},"BOT")):T.isSystemMessage(a)&&(F=D.a.createElement(h.a,{user:{},overwriteName:C.a.SYSTEM_MESSAGE_PROFILE_NAME,overwriteImage:C.a.SYSTEM_MESSAGE_PROFILE_IMAGE,disablePopover:!0}));var O=D.a.createElement(v.a,{src:T.getProfilePicSrcForPost(a,l),status:this.props.status,width:"36",height:"36"});T.isSystemMessage(a)&&(O=D.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:r}}));var H="",R=D.a.createElement("div",{className:"post__img"},O);this.props.compactDisplay&&(H="post--compact",R="");var x=D.a.createElement(p.a,{post:a}),U=void 0,G=void 0,z="",V=D.a.createElement(k.Tooltip,{id:"flagTooltip"},D.a.createElement(N.FormattedMessage,{id:"flag_post.flag",defaultMessage:"Flag for follow up"}));return this.props.isFlagged?(z="visible",U=D.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:d}}),G=this.unflagPost,V=D.a.createElement(k.Tooltip,{id:"flagTooltip"},D.a.createElement(N.FormattedMessage,{id:"flag_post.unflag",defaultMessage:"Unflag"}))):(U=D.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:d}}),G=this.flagPost),D.a.createElement("div",{className:"post post--root post--thread "+m+" "+y+" "+H},D.a.createElement("div",{className:"post-right-channel__name"},w),D.a.createElement("div",{className:"post__content"},R,D.a.createElement("div",null,D.a.createElement("ul",{className:"post__header"},D.a.createElement("li",{className:"col__name"},F),A,D.a.createElement("li",{className:"col"},D.a.createElement("time",{className:"post__time"},D.a.createElement(N.FormattedDate,{value:a.create_at,day:"numeric",month:"short",year:"numeric",hour12:!this.props.useMilitaryTime,hour:"2-digit",minute:"2-digit"})),D.a.createElement(k.OverlayTrigger,{key:"rootpostflagtooltipkey"+z,delayShow:C.a.OVERLAY_TIME_DELAY,placement:"top",overlay:V},D.a.createElement("a",{href:"#",className:"flag-icon__container "+z,onClick:G},U))),D.a.createElement("li",{className:"col col__reply"
},I)),D.a.createElement("div",{className:"post__body"},D.a.createElement(f.a,{post:a,message:x}),L))))}}]),n}(D.a.Component);t.a=L,L.defaultProps={commentCount:0},L.propTypes={post:D.a.PropTypes.object.isRequired,user:D.a.PropTypes.object.isRequired,currentUser:D.a.PropTypes.object.isRequired,commentCount:D.a.PropTypes.number,compactDisplay:D.a.PropTypes.bool,useMilitaryTime:D.a.PropTypes.bool.isRequired,isFlagged:D.a.PropTypes.bool,status:D.a.PropTypes.string}}).call(t,a(17))},1877:function(e,t,a){"use strict";function n(e){return R.a.createElement("div",b()({},e,{className:"scrollbar--view"}))}function r(e){return R.a.createElement("div",b()({},e,{className:"scrollbar--horizontal"}))}function s(e){return R.a.createElement("div",b()({},e,{className:"scrollbar--vertical"}))}var o=a(42),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(i,"a",i);var l=a(112),u=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(u,"a",u);var d=a(6),c=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(c,"a",c);var m=a(3),h=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(h,"a",h);var f=a(4),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(p,"a",p);var g=a(7),v=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(v,"a",v);var _=a(2),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(9),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=a(571),S=a(1849),T=a(1875),C=a(1876),k=a(1874),w=a(1648),N=a(36),P=a(153),I=a(18),D=a(45),L=a(13),F=a(11),A=a(0),O=A&&A.__esModule?function(){return A["default"]}:function(){return A};a.d(O,"a",O);var H=a(1),R=H&&H.__esModule?function(){return H["default"]}:function(){return H};a.d(R,"a",R);var x=a(2010),U=x&&x.__esModule?function(){return x["default"]}:function(){return x};a.d(U,"a",U);var G=F.a.Preferences,z=function(e){function t(e){h()(this,t);var a=v()(this,(t.__proto__||c()(t)).call(this,e));a.mounted=!1,a.onPostChange=a.onPostChange.bind(a),a.onUserChange=a.onUserChange.bind(a),a.forceUpdateInfo=a.forceUpdateInfo.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.onStatusChange=a.onStatusChange.bind(a),a.handleResize=a.handleResize.bind(a);var n=a.getPosts();return n.windowWidth=L.windowWidth(),n.windowHeight=L.windowHeight(),n.profiles=JSON.parse(u()(I.a.getProfiles())),n.compactDisplay=D.a.get(G.CATEGORY_DISPLAY_SETTINGS,G.MESSAGE_DISPLAY,G.MESSAGE_DISPLAY_DEFAULT)===G.MESSAGE_DISPLAY_COMPACT,n.flaggedPosts=D.a.getCategory(F.a.Preferences.CATEGORY_FLAGGED_POST),n.statuses=i()({},I.a.getStatuses()),a.state=n,a}return E()(t,e),p()(t,[{key:"componentDidMount",value:function(){P.a.addSelectedPostChangeListener(this.onPostChange),P.a.addChangeListener(this.onPostChange),D.a.addChangeListener(this.onPreferenceChange),I.a.addChangeListener(this.onUserChange),I.a.addStatusesChangeListener(this.onStatusChange),this.scrollToBottom(),window.addEventListener("resize",this.handleResize),this.mounted=!0}},{key:"componentWillUnmount",value:function(){P.a.removeSelectedPostChangeListener(this.onPostChange),P.a.removeChangeListener(this.onPostChange),D.a.removeChangeListener(this.onPreferenceChange),I.a.removeChangeListener(this.onUserChange),I.a.removeStatusesChangeListener(this.onStatusChange),window.removeEventListener("resize",this.handleResize),this.mounted=!1}},{key:"componentDidUpdate",value:function(e,t){var a=t.postsArray||[],n=this.state.postsArray||[];if(!(a.length>=n.length)){var r=n[n.length-1];r.user_id===I.a.getCurrentId()&&this.scrollToBottom()}}},{key:"shouldComponentUpdate",value:function(e,t){return!L.areObjectsEqual(t.statuses,this.state.statuses)||(!L.areObjectsEqual(t.postsArray,this.state.postsArray)||(!L.areObjectsEqual(t.selected,this.state.selected)||(t.compactDisplay!==this.state.compactDisplay||(e.useMilitaryTime!==this.props.useMilitaryTime||(!L.areObjectsEqual(t.flaggedPosts,this.state.flaggedPosts)||(!L.areObjectsEqual(t.profiles,this.state.profiles)||!L.areObjectsEqual(e.currentUser,this.props.currentUser)))))))}},{key:"forceUpdateInfo",value:function(){if(this.state.postList)for(var e in this.state.postList.posts)this.refs[e]&&this.refs[e].forceUpdate()}},{key:"handleResize",value:function(){this.setState({windowWidth:L.windowWidth(),windowHeight:L.windowHeight()})}},{key:"onPreferenceChange",value:function(){this.setState({compactDisplay:D.a.get(G.CATEGORY_DISPLAY_SETTINGS,G.MESSAGE_DISPLAY,G.MESSAGE_DISPLAY_DEFAULT)===G.MESSAGE_DISPLAY_COMPACT,flaggedPosts:D.a.getCategory(F.a.Preferences.CATEGORY_FLAGGED_POST)}),this.forceUpdateInfo()}},{key:"onPostChange",value:function(){this.mounted&&this.setState(this.getPosts())}},{key:"onStatusChange",value:function(){this.setState({statuses:i()({},I.a.getStatuses())})}},{key:"getPosts",value:function(){var e=P.a.getSelectedPost(),t=P.a.getSelectedPostThread(),a=[];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.root_id===e.id&&a.push(r)}return a.sort(function(e,t){return e.state!==F.a.POST_LOADING&&e.state!==F.a.POST_FAILED||t.state===F.a.POST_LOADING||t.state===F.a.POST_FAILED?e.state===F.a.POST_LOADING||e.state===F.a.POST_FAILED||t.state!==F.a.POST_LOADING&&t.state!==F.a.POST_FAILED?e.state===F.a.POST_LOADING&&t.state===F.a.POST_FAILED?-1:e.state===F.a.POST_FAILED&&t.state===F.a.POST_LOADING?1:e.create_at<t.create_at?-1:e.create_at>t.create_at?1:0:-1:1}),{postsArray:a,selected:e}}},{key:"onUserChange",value:function(){var e=JSON.parse(u()(I.a.getProfiles()));this.setState({profiles:e})}},{key:"scrollToBottom",value:function(){O()(".post-right__scroll")[0]&&O()(".post-right__scroll").parent().scrollTop(O()(".post-right__scroll")[0].scrollHeight)}},{key:"render",value:function(){var e=this,t=this.state.postsArray,a=this.state.selected,o=N.a.get(this.state.selected.channel_id),l=this.state.profiles||{};if(o&&o.type===F.a.DM_CHANNEL&&(l=i()({},l,I.a.getDirectProfiles())),null==t||null==a)return R.a.createElement("div",null);var u,d=I.a.getCurrentId();null!=d&&(u=R.a.createElement(y.a,null));var c=void 0;c=I.a.getCurrentId()===a.user_id?this.props.currentUser:l[a.user_id];var m=!1;this.state.flaggedPosts&&(m="true"===this.state.flaggedPosts.get(a.id));var h="offline";return this.state.statuses&&(h=this.state.statuses[a.user_id]||"offline"),R.a.createElement("div",{className:"post-right__container"},R.a.createElement(w.a,{overlayType:"right"}),R.a.createElement("div",{className:"search-bar__container sidebar--right__search-header"},u),R.a.createElement("div",{className:"sidebar-right__body"},R.a.createElement(T.a,{fromFlaggedPosts:this.props.fromFlaggedPosts,fromSearch:this.props.fromSearch,isMentionSearch:this.props.isMentionSearch,toggleSize:this.props.toggleSize,shrink:this.props.shrink}),R.a.createElement(U.a,{autoHide:!0,autoHideTimeout:500,autoHideDuration:500,renderThumbHorizontal:r,renderThumbVertical:s,renderView:n},R.a.createElement("div",{className:"post-right__scroll"},R.a.createElement(C.a,{ref:a.id,post:a,commentCount:t.length,user:c,currentUser:this.props.currentUser,compactDisplay:this.state.compactDisplay,useMilitaryTime:this.props.useMilitaryTime,isFlagged:m,status:h}),R.a.createElement("div",{className:"post-right-comments-container"},t.map(function(t){var a=void 0;a=I.a.getCurrentId()===t.user_id?I.a.getCurrentUser():l[t.user_id];var n=!1;e.state.flaggedPosts&&(n="true"===e.state.flaggedPosts.get(t.id));var r="offline";return e.state.statuses&&(r=e.state.statuses[a.id]||"offline"),R.a.createElement(k.a,{ref:t.id,key:t.id+"commentKey",post:t,user:a,currentUser:e.props.currentUser,compactDisplay:e.state.compactDisplay,useMilitaryTime:e.props.useMilitaryTime,isFlagged:n,status:r})})),R.a.createElement("div",{className:"post-create__container"},R.a.createElement(S.a,{channelId:a.channel_id,rootId:a.id}))))))}}]),t}(R.a.Component);t.a=z,z.defaultProps={fromSearch:"",isMentionSearch:!1},z.propTypes={fromSearch:R.a.PropTypes.string,fromFlaggedPosts:R.a.PropTypes.bool,isMentionSearch:R.a.PropTypes.bool,currentUser:R.a.PropTypes.object.isRequired,useMilitaryTime:R.a.PropTypes.bool.isRequired,toggleSize:R.a.PropTypes["function"],shrink:R.a.PropTypes["function"]}},1878:function(e,t,a){"use strict";function n(){var e=T.a.getSearchResults(),t=new E.a;if(e&&e.order){var a=e.order.map(function(t){return e.posts[t].channel_id}),n=!0,r=!1,s=void 0;try{for(var o,i=v()(a);!(n=(o=i.next()).done);n=!0){var l=o.value;t.has(l)||t.set(l,S.a.get(l))}}catch(u){r=!0,s=u}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw s}}}return{results:e,channels:t,searchTerm:T.a.getSearchTerm(),flaggedPosts:k.a.getCategory(N.a.Preferences.CATEGORY_FLAGGED_POST)}}var r=a(112),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(s,"a",s);var o=a(6),i=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(i,"a",i);var l=a(3),u=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(u,"a",u);var d=a(4),c=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(c,"a",c);var m=a(7),h=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(h,"a",h);var f=a(2),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(p,"a",p);var g=a(47),v=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(v,"a",v);var _=a(98),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(1879),b=a(1880),y=a(571),S=a(36),T=a(229),C=a(18),k=a(45),w=a(13),N=a(11),P=a(0),I=P&&P.__esModule?function(){return P["default"]}:function(){return P};a.d(I,"a",I);var D=a(1),L=D&&D.__esModule?function(){return D["default"]}:function(){return D};a.d(L,"a",L);var F=a(12),A=F&&F.__esModule?function(){return F["default"]}:function(){return F};a.d(A,"a",A);var O=N.a.Preferences,H=function(e){function t(e){u()(this,t);var a=h()(this,(t.__proto__||i()(t)).call(this,e));a.mounted=!1,a.onChange=a.onChange.bind(a),a.onUserChange=a.onUserChange.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.resize=a.resize.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.handleResize=a.handleResize.bind(a);var r=n();return r.windowWidth=w.windowWidth(),r.windowHeight=w.windowHeight(),r.profiles=JSON.parse(s()(C.a.getProfiles())),r.compactDisplay=k.a.get(O.CATEGORY_DISPLAY_SETTINGS,O.MESSAGE_DISPLAY,O.MESSAGE_DISPLAY_DEFAULT)===O.MESSAGE_DISPLAY_COMPACT,a.state=r,a}return p()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.mounted=!0,T.a.addSearchChangeListener(this.onChange),S.a.addChangeListener(this.onChange),k.a.addChangeListener(this.onPreferenceChange),C.a.addChangeListener(this.onUserChange),k.a.addChangeListener(this.onPreferenceChange),this.resize(),window.addEventListener("resize",this.handleResize),w.isMobile()||I()(".sidebar--right .search-items-container").perfectScrollbar()}},{key:"shouldComponentUpdate",value:function(e,t){return!w.areObjectsEqual(this.props,e)||(!w.areObjectsEqual(this.state,t)||t.compactDisplay!==this.state.compactDisplay)}},{key:"componentDidUpdate",value:function(){this.resize()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,T.a.removeSearchChangeListener(this.onChange),S.a.removeChangeListener(this.onChange),k.a.removeChangeListener(this.onPreferenceChange),C.a.removeChangeListener(this.onUserChange),k.a.removeChangeListener(this.onPreferenceChange),window.removeEventListener("resize",this.handleResize)}},{key:"handleResize",value:function(){this.setState({windowWidth:w.windowWidth(),windowHeight:w.windowHeight()})}},{key:"onPreferenceChange",value:function(){this.setState({compactDisplay:k.a.get(O.CATEGORY_DISPLAY_SETTINGS,O.MESSAGE_DISPLAY,O.MESSAGE_DISPLAY_DEFAULT)===O.MESSAGE_DISPLAY_COMPACT,flaggedPosts:k.a.getCategory(N.a.Preferences.CATEGORY_FLAGGED_POST)})}},{key:"onChange",value:function(){this.mounted&&this.setState(n())}},{key:"onUserChange",value:function(){this.setState({profiles:JSON.parse(s()(C.a.getProfiles()))})}},{key:"resize",value:function(){I()("#search-items-container").scrollTop(0)}},{key:"render",value:function(){var e=this.state.results,t=C.a.getCurrentId(),a=null;t&&(a=L.a.createElement(y.a,null));var n=!e||!e.order||!e.order.length,r=this.state.searchTerm,s=this.state.profiles||{},o=N.a.FLAG_ICON_SVG,i=null;return i=this.props.isFlaggedPosts&&n?L.a.createElement("div",{className:"sidebar--right__subheader"},L.a.createElement("ul",null,L.a.createElement("li",null,L.a.createElement(F.FormattedHTMLMessage,{id:"search_results.usageFlag1",defaultMessage:"You haven't flagged any messages yet."})),L.a.createElement("li",null,L.a.createElement(F.FormattedHTMLMessage,{id:"search_results.usageFlag2",defaultMessage:"You can add a flag to messages and comments by clicking the "}),L.a.createElement("span",{className:"usage__icon",dangerouslySetInnerHTML:{__html:o}}),L.a.createElement(F.FormattedHTMLMessage,{id:"search_results.usageFlag3",defaultMessage:" icon next to the timestamp."})),L.a.createElement("li",null,L.a.createElement(F.FormattedHTMLMessage,{id:"search_results.usageFlag4",defaultMessage:"Flags are a way to mark messages for follow up. Your flags are personal, and cannot be seen by other users."})))):!r&&n?L.a.createElement("div",{className:"sidebar--right__subheader"},L.a.createElement(F.FormattedHTMLMessage,{id:"search_results.usage",defaultMessage:'<ul><li>Use <b>"quotation marks"</b> to search for phrases</li><li>Use <b>from:</b> to find posts from specific users and <b>in:</b> to find posts in specific channels</li></ul>'})):n?L.a.createElement("div",{className:"sidebar--right__subheader"},L.a.createElement("h4",null,L.a.createElement(F.FormattedMessage,{id:"search_results.noResults",defaultMessage:"No results found. Try again?"})),L.a.createElement(F.FormattedHTMLMessage,{id:"search_results.because",defaultMessage:'<ul> <li>If you\'re searching a partial phrase (ex. searching "rea", looking for "reach" or "reaction"), append a * to your search term.</li> <li>Two letter searches and common words like "this", "a" and "is" won\'t appear in search results, due to the excessive results returned.</li> </ul>'})):e.order.map(function(t){var a=e.posts[t],n=void 0;n=C.a.getCurrentId()===a.user_id?C.a.getCurrentUser():s[a.user_id];var o=!1;return this.state.flaggedPosts&&(o="true"===this.state.flaggedPosts.get(a.id)),L.a.createElement(b.a,{key:a.id,channel:this.state.channels.get(a.channel_id),compactDisplay:this.state.compactDisplay,post:a,user:n,term:r,isMentionSearch:this.props.isMentionSearch,isFlaggedSearch:this.props.isFlaggedPosts,useMilitaryTime:this.props.useMilitaryTime,shrink:this.props.shrink,isFlagged:o})},this),L.a.createElement("div",{className:"sidebar--right__content"},L.a.createElement("div",{className:"search-bar__container sidebar--right__search-header"},a),L.a.createElement("div",{className:"sidebar-right__body"},L.a.createElement(M.a,{isMentionSearch:this.props.isMentionSearch,toggleSize:this.props.toggleSize,shrink:this.props.shrink,isFlaggedPosts:this.props.isFlaggedPosts}),L.a.createElement("div",{id:"search-items-container",className:"search-items-container"},i)))}}]),t}(L.a.Component);t.a=H,H.propTypes={isMentionSearch:L.a.PropTypes.bool,useMilitaryTime:L.a.PropTypes.bool.isRequired,toggleSize:L.a.PropTypes["function"],shrink:L.a.PropTypes["function"],isFlaggedPosts:L.a.PropTypes.bool}},1879:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(25),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(11),g=a(30),v=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(v,"a",v);var _=a(12),E=_&&_.__esModule?function(){return _["default"]}:function(){return _};a.d(E,"a",E);var M=a(1),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=p.a.ActionTypes,S=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.handleClose=a.handleClose.bind(a),a.toggleSize=a.toggleSize.bind(a),a}return m()(t,e),l()(t,[{key:"handleClose",value:function(e){e.preventDefault(),f.a.handleServerAction({type:y.RECEIVED_SEARCH,results:null}),f.a.handleServerAction({type:y.RECEIVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),f.a.handleServerAction({type:y.RECEIVED_POST_SELECTED,postId:null}),this.props.shrink()}},{key:"toggleSize",value:function(e){e.preventDefault(),this.props.toggleSize()}},{key:"render",value:function(){var e=b.a.createElement(_.FormattedMessage,{id:"search_header.results",defaultMessage:"Search Results"}),t=b.a.createElement(g.Tooltip,{id:"closeSidebarTooltip"},b.a.createElement(_.FormattedMessage,{id:"rhs_header.closeTooltip",defaultMessage:"Close Sidebar"})),a=b.a.createElement(g.Tooltip,{id:"expandSidebarTooltip"},b.a.createElement(_.FormattedMessage,{id:"rhs_header.expandTooltip",defaultMessage:"Expand Sidebar"})),n=b.a.createElement(g.Tooltip,{id:"shrinkSidebarTooltip"},b.a.createElement(_.FormattedMessage,{id:"rhs_header.expandTooltip",defaultMessage:"Shrink Sidebar"}));return this.props.isMentionSearch?e=b.a.createElement(_.FormattedMessage,{id:"search_header.title2",defaultMessage:"Recent Mentions"}):this.props.isFlaggedPosts&&(e=b.a.createElement(_.FormattedMessage,{id:"search_header.title3",defaultMessage:"Flagged Posts"})),b.a.createElement("div",{className:"sidebar--right__header"},b.a.createElement("span",{className:"sidebar--right__title"},e),b.a.createElement("div",{className:"pull-right"},b.a.createElement("button",{type:"button",className:"sidebar--right__expand","aria-label":"Expand",onClick:this.toggleSize},b.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:a},b.a.createElement("i",{className:"fa fa-expand"})),b.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:n},b.a.createElement("i",{className:"fa fa-compress"}))),b.a.createElement("button",{type:"button",className:"sidebar--right__close","aria-label":"Close",title:"Close",onClick:this.handleClose},b.a.createElement(g.OverlayTrigger,{delayShow:p.a.OVERLAY_TIME_DELAY,placement:"top",overlay:t},b.a.createElement("i",{className:"fa fa-sign-out"})))))}}]),t}(b.a.Component);t.a=S,S.propTypes={isMentionSearch:b.a.PropTypes.bool,toggleSize:b.a.PropTypes["function"],shrink:b.a.PropTypes["function"],isFlaggedPosts:b.a.PropTypes.bool}},1880:function(e,t,a){"use strict";(function(e){var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(569),g=a(321),v=a(37),_=a(18),E=a(25),M=E&&E.__esModule?function(){return E["default"]}:function(){return E};a.d(M,"a",M);var b=a(54),y=a(174),S=a(13),T=a(154),C=a(11),k=a(30),w=k&&k.__esModule?function(){return k["default"]}:function(){return k};a.d(w,"a",w);var N=a(1),P=N&&N.__esModule?function(){return N["default"]}:function(){return N};a.d(P,"a",P);var I=a(12),D=I&&I.__esModule?function(){return I["default"]}:function(){return I};a.d(D,"a",D);var L=a(53),F=C.a.ActionTypes,A=function(t){function n(e){o()(this,n);var t=d()(this,(n.__proto__||r()(n)).call(this,e));return t.handleFocusRHSClick=t.handleFocusRHSClick.bind(t),t.shrinkSidebar=t.shrinkSidebar.bind(t),t.unflagPost=t.unflagPost.bind(t),t.flagPost=t.flagPost.bind(t),t}return m()(n,t),l()(n,[{key:"hideSidebar",value:function(){f()(".sidebar--right").removeClass("move--left")}},{key:"shrinkSidebar",value:function(){var e=this;setTimeout(function(){e.props.shrink()})}},{key:"handleFocusRHSClick",value:function(e){e.preventDefault(),b.emitPostFocusRightHandSideFromSearch(this.props.post,this.props.isMentionSearch)}},{key:"flagPost",value:function(e){e.preventDefault(),a.i(y.flagPost)(this.props.post.id)}},{key:"unflagPost",value:function(e){e.preventDefault(),a.i(y.unflagPost)(this.props.post.id)}},{key:"render",value:function(){var t=this,a=null,n=this.props.channel,r=_.a.getCurrentUser().update_at,s=this.props.user||{},o=this.props.post,i=C.a.FLAG_ICON_SVG;n&&(a=n.display_name,"D"===n.type&&(a=P.a.createElement(I.FormattedMessage,{id:"search_item.direct",defaultMessage:"Direct Message"})));var l=void 0,u=!1;o.props&&o.props.from_webhook&&o.props.override_username&&"true"===e.window.mm_config.EnablePostUsernameOverride&&(l=o.props.override_username,u=!0);var d=void 0;o.props&&o.props.from_webhook&&(d=P.a.createElement("li",{className:"bot-indicator"},C.a.BOT_NAME));var c=P.a.createElement("img",{src:T.getProfilePicSrcForPost(o,r),height:"36",width:"36"}),m="",h=P.a.createElement("div",{className:"post__img"},c);this.props.compactDisplay&&(m="post--compact",h="");var f=void 0,E=void 0,b="",y=P.a.createElement(k.Tooltip,{id:"flagTooltip"},P.a.createElement(I.FormattedMessage,{id:"flag_post.flag",defaultMessage:"Flag for follow up"}));return this.props.isFlagged?(b="visible",y=P.a.createElement(k.Tooltip,{id:"flagTooltip"},P.a.createElement(I.FormattedMessage,{id:"flag_post.unflag",defaultMessage:"Unflag"})),E=this.unflagPost,f=P.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:i}})):(f=P.a.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:i}}),E=this.flagPost),P.a.createElement("div",{className:"search-item__container"},P.a.createElement("div",{className:"date-separator"},P.a.createElement("hr",{className:"separator__hr"}),P.a.createElement("div",{className:"separator__text"},P.a.createElement(I.FormattedDate,{value:o.create_at,day:"numeric",month:"long",year:"numeric"}))),P.a.createElement("div",{className:"post post--thread "+m},P.a.createElement("div",{className:"search-channel__name"},a),P.a.createElement("div",{className:"post__content"},h,P.a.createElement("div",null,P.a.createElement("ul",{className:"post__header"},P.a.createElement("li",{className:"col col__name"},P.a.createElement("strong",null,P.a.createElement(g.a,{user:s,overwriteName:l,disablePopover:u}))),d,P.a.createElement("li",{className:"col"},P.a.createElement("time",{className:"search-item-time"},P.a.createElement(I.FormattedDate,{value:o.create_at,hour12:!this.props.useMilitaryTime,hour:"2-digit",minute:"2-digit"})),P.a.createElement(k.OverlayTrigger,{delayShow:C.a.OVERLAY_TIME_DELAY,placement:"top",overlay:y},P.a.createElement("a",{href:"#",className:"flag-icon__container "+b,onClick:E},f))),P.a.createElement("li",{className:"col__controls"},P.a.createElement("a",{href:"#",className:"comment-icon__container search-item__comment",onClick:this.handleFocusRHSClick},P.a.createElement("span",{className:"comment-icon",dangerouslySetInnerHTML:{__html:C.a.REPLY_ICON}})),P.a.createElement("a",{onClick:function(){S.isMobile()&&(M.a.handleServerAction({type:F.RECEIVED_SEARCH,results:null}),M.a.handleServerAction({type:F.RECEIVED_SEARCH_TERM,term:null,do_search:!1,is_mention_search:!1}),M.a.handleServerAction({type:F.RECEIVED_POST_SELECTED,postId:null}),t.hideSidebar()),t.shrinkSidebar(),L.a.push(v.a.getCurrentTeamRelativeUrl()+"/pl/"+o.id)},className:"search-item__jump"},P.a.createElement(I.FormattedMessage,{id:"search_item.jump",defaultMessage:"Jump"})))),P.a.createElement("div",{className:"search-item-snippet"},P.a.createElement(p.a,{post:o,options:{searchTerm:this.props.term,mentionHighlight:this.props.isMentionSearch}}))))))}}]),n}(P.a.Component);t.a=A,A.propTypes={post:P.a.PropTypes.object,user:P.a.PropTypes.object,channel:P.a.PropTypes.object,compactDisplay:P.a.PropTypes.bool,isMentionSearch:P.a.PropTypes.bool,isFlaggedSearch:P.a.PropTypes.bool,term:P.a.PropTypes.string,useMilitaryTime:P.a.PropTypes.bool.isRequired,shrink:P.a.PropTypes["function"],isFlagged:P.a.PropTypes.bool}}).call(t,a(17))},1881:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(23),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(12),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(1),M=E&&E.__esModule?function(){return E["default"]}:function(){return E};a.d(M,"a",M);var b=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.doFileSelect=a.doFileSelect.bind(a),a.doSubmit=a.doSubmit.bind(a),a.state={clientError:a.props.clientError,serverError:a.props.serverError,filename:""},a}return m()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(){this.setState({clientError:this.props.clientError,serverError:this.props.serverError})}},{key:"doFileSelect",value:function(e){e.preventDefault();var t=f()(e.target).val();"fakepath"===t.substring(3,11)&&(t=t.substring(12)),this.setState({clientError:"",serverError:"",filename:t})}},{key:"doSubmit",value:function(e){e.preventDefault();var t=g.a.findDOMNode(this.refs.uploadinput);t.files&&t.files[0]?this.props.submit(t.files[0]):this.setState({clientError:!0})}},{key:"render",value:function(){var e=null;this.state.clientError&&(e=M.a.createElement("div",{className:"file-status"},M.a.createElement(v.FormattedMessage,{id:"setting_upload.noFile",defaultMessage:"No file selected."})));var t=null;this.state.serverError&&(t=M.a.createElement("div",{className:"file-status"},this.state.serverError));var a=null,n="btn btn-sm btn-primary disabled";return this.state.filename&&(a=M.a.createElement("div",{className:"file-status file-name"},this.state.filename),n="btn btn-sm btn-primary"),M.a.createElement("ul",{className:"section-max"},M.a.createElement("li",{className:"col-sm-12 section-title"},this.props.title),M.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},this.props.helpText),M.a.createElement("li",{className:"col-sm-offset-3 col-sm-9"},M.a.createElement("ul",{className:"setting-list"},M.a.createElement("li",{className:"setting-list-item"},M.a.createElement("span",{className:"btn btn-sm btn-primary btn-file sel-btn"},M.a.createElement(v.FormattedMessage,{id:"setting_upload.select",defaultMessage:"Select file"}),M.a.createElement("input",{ref:"uploadinput",accept:this.props.fileTypesAccepted,type:"file",onChange:this.doFileSelect})),M.a.createElement("a",{className:n,onClick:this.doSubmit},M.a.createElement(v.FormattedMessage,{id:"setting_upload.import",defaultMessage:"Import"})),a,t,e))))}}]),t}(M.a.Component);t.a=b,b.propTypes={title:M.a.PropTypes.string.isRequired,submit:M.a.PropTypes.func.isRequired,fileTypesAccepted:M.a.PropTypes.string.isRequired,clientError:M.a.PropTypes.string,serverError:M.a.PropTypes.string,helpText:M.a.PropTypes.object}},1883:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(1878),g=a(1877),v=a(229),_=a(153),E=a(18),M=a(45),b=a(174),y=a(13),S=a(11),T=a(1),C=T&&T.__esModule?function(){return T["default"]}:function(){return T};a.d(C,"a",C);var k=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.plScrolledToBottom=!0,a.onPreferenceChange=a.onPreferenceChange.bind(a),a.onSelectedChange=a.onSelectedChange.bind(a),a.onSearchChange=a.onSearchChange.bind(a),a.onUserChange=a.onUserChange.bind(a),a.onShowSearch=a.onShowSearch.bind(a),a.onShrink=a.onShrink.bind(a),a.toggleSize=a.toggleSize.bind(a),a.doStrangeThings=a.doStrangeThings.bind(a),a.state={searchVisible:null!==v.a.getSearchResults(),isMentionSearch:v.a.getIsMentionSearch(),postRightVisible:!!_.a.getSelectedPost(),expanded:!1,fromSearch:!1,currentUser:E.a.getCurrentUser(),useMilitaryTime:M.a.getBool(S.a.Preferences.CATEGORY_DISPLAY_SETTINGS,S.a.Preferences.USE_MILITARY_TIME,!1)},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){v.a.addSearchChangeListener(this.onSearchChange),_.a.addSelectedPostChangeListener(this.onSelectedChange),v.a.addShowSearchListener(this.onShowSearch),E.a.addChangeListener(this.onUserChange),M.a.addChangeListener(this.onPreferenceChange),this.doStrangeThings()}},{key:"componentWillUnmount",value:function(){v.a.removeSearchChangeListener(this.onSearchChange),_.a.removeSelectedPostChangeListener(this.onSelectedChange),v.a.removeShowSearchListener(this.onShowSearch),E.a.removeChangeListener(this.onUserChange),M.a.removeChangeListener(this.onPreferenceChange)}},{key:"shouldComponentUpdate",value:function(e,t){return!y.areObjectsEqual(t,this.state)}},{key:"componentWillUpdate",value:function(e,t){var a=this.state.searchVisible||this.state.postRightVisible,n=t.searchVisible||t.postRightVisible;a!==n&&_.a.jumpPostsViewSidebarOpen()}},{key:"doStrangeThings",value:function(){return f()(".app__body .inner-wrap").removeClass(".move--right"),f()(".app__body .inner-wrap").addClass("move--left"),f()(".app__body .sidebar--left").removeClass("move--right"),f()(".app__body .sidebar--right").addClass("move--left"),this.state.searchVisible||this.state.postRightVisible?null:(f()(".app__body .inner-wrap").removeClass("move--left").removeClass("move--right"),f()(".app__body .sidebar--right").removeClass("move--left"),C.a.createElement("div",null))}},{key:"componentDidUpdate",value:function(){this.doStrangeThings()}},{key:"onPreferenceChange",value:function(){this.state.isFlaggedPosts&&a.i(b.getFlaggedPosts)(),this.setState({useMilitaryTime:M.a.getBool(S.a.Preferences.CATEGORY_DISPLAY_SETTINGS,S.a.Preferences.USE_MILITARY_TIME,!1)})}},{key:"onSelectedChange",value:function(e,t){this.setState({postRightVisible:!!_.a.getSelectedPost(),fromSearch:e,fromFlaggedPosts:t})}},{key:"onShrink",value:function(){this.setState({expanded:!1})}},{key:"onSearchChange",value:function(){this.setState({searchVisible:null!==v.a.getSearchResults(),isMentionSearch:v.a.getIsMentionSearch(),isFlaggedPosts:v.a.getIsFlaggedPosts()})}},{key:"onUserChange",value:function(){this.setState({currentUser:E.a.getCurrentUser()})}},{key:"onShowSearch",value:function(){this.state.searchVisible||this.setState({searchVisible:!0})}},{key:"toggleSize",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=null,t="";return this.state.expanded&&(t="sidebar--right--expanded"),this.state.searchVisible?e=C.a.createElement(p.a,{isMentionSearch:this.state.isMentionSearch,isFlaggedPosts:this.state.isFlaggedPosts,useMilitaryTime:this.state.useMilitaryTime,
toggleSize:this.toggleSize,shrink:this.onShrink}):this.state.postRightVisible&&(e=C.a.createElement(g.a,{fromFlaggedPosts:this.state.fromFlaggedPosts,fromSearch:this.state.fromSearch,isMentionSearch:this.state.isMentionSearch,currentUser:this.state.currentUser,useMilitaryTime:this.state.useMilitaryTime,toggleSize:this.toggleSize,shrink:this.onShrink})),C.a.createElement("div",{className:"sidebar--right "+t,id:"sidebar-right"},C.a.createElement("div",{onClick:this.onShrink,className:"sidebar--right__bg"}),C.a.createElement("div",{className:"sidebar-right-container"},e))}}]),t}(C.a.Component);t.a=k},1884:function(e,t,a){"use strict";(function(e){var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(25),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(1653),g=a(227),v=a(1654),_=a(1642),E=a(18),M=a(37),b=a(45),y=a(54),S=a(174),T=a(75),C=a(13),k=a(11),w=a(12),N=w&&w.__esModule?function(){return w["default"]}:function(){return w};a.d(N,"a",N);var P=a(53),I=a(1637),D=a(1),L=D&&D.__esModule?function(){return D["default"]}:function(){return D};a.d(L,"a",L);var F=a(320),A=F&&F.__esModule?function(){return F["default"]}:function(){return F};a.d(A,"a",A);var O=k.a.ActionTypes,H=k.a.Preferences,R=k.a.TutorialSteps,x=function(t){function n(e){o()(this,n);var t=d()(this,(n.__proto__||r()(n)).call(this,e));t.onPreferenceChange=t.onPreferenceChange.bind(t),t.handleAboutModal=t.handleAboutModal.bind(t),t.searchMentions=t.searchMentions.bind(t),t.aboutModalDismissed=t.aboutModalDismissed.bind(t),t.getFlagged=t.getFlagged.bind(t);var a=t.getStateFromStores();return a.showUserSettingsModal=!1,a.showAboutModal=!1,t.shouldComponentUpdate=A.a.shouldComponentUpdate.bind(t),t.state=a,t}return m()(n,t),l()(n,[{key:"handleAboutModal",value:function(){this.setState({showAboutModal:!0})}},{key:"aboutModalDismissed",value:function(){this.setState({showAboutModal:!1})}},{key:"getFlagged",value:function(e){e.preventDefault(),a.i(S.getFlaggedPosts)()}},{key:"componentDidMount",value:function(){b.a.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){b.a.removeChangeListener(this.onPreferenceChange)}},{key:"getStateFromStores",value:function(){var e=b.a.getInt(H.TUTORIAL_STEP,E.a.getCurrentId(),999);return{currentUser:E.a.getCurrentUser(),showTutorialTip:e===R.MENU_POPOVER&&C.isMobile()}}},{key:"onPreferenceChange",value:function(){this.setState(this.getStateFromStores())}},{key:"searchMentions",value:function(e){e.preventDefault();var t=this.state.currentUser,a="";if(t.notify_props&&t.notify_props.mention_keys){var n=E.a.getMentionKeys(t.id);n.indexOf("@channel")!==-1&&(n[n.indexOf("@channel")]=""),n.indexOf("@all")!==-1&&(n[n.indexOf("@all")]=""),a=n.join(" ")}this.hideSidebars(),f.a.handleServerAction({type:O.RECEIVED_SEARCH_TERM,term:a,do_search:!0,is_mention_search:!0})}},{key:"closeLeftSidebar",value:function(){C.isMobile()&&setTimeout(function(){document.querySelector(".app__body .inner-wrap").classList.remove("move--right"),document.querySelector(".app__body .sidebar--left").classList.remove("move--right")})}},{key:"openRightSidebar",value:function(){C.isMobile()&&setTimeout(function(){document.querySelector(".app__body .inner-wrap").classList.add("move--left-small"),document.querySelector(".app__body .sidebar--menu").classList.add("move--left")})}},{key:"hideSidebars",value:function(){C.isMobile()&&(f.a.handleServerAction({type:O.RECEIVED_SEARCH,results:null}),f.a.handleServerAction({type:O.RECEIVED_POST_SELECTED,postId:null}),document.querySelector(".app__body .inner-wrap").classList.remove("move--right","move--left","move--left-small"),document.querySelector(".app__body .sidebar--left").classList.remove("move--right"),document.querySelector(".app__body .sidebar--right").classList.remove("move--left"),document.querySelector(".app__body .sidebar--menu").classList.remove("move--left"))}},{key:"render",value:function(){var t=this,n="",r="",s="",o="",i="",l=E.a.getCurrentUser(),u=!1,d=!1;null!=l&&(u=M.a.isTeamAdminForCurrentTeam()||E.a.isSystemAdminForCurrentUser(),d=E.a.isSystemAdminForCurrentUser(),r=L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:y.showInviteMemberModal},L.a.createElement("i",{className:"icon fa fa-user-plus"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.inviteNew",defaultMessage:"Invite New Member"}))),"O"===this.props.teamType&&(n=L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:y.showGetTeamInviteLinkModal},L.a.createElement("i",{className:"icon fa fa-link"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.teamLink",defaultMessage:"Get Team Invite Link"})))),"true"===e.window.mm_license.IsLicensed&&(e.window.mm_config.RestrictTeamInvite!==k.a.PERMISSIONS_SYSTEM_ADMIN||d?e.window.mm_config.RestrictTeamInvite!==k.a.PERMISSIONS_TEAM_ADMIN||u||(n=null,r=null):(n=null,r=null))),o=L.a.createElement("li",null,L.a.createElement(g.a,{dialogType:p.a},L.a.createElement("i",{className:"icon fa fa-users"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.viewMembers",defaultMessage:"View Members"}))),u&&(s=L.a.createElement("li",null,L.a.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_settings"},L.a.createElement("i",{className:"icon fa fa-globe"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.teamSettings",defaultMessage:"Team Settings"}))),o=L.a.createElement("li",null,L.a.createElement(g.a,{dialogType:p.a,dialogProps:{isAdmin:u}},L.a.createElement("i",{className:"icon fa fa-users"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.manageMembers",defaultMessage:"Manage Members"})))),d&&!C.isMobile()&&(i=L.a.createElement("li",null,L.a.createElement(P.b,{to:"/admin_console"},L.a.createElement("i",{className:"icon fa fa-wrench"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.console",defaultMessage:"System Console"}))));var c="";null!=e.window.mm_config.SiteName&&(c=e.window.mm_config.SiteName);var m=c;this.props.teamDisplayName&&(m=this.props.teamDisplayName);var h=null;e.window.mm_config.HelpLink&&(h=L.a.createElement("li",null,L.a.createElement(P.b,{target:"_blank",rel:"noopener noreferrer",to:e.window.mm_config.HelpLink},L.a.createElement("i",{className:"icon fa fa-question"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.help",defaultMessage:"Help"}))));var f=null;e.window.mm_config.ReportAProblemLink&&(f=L.a.createElement("li",null,L.a.createElement(P.b,{target:"_blank",rel:"noopener noreferrer",to:e.window.mm_config.ReportAProblemLink},L.a.createElement("i",{className:"icon fa fa-phone"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.report",defaultMessage:"Report a Problem"}))));var b=null;this.state.showTutorialTip&&(b=a.i(I.a)(function(e){return e.preventDefault()},!0),this.closeLeftSidebar(),this.openRightSidebar());var S=null;return e.window.mm_config.AppDownloadLink&&!T.isMobileApp()&&(S=L.a.createElement("li",null,L.a.createElement(P.b,{target:"_blank",rel:"noopener noreferrer",to:e.window.mm_config.AppDownloadLink},L.a.createElement("i",{className:"icon fa fa-mobile"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.nativeApps",defaultMessage:"Download Apps"})))),L.a.createElement("div",{className:"sidebar--menu",id:"sidebar-menu"},L.a.createElement("div",{className:"team__header theme"},L.a.createElement(P.b,{className:"team__name",to:"/channels/town-square"},m)),L.a.createElement("div",{className:"nav-pills__container"},b,L.a.createElement("ul",{className:"nav nav-pills nav-stacked"},L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:this.searchMentions},L.a.createElement("i",{className:"icon mentions"},"@"),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.recentMentions",defaultMessage:"Recent Mentions"}))),L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:this.getFlagged},L.a.createElement("i",{className:"icon fa fa-flag"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.flagged",defaultMessage:"Flagged Posts"}))),L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:function(){return t.setState({showUserSettingsModal:!0})}},L.a.createElement("i",{className:"icon fa fa-cog"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.accountSettings",defaultMessage:"Account Settings"}))),s,r,n,o,i,L.a.createElement("li",null,L.a.createElement(P.b,{to:"/select_team"},L.a.createElement("i",{className:"icon fa fa-exchange"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.switch_team",defaultMessage:"Team Selection"}))),L.a.createElement("li",{className:"divider"}),L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:y.emitUserLoggedOutEvent},L.a.createElement("i",{className:"icon fa fa-sign-out"}),L.a.createElement(w.FormattedMessage,{id:"sidebar_right_menu.logout",defaultMessage:"Logout"}))),L.a.createElement("li",{className:"divider"}),h,f,L.a.createElement("li",null,L.a.createElement("a",{href:"#",onClick:this.handleAboutModal},L.a.createElement("i",{className:"icon fa fa-info"}),L.a.createElement(w.FormattedMessage,{id:"navbar_dropdown.about",defaultMessage:"About Mattermost"}))),S)),L.a.createElement(v.a,{show:this.state.showUserSettingsModal,onModalDismissed:function(){return t.setState({showUserSettingsModal:!1})}}),L.a.createElement(_.a,{show:this.state.showAboutModal,onModalDismissed:this.aboutModalDismissed}))}}]),n}(L.a.Component);t.a=x,x.propTypes={teamType:L.a.PropTypes.string,teamDisplayName:L.a.PropTypes.string}}).call(t,a(17))},1885:function(e,t,a){"use strict";var n=a(40),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(47),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(6),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(3),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(4),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(7),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(2),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(1),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(36),M=a(18),b=a(136),y=a(155),S=a(11),T=a(1638),C=a(13),k=function(e){function t(){return d()(this,t),f()(this,(t.__proto__||l()(t)).apply(this,arguments))}return g()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.isSelection,n="mentions__name";a&&(n+=" suggestion--selected");var r="";r=t.type===S.a.DM_CHANNEL?t.display_name+" "+C.localizeMessage("channel_switch_modal.dm","(Direct Message)"):t.display_name+" ("+t.name+")";var s=null;return s=t.type===S.a.OPEN_CHANNEL?_.a.createElement("div",{className:"status"},_.a.createElement("i",{className:"fa fa-globe"})):t.type===S.a.PRIVATE_CHANNEL?_.a.createElement("div",{className:"status"},_.a.createElement("i",{className:"fa fa-lock"})):_.a.createElement(T.a,{status:t.status}),_.a.createElement("div",{onClick:this.handleClick,className:n},s,r)}}]),t}(y.a),w=function(){function e(){d()(this,e)}return m()(e,[{key:"handlePretextChanged",value:function(e,t){if(t){var a=E.a.getAll(),n=[],s=!0,i=!1,l=void 0;try{for(var u,d=o()(r()(a));!(s=(u=d.next()).done);s=!0){var c=u.value,m=a[c];if(m.display_name.toLowerCase().startsWith(t.toLowerCase()))n.push(m);else if(m.type===S.a.DM_CHANNEL&&C.getDirectTeammate(m.id).username.startsWith(t.toLowerCase())){var h=C.getDirectTeammate(m.id),f={display_name:h.username,name:h.username+" "+C.localizeMessage("channel_switch_modal.dm","(Direct Message)"),type:S.a.DM_CHANNEL,status:M.a.getStatus(h.id)||"offline"};n.push(f)}}}catch(p){i=!0,l=p}finally{try{!s&&d["return"]&&d["return"]()}finally{if(i)throw l}}n.sort(function(e,t){return e.display_name===t.display_name?e.type!==S.a.DM_CHANNEL&&t.type===S.a.DM_CHANNEL?-1:e.type===S.a.DM_CHANNEL&&t.type!==S.a.DM_CHANNEL?1:e.name.localeCompare(t.name):e.display_name.localeCompare(t.display_name)});var g=n.map(function(e){return e.name});b.a.addSuggestions(e,g,n,k,t)}}}]),e}();t.a=w},1886:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(86),g=a(76),v=a(19),_=a(13),E=a(37),M=a(12),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=a(1),S=y&&y.__esModule?function(){return y["default"]}:function(){return y};a.d(S,"a",S);var T=a.i(M.defineMessages)({dirDisabled:{id:"general_tab.dirDisabled",defaultMessage:"Team Directory has been disabled.  Please ask a System Admin to enable the Team Directory in the System Console team settings."},required:{id:"general_tab.required",defaultMessage:"This field is required"},chooseName:{id:"general_tab.chooseName",defaultMessage:"Please choose a new name for your team"},includeDirTitle:{id:"general_tab.includeDirTitle",defaultMessage:"Include this team in the Team Directory"},yes:{id:"general_tab.yes",defaultMessage:"Yes"},no:{id:"general_tab.no",defaultMessage:"No"},dirOff:{id:"general_tab.dirOff",defaultMessage:"Team directory is turned off for this system."},openInviteTitle:{id:"general_tab.openInviteTitle",defaultMessage:"Allow any user with an account on this server to join this team"},codeTitle:{id:"general_tab.codeTitle",defaultMessage:"Invite Code"},codeDesc:{id:"general_tab.codeDesc",defaultMessage:"Click 'Edit' to regenerate Invite Code."},teamNameInfo:{id:"general_tab.teamNameInfo",defaultMessage:"Set the name of the team as it appears on your sign-in screen and at the top of the left-hand sidebar."}}),C=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.updateSection=a.updateSection.bind(a),a.handleNameSubmit=a.handleNameSubmit.bind(a),a.handleInviteIdSubmit=a.handleInviteIdSubmit.bind(a),a.handleOpenInviteSubmit=a.handleOpenInviteSubmit.bind(a),a.handleClose=a.handleClose.bind(a),a.onUpdateNameSection=a.onUpdateNameSection.bind(a),a.updateName=a.updateName.bind(a),a.onUpdateInviteIdSection=a.onUpdateInviteIdSection.bind(a),a.updateInviteId=a.updateInviteId.bind(a),a.onUpdateOpenInviteSection=a.onUpdateOpenInviteSection.bind(a),a.handleOpenInviteRadio=a.handleOpenInviteRadio.bind(a),a.handleGenerateInviteId=a.handleGenerateInviteId.bind(a),a.state=a.setupInitialState(e),a}return m()(t,e),l()(t,[{key:"updateSection",value:function(e){f()(".section-max").length&&f()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),this.setState(this.setupInitialState(this.props)),this.props.updateSection(e)}},{key:"setupInitialState",value:function(e){var t=e.team;return{name:t.display_name,invite_id:t.invite_id,allow_open_invite:t.allow_open_invite,serverError:"",clientError:""}}},{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.team.display_name,invite_id:e.team.invite_id,allow_open_invite:e.team.allow_open_invite})}},{key:"handleGenerateInviteId",value:function(e){e.preventDefault();for(var t="",a=0;a<32;a++)t+=Math.floor(16*Math.random()).toString(16);this.setState({invite_id:t})}},{key:"handleOpenInviteRadio",value:function(e){this.setState({allow_open_invite:e})}},{key:"handleOpenInviteSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},n=this.props.team;n.allow_open_invite=this.state.allow_open_invite,v.a.updateTeam(n,function(e){E.a.saveTeam(e),E.a.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}},{key:"handleNameSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},n=!0,r=this.props.intl.formatMessage,s=this.state.name.trim();if(s?s===this.props.team.display_name?(a.clientError=r(T.chooseName),n=!1):a.clientError="":(a.clientError=r(T.required),n=!1),this.setState(a),n){var o=this.props.team;o.display_name=this.state.name,v.a.updateTeam(o,function(e){E.a.saveTeam(e),E.a.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}}},{key:"handleInviteIdSubmit",value:function(e){var t=this;e.preventDefault();var a={serverError:"",clientError:""},n=!0,r=this.state.invite_id.trim();if(r?a.clientError="":(a.clientError=this.props.intl.fromatMessage(T.required),n=!1),this.setState(a),n){var s=this.props.team;s.invite_id=this.state.invite_id,v.a.updateTeam(s,function(e){E.a.saveTeam(e),E.a.emitChange(),t.updateSection("")},function(e){a.serverError=e.message,t.setState(a)})}}},{key:"handleClose",value:function(){this.updateSection("")}},{key:"componentDidMount",value:function(){f()("#team_settings").on("hidden.bs.modal",this.handleClose)}},{key:"componentWillUnmount",value:function(){f()("#team_settings").off("hidden.bs.modal",this.handleClose)}},{key:"onUpdateNameSection",value:function(e){e.preventDefault(),"name"===this.props.activeSection?this.updateSection(""):this.updateSection("name")}},{key:"onUpdateInviteIdSection",value:function(e){e.preventDefault(),"invite_id"===this.props.activeSection?this.updateSection(""):this.updateSection("invite_id")}},{key:"onUpdateOpenInviteSection",value:function(e){e.preventDefault(),"open_invite"===this.props.activeSection?this.updateSection(""):this.updateSection("open_invite")}},{key:"updateName",value:function(e){this.setState({name:e.target.value})}},{key:"updateInviteId",value:function(e){this.setState({invite_id:e.target.value})}},{key:"render",value:function(){var e=null,t=null;this.state.clientError&&(e=this.state.clientError),this.state.serverError&&(t=this.state.serverError);var a=this.props.intl.formatMessage,n=void 0;if("open_invite"===this.props.activeSection){var r=[S.a.createElement("div",{key:"userOpenInviteOptions"},S.a.createElement("div",{className:"radio"},S.a.createElement("label",null,S.a.createElement("input",{name:"userOpenInviteOptions",type:"radio",defaultChecked:this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!0)}),S.a.createElement(M.FormattedMessage,{id:"general_tab.yes",defaultMessage:"Yes"})),S.a.createElement("br",null)),S.a.createElement("div",{className:"radio"},S.a.createElement("label",null,S.a.createElement("input",{name:"userOpenInviteOptions",type:"radio",defaultChecked:!this.state.allow_open_invite,onChange:this.handleOpenInviteRadio.bind(this,!1)}),S.a.createElement(M.FormattedMessage,{id:"general_tab.no",defaultMessage:"No"})),S.a.createElement("br",null)),S.a.createElement("div",null,S.a.createElement("br",null),S.a.createElement(M.FormattedMessage,{id:"general_tab.openInviteDesc",defaultMessage:"When allowed, a link to this team will be included on the landing page allowing anyone with an account to join this team."})))];n=S.a.createElement(g.a,{title:a(T.openInviteTitle),inputs:r,submit:this.handleOpenInviteSubmit,server_error:t,updateSection:this.onUpdateOpenInviteSection})}else{var s="";s=a(this.state.allow_open_invite===!0?T.yes:T.no),n=S.a.createElement(p.a,{title:a(T.openInviteTitle),describe:s,updateSection:this.onUpdateOpenInviteSection})}var o=void 0;if("invite_id"===this.props.activeSection){var i=[];i.push(S.a.createElement("div",{key:"teamInviteSetting"},S.a.createElement("div",{className:"row"},S.a.createElement("label",{className:"col-sm-5 control-label visible-xs-block"}),S.a.createElement("div",{className:"col-sm-12"},S.a.createElement("input",{className:"form-control",type:"text",onChange:this.updateInviteId,value:this.state.invite_id,maxLength:"32"}),S.a.createElement("div",{className:"padding-top x2"},S.a.createElement("a",{href:"#",onClick:this.handleGenerateInviteId},S.a.createElement(M.FormattedMessage,{id:"general_tab.regenerate",defaultMessage:"Regenerate"}))))),S.a.createElement("div",{className:"setting-list__hint"},S.a.createElement(M.FormattedHTMLMessage,{id:"general_tab.codeLongDesc",defaultMessage:"The Invite Code is used as part of the URL in the team invitation link created by <strong>Get Team Invite Link</strong> in the main menu. Regenerating creates a new team invitation link and invalidates the previous link."})))),o=S.a.createElement(g.a,{title:a(T.codeTitle),inputs:i,submit:this.handleInviteIdSubmit,server_error:t,client_error:e,updateSection:this.onUpdateInviteIdSection})}else o=S.a.createElement(p.a,{title:a(T.codeTitle),describe:a(T.codeDesc),updateSection:this.onUpdateInviteIdSection});var l=void 0;if("name"===this.props.activeSection){var u=[],d=S.a.createElement(M.FormattedMessage,{id:"general_tab.teamName",defaultMessage:"Team Name"});_.isMobile()&&(d=""),u.push(S.a.createElement("div",{key:"teamNameSetting",className:"form-group"},S.a.createElement("label",{className:"col-sm-5 control-label"},d),S.a.createElement("div",{className:"col-sm-7"},S.a.createElement("input",{className:"form-control",type:"text",maxLength:"22",onChange:this.updateName,value:this.state.name}))));var c=S.a.createElement("span",null,a(T.teamNameInfo));l=S.a.createElement(g.a,{title:a({id:"general_tab.teamName"}),inputs:u,submit:this.handleNameSubmit,server_error:t,client_error:e,updateSection:this.onUpdateNameSection,extraInfo:c})}else{var m=this.state.name;l=S.a.createElement(p.a,{title:a({id:"general_tab.teamName"}),describe:m,updateSection:this.onUpdateNameSection})}return S.a.createElement("div",null,S.a.createElement("div",{className:"modal-header"},S.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},S.a.createElement("span",{"aria-hidden":"true"},"×")),S.a.createElement("h4",{className:"modal-title",ref:"title"},S.a.createElement("div",{className:"modal-back"},S.a.createElement("i",{className:"fa fa-angle-left"})),S.a.createElement(M.FormattedMessage,{id:"general_tab.title",defaultMessage:"General Settings"}))),S.a.createElement("div",{ref:"wrapper",className:"user-settings"},S.a.createElement("h3",{className:"tab-header"},S.a.createElement(M.FormattedMessage,{id:"general_tab.title",defaultMessage:"General Settings"})),S.a.createElement("div",{className:"divider-dark first"}),l,S.a.createElement("div",{className:"divider-light"}),n,S.a.createElement("div",{className:"divider-light"}),o,S.a.createElement("div",{className:"divider-dark"})))}}]),t}(S.a.Component);C.propTypes={intl:M.intlShape.isRequired,updateSection:S.a.PropTypes.func.isRequired,team:S.a.PropTypes.object.isRequired,activeSection:S.a.PropTypes.string.isRequired},t.a=a.i(M.injectIntl)(C)},1887:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(13),f=a(1881),p=a(12),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(1),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a.i(p.defineMessages)({importSlack:{id:"team_import_tab.importSlack",defaultMessage:"Import from Slack (Beta)"}}),M=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.onImportFailure=a.onImportFailure.bind(a),a.onImportSuccess=a.onImportSuccess.bind(a),a.doImportSlack=a.doImportSlack.bind(a),a.state={status:"ready",link:""},a}return m()(t,e),l()(t,[{key:"onImportFailure",value:function(){this.setState({status:"fail",link:""})}},{key:"onImportSuccess",value:function(e,t){this.setState({status:"done",link:"data:application/octet-stream;charset=utf-8,"+encodeURIComponent(t.text)})}},{key:"doImportSlack",value:function(e){this.setState({status:"in-progress",link:""}),h.importSlack(e,this.onImportSuccess,this.onImportFailure)}},{key:"render",value:function(){var e,t=this.props.intl.formatMessage,a=_.a.createElement("div",null,_.a.createElement(p.FormattedHTMLMessage,{id:"team_import_tab.importHelp",defaultMessage:"<p>To import a team from Slack go to Slack > Team Settings > Import/Export Data > Export > Start Export. Slack does not allow you to export files, images, private groups or direct messages stored in Slack. Therefore, Slack import to Mattermost only supports importing of text messages in your Slack team's public channels.</p><p>The Slack import to Mattermost is in 'Beta'. Slack bot posts do not yet import.</p>"})),n=_.a.createElement(f.a,{title:t(E.importSlack),submit:this.doImportSlack,helpText:a,fileTypesAccepted:".zip"});switch(this.state.status){case"ready":e="";break;case"in-progress":e=_.a.createElement("p",{className:"confirm-import alert alert-warning"},_.a.createElement("i",{className:"fa fa-spinner fa-pulse"}),_.a.createElement(p.FormattedMessage,{id:"team_import_tab.importing",defaultMessage:" Importing..."}));break;case"done":e=_.a.createElement("p",{className:"confirm-import alert alert-success"},_.a.createElement("i",{className:"fa fa-check"}),_.a.createElement(p.FormattedMessage,{id:"team_import_tab.successful",defaultMessage:" Import successful: "}),_.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},_.a.createElement(p.FormattedMessage,{id:"team_import_tab.summary",defaultMessage:"View Summary"})));break;case"fail":e=_.a.createElement("p",{className:"confirm-import alert alert-warning"},_.a.createElement("i",{className:"fa fa-warning"}),_.a.createElement(p.FormattedMessage,{id:"team_import_tab.failure",defaultMessage:" Import failure: "}),_.a.createElement("a",{href:this.state.link,download:"MattermostImportSummary.txt"},_.a.createElement(p.FormattedMessage,{id:"team_import_tab.summary",defaultMessage:"View Summary"})))}return _.a.createElement("div",null,_.a.createElement("div",{className:"modal-header"},_.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},_.a.createElement("span",{"aria-hidden":"true"},"×")),_.a.createElement("h4",{className:"modal-title",ref:"title"},_.a.createElement("div",{className:"modal-back"},_.a.createElement("i",{className:"fa fa-angle-left"})),_.a.createElement(p.FormattedMessage,{id:"team_import_tab.import",defaultMessage:"Import"}))),_.a.createElement("div",{ref:"wrapper",className:"user-settings"},_.a.createElement("h3",{className:"tab-header"},_.a.createElement(p.FormattedMessage,{id:"team_import_tab.import",defaultMessage:"Import"})),_.a.createElement("div",{className:"divider-dark first"}),n,_.a.createElement("div",{className:"divider-dark"}),e))}}]),t}(_.a.Component);M.propTypes={intl:p.intlShape.isRequired},t.a=a.i(p.injectIntl)(M)},1888:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(37),f=a(1887),p=a(1886),g=a(13),v=a(1),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.onChange=a.onChange.bind(a),a.state={team:h.a.getCurrent()},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){h.a.addChangeListener(this.onChange)}},{key:"componentWillUnmount",value:function(){h.a.removeChangeListener(this.onChange)}},{key:"onChange",value:function(){var e=h.a.getCurrent();g.areObjectsEqual(this.state.team,e)||this.setState({team:e})}},{key:"render",value:function(){if(!this.state.team)return null;var e;switch(this.props.activeTab){case"general":e=_.a.createElement("div",null,_.a.createElement(p.a,{team:this.state.team,activeSection:this.props.activeSection,updateSection:this.props.updateSection}));break;case"import":e=_.a.createElement("div",null,_.a.createElement(f.a,{team:this.state.team,activeSection:this.props.activeSection,updateSection:this.props.updateSection}));break;default:e=_.a.createElement("div",null)}return e}}]),t}(_.a.Component);t.a=E,E.defaultProps={activeTab:"",activeSection:""},E.propTypes={activeTab:_.a.PropTypes.string.isRequired,activeSection:_.a.PropTypes.string.isRequired,updateSection:_.a.PropTypes.func.isRequired}},1889:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(0),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var p=a(23),g=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(g,"a",g);var v=a(586),_=a(1888),E=a(13),M=a(12),b=M&&M.__esModule?function(){return M["default"]}:function(){return M};a.d(b,"a",b);var y=a(1),S=y&&y.__esModule?function(){return y["default"]}:function(){return y};a.d(S,"a",S);var T=a.i(M.defineMessages)({generalTab:{id:"team_settings_modal.generalTab",defaultMessage:"General"},importTab:{id:"team_settings_modal.importTab",defaultMessage:"Import"}}),C=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.updateTab=a.updateTab.bind(a),a.updateSection=a.updateSection.bind(a),a.state={activeTab:"general",activeSection:""},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=f()(g.a.findDOMNode(this.refs.modal));e.on("click",".modal-back",function(){f()(this).closest(".modal-dialog").removeClass("display--content"),f()(this).closest(".modal-dialog").find(".settings-table .nav li.active").removeClass("active")}),e.on("click",".modal-header .close",function(){setTimeout(function(){f()(".modal-dialog.display--content").removeClass("display--content")},500)}),E.isMobile()||f()(".settings-modal .settings-content").perfectScrollbar()}},{key:"updateTab",value:function(e){this.setState({activeTab:e,activeSection:""}),E.isMobile()||f()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update")}},{key:"updateSection",value:function(e){f()(".section-max").length&&f()(".settings-modal .modal-body").scrollTop(0).perfectScrollbar("update"),this.setState({activeSection:e})}},{key:"render",value:function(){var e=this.props.intl.formatMessage,t=[];return t.push({name:"general",uiName:e(T.generalTab),icon:"icon fa fa-cog"}),t.push({name:"import",uiName:e(T.importTab),icon:"icon fa fa-upload"}),S.a.createElement("div",{className:"modal fade",ref:"modal",
id:"team_settings",role:"dialog",tabIndex:"-1","aria-hidden":"true"},S.a.createElement("div",{className:"modal-dialog settings-modal"},S.a.createElement("div",{className:"modal-content"},S.a.createElement("div",{className:"modal-header"},S.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},S.a.createElement("span",{"aria-hidden":"true"},"×")),S.a.createElement("h4",{className:"modal-title",ref:"title"},S.a.createElement(M.FormattedMessage,{id:"team_settings_modal.title",defaultMessage:"Team Settings"}))),S.a.createElement("div",{className:"modal-body settings-modal__body"},S.a.createElement("div",{className:"settings-table"},S.a.createElement("div",{className:"settings-links"},S.a.createElement(v.a,{tabs:t,activeTab:this.state.activeTab,updateTab:this.updateTab})),S.a.createElement("div",{className:"settings-content minimize-settings"},S.a.createElement(_.a,{activeTab:this.state.activeTab,activeSection:this.state.activeSection,updateSection:this.updateSection})))))))}}]),t}(S.a.Component);C.propTypes={intl:M.intlShape.isRequired},t.a=a.i(M.injectIntl)(C)},1892:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),o=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(o,"a",o);var i=a(4),l=i&&i.__esModule?function(){return i["default"]}:function(){return i};a.d(l,"a",l);var u=a(7),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(1714),f=a(30),p=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(p,"a",p);var g=a(11),v=a(12),_=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(_,"a",_);var E=a(1),M=E&&E.__esModule?function(){return E["default"]}:function(){return E};a.d(M,"a",M);var b=g.a.ActionTypes,y=function(e){function t(e){o()(this,t);var a=d()(this,(t.__proto__||r()(t)).call(this,e));return a.updateShow=a.updateShow.bind(a),a.handleSubmit=a.handleSubmit.bind(a),a.handleChange=a.handleChange.bind(a),a.state={value:"",inputError:"",show:!1,callback:null},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){h.a.addModalListener(b.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"componentWillUnmount",value:function(){h.a.removeModalListener(b.TOGGLE_IMPORT_THEME_MODAL,this.updateShow)}},{key:"updateShow",value:function(e,t){this.setState({show:e,callback:t.callback})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.value;if(!this.isInputValid(t))return void this.setState({inputError:M.a.createElement(v.FormattedMessage,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})});var a=t.split(","),n={type:"custom"};n.sidebarBg=a[0],n.sidebarText=a[5],n.sidebarUnreadText=a[5],n.sidebarTextHoverBg=a[4],n.sidebarTextActiveBorder=a[2],n.sidebarTextActiveColor=a[3],n.sidebarHeaderBg=a[1],n.sidebarHeaderTextColor=a[5],n.onlineIndicator=a[6],n.awayIndicator="#E0B333",n.mentionBj=a[7],n.mentionColor="#ffffff",n.centerChannelBg="#ffffff",n.centerChannelColor="#333333",n.newMessageSeparator="#F80",n.linkColor="#2389d7",n.buttonBg="#26a970",n.buttonColor="#ffffff",n.mentionHighlightBg="#fff2bb",n.mentionHighlightLink="#2f81b7",n.codeTheme="github",this.state.callback(n),this.setState({show:!1,callback:null})}},{key:"isInputValid",value:function(e){if(0===e.length)return!1;if(e.indexOf(" ")!==-1)return!1;if(e.length>0&&e.indexOf(",")===-1)return!1;if(e.length>0){var t=e.split(",");if(8!==t.length)return!1;for(var a=0;a<t.length;a++){if(7!==t[a].length&&4!==t[a].length)return!1;if("#"!==t[a].charAt(0))return!1}}return!0}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.isInputValid(t)?this.setState({inputError:null}):this.setState({inputError:M.a.createElement(v.FormattedMessage,{id:"user.settings.import_theme.submitError",defaultMessage:"Invalid format, please try copying and pasting in again."})})}},{key:"render",value:function(){var e=this;return M.a.createElement("span",null,M.a.createElement(f.Modal,{show:this.state.show,onHide:function(){return e.setState({show:!1})}},M.a.createElement(f.Modal.Header,{closeButton:!0},M.a.createElement(f.Modal.Title,null,M.a.createElement(v.FormattedMessage,{id:"user.settings.import_theme.importHeader",defaultMessage:"Import Slack Theme"}))),M.a.createElement("form",{role:"form",className:"form-horizontal"},M.a.createElement(f.Modal.Body,null,M.a.createElement("p",null,M.a.createElement(v.FormattedMessage,{id:"user.settings.import_theme.importBody",defaultMessage:"To import a theme, go to a Slack team and look for “Preferences -> Sidebar Theme”. Open the custom theme option, copy the theme color values and paste them here:"})),M.a.createElement("div",{className:"form-group less"},M.a.createElement("div",{className:"col-sm-9"},M.a.createElement("input",{type:"text",className:"form-control",value:this.state.value,onChange:this.handleChange}),M.a.createElement("div",{className:"input__help"},this.state.inputError)))),M.a.createElement(f.Modal.Footer,null,M.a.createElement("button",{type:"button",className:"btn btn-default",onClick:function(){return e.setState({show:!1})}},M.a.createElement(v.FormattedMessage,{id:"user.settings.import_theme.cancel",defaultMessage:"Cancel"})),M.a.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},M.a.createElement(v.FormattedMessage,{id:"user.settings.import_theme.submit",defaultMessage:"Submit"}))))))}}]),t}(M.a.Component);t.a=y},1904:function(e,t,a){var n=(a(0),a(0),{animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0});e.exports=function(e,t){return"number"!=typeof t||n[e]?t:t+"px"}},2001:function(e,t,a){(function(t){a(0),a(0);(function(){var a,n,r;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!=typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(a()-r)/1e6},n=t.hrtime,a=function(){var e;return e=n(),1e9*e[0]+e[1]},r=a()):Date.now?(e.exports=function(){return Date.now()-r},r=Date.now()):(e.exports=function(){return(new Date).getTime()-r},r=(new Date).getTime())}).call(this)}).call(t,a(564))},2002:function(e,t,a){var n=(a(0),a(0),null),r=["Webkit","Moz","O","ms"];e.exports=function(e){n||(n=document.createElement("div"));var t=n.style;if(e in t)return e;for(var a=e.charAt(0).toUpperCase()+e.slice(1),s=r.length;s>=0;s--){var o=r[s]+a;if(o in t)return o}return!1}},2006:function(e,t,a){(function(t){for(var n=(a(0),a(0),a(2001)),r="undefined"==typeof window?t:window,s=["moz","webkit"],o="AnimationFrame",i=r["request"+o],l=r["cancel"+o]||r["cancelRequest"+o],u=0;!i&&u<s.length;u++)i=r[s[u]+"Request"+o],l=r[s[u]+"Cancel"+o]||r[s[u]+"CancelRequest"+o];if(!i||!l){var d=0,c=0,m=[],h=1e3/60;i=function(e){if(0===m.length){var t=n(),a=Math.max(0,h-(t-d));d=a+t,setTimeout(function(){var e=m.slice(0);m.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(a){setTimeout(function(){throw a},0)}},Math.round(a))}return m.push({handle:++c,callback:e,cancelled:!1}),c},l=function(e){for(var t=0;t<m.length;t++)m[t].handle===e&&(m[t].cancelled=!0)}}e.exports=function(e){return i.call(r,e)},e.exports.cancel=function(){l.apply(r,arguments)},e.exports.polyfill=function(){r.requestAnimationFrame=i,r.cancelAnimationFrame=l}}).call(t,a(17))},2007:function(e,t,a){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function s(e){return m["default"].createElement("div",e)}function o(e){var t=e.style,a=r(e,["style"]),n=d({},t,{right:2,bottom:2,left:2,borderRadius:3});return m["default"].createElement("div",d({style:n},a))}function i(e){var t=e.style,a=r(e,["style"]),n=d({},t,{right:2,bottom:2,top:2,borderRadius:3});return m["default"].createElement("div",d({style:n},a))}function l(e){var t=e.style,a=r(e,["style"]),n=d({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return m["default"].createElement("div",d({style:n},a))}function u(e){var t=e.style,a=r(e,["style"]),n=d({},t,{cursor:"pointer",borderRadius:"inherit",backgroundColor:"rgba(0,0,0,.2)"});return m["default"].createElement("div",d({style:n},a))}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.renderViewDefault=s,t.renderTrackHorizontalDefault=o,t.renderTrackVerticalDefault=i,t.renderThumbHorizontalDefault=l,t.renderThumbVerticalDefault=u;var c=a(1),m=n(c)},2008:function(e,t,a){function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=a(2006),i=n(o),l=a(1771),u=n(l),d=a(1),c=a(2014),m=n(c),h=a(2013),f=n(h),p=a(2015),g=n(p),v=a(2012),_=n(v),E=a(2011),M=n(E),b=a(2009),y=a(2007);t["default"]=(0,d.createClass)({displayName:"Scrollbars",propTypes:{onScroll:d.PropTypes.func,onScrollFrame:d.PropTypes.func,onScrollStart:d.PropTypes.func,onScrollStop:d.PropTypes.func,onUpdate:d.PropTypes.func,renderView:d.PropTypes.func,renderTrackHorizontal:d.PropTypes.func,renderTrackVertical:d.PropTypes.func,renderThumbHorizontal:d.PropTypes.func,renderThumbVertical:d.PropTypes.func,tagName:d.PropTypes.string,thumbSize:d.PropTypes.number,thumbMinSize:d.PropTypes.number,hideTracksWhenNotNeeded:d.PropTypes.bool,autoHide:d.PropTypes.bool,autoHideTimeout:d.PropTypes.number,autoHideDuration:d.PropTypes.number,autoHeight:d.PropTypes.bool,autoHeightMin:d.PropTypes.oneOfType([d.PropTypes.number,d.PropTypes.string]),autoHeightMax:d.PropTypes.oneOfType([d.PropTypes.number,d.PropTypes.string]),universal:d.PropTypes.bool,style:d.PropTypes.object,children:d.PropTypes.node},getDefaultProps:function(){return{renderView:y.renderViewDefault,renderTrackHorizontal:y.renderTrackHorizontalDefault,renderTrackVertical:y.renderTrackVerticalDefault,renderThumbHorizontal:y.renderThumbHorizontalDefault,renderThumbVertical:y.renderThumbVerticalDefault,tagName:"div",thumbMinSize:30,hideTracksWhenNotNeeded:!1,autoHide:!1,autoHideTimeout:1e3,autoHideDuration:200,autoHeight:!1,autoHeightMin:0,autoHeightMax:200,universal:!1}},getInitialState:function(){return{didMountUniversal:!1}},componentDidMount:function(){this.addListeners(),this.update(),this.componentDidMountUniversal()},componentDidMountUniversal:function(){var e=this.props.universal;e&&this.setState({didMountUniversal:!0})},componentDidUpdate:function(){this.update()},componentWillUnmount:function(){this.removeListeners(),(0,o.cancel)(this.requestFrame),clearTimeout(this.hideTracksTimeout),clearInterval(this.detectScrollingInterval)},getScrollLeft:function(){var e=this.refs.view;return e.scrollLeft},getScrollTop:function(){var e=this.refs.view;return e.scrollTop},getScrollWidth:function(){var e=this.refs.view;return e.scrollWidth},getScrollHeight:function(){var e=this.refs.view;return e.scrollHeight},getClientWidth:function(){var e=this.refs.view;return e.clientWidth},getClientHeight:function(){var e=this.refs.view;return e.clientHeight},getValues:function(){var e=this.refs.view,t=e.scrollLeft,a=e.scrollTop,n=e.scrollWidth,r=e.scrollHeight,s=e.clientWidth,o=e.clientHeight;return{left:t/(n-s)||0,top:a/(r-o)||0,scrollLeft:t,scrollTop:a,scrollWidth:n,scrollHeight:r,clientWidth:s,clientHeight:o}},getThumbHorizontalWidth:function(){var e=this.props,t=e.thumbSize,a=e.thumbMinSize,n=this.refs,r=n.view,s=n.trackHorizontal,o=r.scrollWidth,i=r.clientWidth,l=(0,_["default"])(s),u=i/o*l;return l===u?0:t?t:Math.max(u,a)},getThumbVerticalHeight:function(){var e=this.props,t=e.thumbSize,a=e.thumbMinSize,n=this.refs,r=n.view,s=n.trackVertical,o=r.scrollHeight,i=r.clientHeight,l=(0,M["default"])(s),u=i/o*l;return l===u?0:t?t:Math.max(u,a)},getScrollLeftForOffset:function(e){var t=this.refs,a=t.view,n=t.trackHorizontal,r=a.scrollWidth,s=a.clientWidth,o=(0,_["default"])(n),i=this.getThumbHorizontalWidth();return e/(o-i)*(r-s)},getScrollTopForOffset:function(e){var t=this.refs,a=t.view,n=t.trackVertical,r=a.scrollHeight,s=a.clientHeight,o=(0,M["default"])(n),i=this.getThumbVerticalHeight();return e/(o-i)*(r-s)},scrollLeft:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=this.refs.view;t.scrollLeft=e},scrollTop:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=this.refs.view;t.scrollTop=e},scrollToLeft:function(){var e=this.refs.view;e.scrollLeft=0},scrollToTop:function(){var e=this.refs.view;e.scrollTop=0},scrollToRight:function(){var e=this.refs.view;e.scrollLeft=e.scrollWidth},scrollToBottom:function(){var e=this.refs.view;e.scrollTop=e.scrollHeight},addListeners:function(){if("undefined"!=typeof document){var e=this.refs,t=e.view,a=e.trackHorizontal,n=e.trackVertical,r=e.thumbHorizontal,s=e.thumbVertical;t.addEventListener("scroll",this.handleScroll),(0,f["default"])()&&(a.addEventListener("mouseenter",this.handleTrackMouseEnter),a.addEventListener("mouseleave",this.handleTrackMouseLeave),a.addEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.addEventListener("mouseenter",this.handleTrackMouseEnter),n.addEventListener("mouseleave",this.handleTrackMouseLeave),n.addEventListener("mousedown",this.handleVerticalTrackMouseDown),r.addEventListener("mousedown",this.handleHorizontalThumbMouseDown),s.addEventListener("mousedown",this.handleVerticalThumbMouseDown),window.addEventListener("resize",this.handleWindowResize))}},removeListeners:function(){if("undefined"!=typeof document){var e=this.refs,t=e.view,a=e.trackHorizontal,n=e.trackVertical,r=e.thumbHorizontal,s=e.thumbVertical;t.removeEventListener("scroll",this.handleScroll),(0,f["default"])()&&(a.removeEventListener("mouseenter",this.handleTrackMouseEnter),a.removeEventListener("mouseleave",this.handleTrackMouseLeave),a.removeEventListener("mousedown",this.handleHorizontalTrackMouseDown),n.removeEventListener("mouseenter",this.handleTrackMouseEnter),n.removeEventListener("mouseleave",this.handleTrackMouseLeave),n.removeEventListener("mousedown",this.handleVerticalTrackMouseDown),r.removeEventListener("mousedown",this.handleHorizontalThumbMouseDown),s.removeEventListener("mousedown",this.handleVerticalThumbMouseDown),window.removeEventListener("resize",this.handleWindowResize),this.teardownDragging())}},handleScroll:function(e){var t=this,a=this.props,n=a.onScroll,r=a.onScrollFrame;n&&n(e),this.update(function(e){var a=e.scrollLeft,n=e.scrollTop;t.viewScrollLeft=a,t.viewScrollTop=n,r&&r(e)}),this.detectScrolling()},handleScrollStart:function(){var e=this.props.onScrollStart;e&&e(),this.handleScrollStartAutoHide()},handleScrollStartAutoHide:function(){var e=this.props.autoHide;e&&this.showTracks()},handleScrollStop:function(){var e=this.props.onScrollStop;e&&e(),this.handleScrollStopAutoHide()},handleScrollStopAutoHide:function(){var e=this.props.autoHide;e&&this.hideTracks()},handleWindowResize:function(){this.update()},handleHorizontalTrackMouseDown:function(){var e=this.refs.view,t=event,a=t.target,n=t.clientX,r=a.getBoundingClientRect(),s=r.left,o=this.getThumbHorizontalWidth(),i=Math.abs(s-n)-o/2;e.scrollLeft=this.getScrollLeftForOffset(i)},handleVerticalTrackMouseDown:function(e){var t=this.refs.view,a=e.target,n=e.clientY,r=a.getBoundingClientRect(),s=r.top,o=this.getThumbVerticalHeight(),i=Math.abs(s-n)-o/2;t.scrollTop=this.getScrollTopForOffset(i)},handleHorizontalThumbMouseDown:function(e){this.handleDragStart(e);var t=e.target,a=e.clientX,n=t.offsetWidth,r=t.getBoundingClientRect(),s=r.left;this.prevPageX=n-(a-s)},handleVerticalThumbMouseDown:function(e){this.handleDragStart(e);var t=e.target,a=e.clientY,n=t.offsetHeight,r=t.getBoundingClientRect(),s=r.top;this.prevPageY=n-(a-s)},setupDragging:function(){(0,u["default"])(document.body,b.disableSelectStyle),document.addEventListener("mousemove",this.handleDrag),document.addEventListener("mouseup",this.handleDragEnd),document.onselectstart=g["default"]},teardownDragging:function(){(0,u["default"])(document.body,b.disableSelectStyleReset),document.removeEventListener("mousemove",this.handleDrag),document.removeEventListener("mouseup",this.handleDragEnd),document.onselectstart=void 0},handleDragStart:function(e){this.dragging=!0,e.stopImmediatePropagation(),this.setupDragging()},handleDrag:function(e){if(this.prevPageX){var t=e.clientX,a=this.refs,n=a.view,r=a.trackHorizontal,s=r.getBoundingClientRect(),o=s.left,i=this.getThumbHorizontalWidth(),l=i-this.prevPageX,u=-o+t-l;n.scrollLeft=this.getScrollLeftForOffset(u)}if(this.prevPageY){var d=e.clientY,c=this.refs,m=c.view,h=c.trackVertical,f=h.getBoundingClientRect(),p=f.top,g=this.getThumbVerticalHeight(),v=g-this.prevPageY,_=-p+d-v;m.scrollTop=this.getScrollTopForOffset(_)}return!1},handleDragEnd:function(){this.dragging=!1,this.prevPageX=this.prevPageY=0,this.teardownDragging(),this.handleDragEndAutoHide()},handleDragEndAutoHide:function(){var e=this.props.autoHide;e&&this.hideTracks()},handleTrackMouseEnter:function(){this.trackMouseOver=!0,this.handleTrackMouseEnterAutoHide()},handleTrackMouseEnterAutoHide:function(){var e=this.props.autoHide;e&&this.showTracks()},handleTrackMouseLeave:function(){this.trackMouseOver=!1,this.handleTrackMouseLeaveAutoHide()},handleTrackMouseLeaveAutoHide:function(){var e=this.props.autoHide;e&&this.hideTracks()},showTracks:function(){var e=this.refs,t=e.trackHorizontal,a=e.trackVertical;clearTimeout(this.hideTracksTimeout),(0,u["default"])(t,{opacity:1}),(0,u["default"])(a,{opacity:1})},hideTracks:function(){if(!this.dragging&&!this.scrolling&&!this.trackMouseOver){var e=this.props.autoHideTimeout,t=this.refs,a=t.trackHorizontal,n=t.trackVertical;clearTimeout(this.hideTracksTimeout),this.hideTracksTimeout=setTimeout(function(){(0,u["default"])(a,{opacity:0}),(0,u["default"])(n,{opacity:0})},e)}},detectScrolling:function(){var e=this;this.scrolling||(this.scrolling=!0,this.handleScrollStart(),this.detectScrollingInterval=setInterval(function(){e.lastViewScrollLeft===e.viewScrollLeft&&e.lastViewScrollTop===e.viewScrollTop&&(clearInterval(e.detectScrollingInterval),e.scrolling=!1,e.handleScrollStop()),e.lastViewScrollLeft=e.viewScrollLeft,e.lastViewScrollTop=e.viewScrollTop},100))},raf:function(e){var t=this;this.requestFrame&&i["default"].cancel(this.requestFrame),this.requestFrame=(0,i["default"])(function(){t.requestFrame=void 0,e()})},update:function(e){var t=this;this.raf(function(){return t._update(e)})},_update:function(e){var t=this.props,a=t.onUpdate,n=t.hideTracksWhenNotNeeded,r=this.getValues();if((0,f["default"])()){var s=this.refs,o=s.thumbHorizontal,i=s.thumbVertical,l=s.trackHorizontal,d=s.trackVertical,c=r.scrollLeft,m=r.clientWidth,h=r.scrollWidth,p=(0,_["default"])(l),g=this.getThumbHorizontalWidth(),v=c/(h-m)*(p-g),E={width:g,transform:"translateX("+v+"px)"},b=r.scrollTop,y=r.clientHeight,S=r.scrollHeight,T=(0,M["default"])(d),C=this.getThumbVerticalHeight(),k=b/(S-y)*(T-C),w={height:C,transform:"translateY("+k+"px)"};if(n){var N={visibility:h>m?"visible":"hidden"},P={visibility:S>y?"visible":"hidden"};(0,u["default"])(l,N),(0,u["default"])(d,P)}(0,u["default"])(o,E),(0,u["default"])(i,w)}a&&a(r),"function"==typeof e&&e(r)},render:function(){var e=(0,f["default"])(),t=this.props,a=(t.onScroll,t.onScrollFrame,t.onScrollStart,t.onScrollStop,t.onUpdate,t.renderView),n=t.renderTrackHorizontal,o=t.renderTrackVertical,i=t.renderThumbHorizontal,l=t.renderThumbVertical,u=t.tagName,c=(t.hideTracksWhenNotNeeded,t.autoHide),h=(t.autoHideTimeout,t.autoHideDuration),p=(t.thumbSize,t.thumbMinSize,t.universal),g=t.autoHeight,v=t.autoHeightMin,_=t.autoHeightMax,E=t.style,M=t.children,y=r(t,["onScroll","onScrollFrame","onScrollStart","onScrollStop","onUpdate","renderView","renderTrackHorizontal","renderTrackVertical","renderThumbHorizontal","renderThumbVertical","tagName","hideTracksWhenNotNeeded","autoHide","autoHideTimeout","autoHideDuration","thumbSize","thumbMinSize","universal","autoHeight","autoHeightMin","autoHeightMax","style","children"]),S=this.state.didMountUniversal,T=s({},b.containerStyleDefault,g&&s({},b.containerStyleAutoHeight,{minHeight:v,maxHeight:_}),E),C=s({},b.viewStyleDefault,{marginRight:e?-e:0,marginBottom:e?-e:0},g&&s({},b.viewStyleAutoHeight,{minHeight:(0,m["default"])(v)?"calc("+v+" + "+e+"px)":v+e,maxHeight:(0,m["default"])(_)?"calc("+_+" + "+e+"px)":_+e}),g&&p&&!S&&{minHeight:v,maxHeight:_},p&&!S&&b.viewStyleUniversalInitial),k={transition:"opacity "+h+"ms",opacity:0},w=s({},b.trackHorizontalStyleDefault,c&&k,(!e||p&&!S)&&{display:"none"}),N=s({},b.trackVerticalStyleDefault,c&&k,(!e||p&&!S)&&{display:"none"});return(0,d.createElement)(u,s({},y,{style:T,ref:"container"}),[(0,d.cloneElement)(a({style:C}),{key:"view",ref:"view"},M),(0,d.cloneElement)(n({style:w}),{key:"trackHorizontal",ref:"trackHorizontal"},(0,d.cloneElement)(i({style:b.thumbHorizontalStyleDefault}),{ref:"thumbHorizontal"})),(0,d.cloneElement)(o({style:N}),{key:"trackVertical",ref:"trackVertical"},(0,d.cloneElement)(l({style:b.thumbVerticalStyleDefault}),{ref:"thumbVertical"}))])}})},2009:function(e,t,a){a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0});t.containerStyleDefault={position:"relative",overflow:"hidden",width:"100%",height:"100%"},t.containerStyleAutoHeight={height:"auto"},t.viewStyleDefault={position:"absolute",top:0,left:0,right:0,bottom:0,overflow:"scroll",WebkitOverflowScrolling:"touch"},t.viewStyleAutoHeight={position:"relative",top:void 0,left:void 0,right:void 0,bottom:void 0},t.viewStyleUniversalInitial={overflow:"hidden",marginRight:0,marginBottom:0},t.trackHorizontalStyleDefault={position:"absolute",height:6},t.trackVerticalStyleDefault={position:"absolute",width:6},t.thumbHorizontalStyleDefault={position:"relative",display:"block",height:"100%"},t.thumbVerticalStyleDefault={position:"relative",display:"block",width:"100%"},t.disableSelectStyle={userSelect:"none"},t.disableSelectStyleReset={userSelect:""}},2010:function(e,t,a){function n(e){return e&&e.__esModule?e:{"default":e}}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0}),t.Scrollbars=void 0;var r=a(2008),s=n(r);t["default"]=s["default"],t.Scrollbars=s["default"]},2011:function(e,t,a){function n(e){var t=e.clientHeight,a=getComputedStyle(e),n=a.paddingTop,r=a.paddingBottom;return t-parseFloat(n)-parseFloat(r)}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},2012:function(e,t,a){function n(e){var t=e.clientWidth,a=getComputedStyle(e),n=a.paddingLeft,r=a.paddingRight;return t-parseFloat(n)-parseFloat(r)}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},2013:function(e,t,a){function n(e){return e&&e.__esModule?e:{"default":e}}function r(){if(i!==!1)return i;if("undefined"!=typeof document){var e=document.createElement("div");(0,o["default"])(e,{width:100,height:100,position:"absolute",top:-9999,overflow:"scroll",MsOverflowStyle:"scrollbar"}),document.body.appendChild(e),i=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}else i=0;return i}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var s=a(1771),o=n(s),i=!1},2014:function(e,t,a){function n(e){return"string"==typeof e}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},2015:function(e,t,a){function n(){return!1}a(0),a(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},2033:function(e,t,a){function n(e){return r(e).replace(/\s(\w)/g,function(e,t){return t.toUpperCase()})}var r=(a(0),a(0),a(2035));e.exports=n},2034:function(e,t,a){function n(e){return o.test(e)?e.toLowerCase():i.test(e)?(r(e)||e).toLowerCase():l.test(e)?s(e).toLowerCase():e.toLowerCase()}function r(e){return e.replace(u,function(e,t){return t?" "+t:""})}function s(e){return e.replace(d,function(e,t,a){return t+" "+a.toLowerCase().split("").join(" ")})}a(0),a(0);e.exports=n;var o=/\s/,i=/[\W_]/,l=/([a-z][A-Z]|[A-Z][a-z])/,u=/[\W_]+(.|$)/g,d=/(.)([A-Z]+)/g},2035:function(e,t,a){function n(e){return r(e).replace(/[\W_]+(.|$)/g,function(e,t){return t?" "+t:""}).trim()}var r=(a(0),a(0),a(2034));e.exports=n}});