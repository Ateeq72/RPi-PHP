webpackJsonp([30],{1683:function(e,t,a){"use strict";var n=a(6),s=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(s,"a",s);var o=a(3),r=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(r,"a",r);var l=a(7),i=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(i,"a",i);var d=a(4),u=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(u,"a",u);var c=a(2),m=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(m,"a",m);var h=a(1),g=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(g,"a",g);var p=a(1634),f=a(12),M=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(M,"a",M);var _=a(53),b=a(18),k=a(1635),E=a(11),v=function(e){function t(e){r()(this,t);var a=i()(this,(t.__proto__||s()(t)).call(this,e));a.handleIntegrationChange=a.handleIntegrationChange.bind(a);var n=b.a.getCurrentId();return a.state={type:a.props.location.query.type,id:a.props.location.query.id,oauthApps:k.a.getOAuthApps(n),loading:!k.a.hasReceivedOAuthApps(n)},a}return m()(t,e),u()(t,null,[{key:"propTypes",get:function(){return{team:g.a.propTypes.object.isRequired,location:g.a.PropTypes.object}}}]),u()(t,[{key:"componentDidMount",value:function(){k.a.addChangeListener(this.handleIntegrationChange)}},{key:"componentWillUnmount",value:function(){k.a.removeChangeListener(this.handleIntegrationChange)}},{key:"handleIntegrationChange",value:function(){var e=b.a.getCurrentId();this.setState({oauthApps:k.a.getOAuthApps(e),loading:!k.a.hasReceivedOAuthApps(e)})}},{key:"render",value:function(){var e=null,t=null,a=null;if(this.state.type===E.a.Integrations.COMMAND)e=g.a.createElement(f.FormattedMessage,{id:"installed_commands.header",defaultMessage:"Slash Commands"}),t=g.a.createElement("p",null,g.a.createElement(f.FormattedHTMLMessage,{id:"add_command.doneHelp",defaultMessage:'Your slash command has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see <a href="https://docs.mattermost.com/developer/slash-commands.html">documentation</a> for further details).'})),a=g.a.createElement("p",{className:"word-break--all"},g.a.createElement(f.FormattedHTMLMessage,{id:"add_command.token",defaultMessage:"<b>Token</b>: {token}",values:{token:k.a.getCommand(this.props.team.id,this.state.id).token}}));else if(this.state.type===E.a.Integrations.INCOMING_WEBHOOK)e=g.a.createElement(f.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"}),t=g.a.createElement("p",null,g.a.createElement(f.FormattedHTMLMessage,{id:"add_incoming_webhook.doneHelp",defaultMessage:'Your incoming webhook has been set up. Please send data to the following URL (see <a href=\\"https://docs.mattermost.com/developer/webhooks-incoming.html\\">documentation</a> for further details).'})),a=g.a.createElement("p",{className:"word-break--all"},g.a.createElement(f.FormattedHTMLMessage,{id:"add_incoming_webhook.url",defaultMessage:"<b>URL</b>: {url}",values:{url:window.location.origin+"/hooks/"+this.state.id}}));else if(this.state.type===E.a.Integrations.OUTGOING_WEBHOOK)e=g.a.createElement(f.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"}),t=g.a.createElement("p",null,g.a.createElement(f.FormattedHTMLMessage,{id:"add_outgoing_webhook.doneHelp",defaultMessage:'Your outgoing webhook has been set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (see <a href=\\"https://docs.mattermost.com/developer/webhooks-outgoing.html\\">documentation</a> for further details).'})),a=g.a.createElement("p",{className:"word-break--all"},g.a.createElement(f.FormattedHTMLMessage,{id:"add_outgoing_webhook.token",defaultMessage:"<b>Token</b>: {token}",values:{token:k.a.getOutgoingWebhook(this.props.team.id,this.state.id).token}}));else if(this.state.type===E.a.Integrations.OAUTH_APP){for(var n={},s=0;s<this.state.oauthApps.length;s++)if(this.state.oauthApps[s].id===this.state.id){n=this.state.oauthApps[s];break}n&&(e=g.a.createElement(f.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),t=[],t.push(g.a.createElement("p",null,g.a.createElement(f.FormattedMessage,{id:"add_oauth_app.doneHelp",defaultMessage:"Your OAuth 2.0 application has been set up. Please use the following Client ID and Client Secret when requesting authorization for your application."}))),t.push(g.a.createElement("p",null,g.a.createElement(f.FormattedHTMLMessage,{id:"add_oauth_app.clientId",defaultMessage:"<b>Client ID:</b> {id}",values:{id:this.state.id}})," ",g.a.createElement("br",null),g.a.createElement(f.FormattedHTMLMessage,{id:"add_oauth_app.clientSecret",defaultMessage:"<b>Client Secret:</b> {secret}",values:{secret:n.client_secret}}))),t.push(g.a.createElement("p",null,g.a.createElement(f.FormattedHTMLMessage,{id:"add_oauth_app.doneUrlHelp",defaultMessage:"The following are your authorized redirect URL(s)."}))),a=g.a.createElement("p",{className:"word-break--all"},g.a.createElement(f.FormattedHTMLMessage,{id:"add_oauth_app.url",defaultMessage:"<b>URL(s)</b>: {url}",values:{url:n.callback_urls}})))}return g.a.createElement("div",{className:"backstage-content row"},g.a.createElement(p.a,null,g.a.createElement(_.b,{to:"/"+this.props.team.name+"/integrations/"+this.state.type},e),g.a.createElement(f.FormattedMessage,{id:"integrations.add",defaultMessage:"Add"})),g.a.createElement("div",{className:"backstage-form backstage-form__confirmation"},g.a.createElement("h4",{className:"backstage-form__title"},g.a.createElement(f.FormattedMessage,{id:"integrations.successful",defaultMessage:"Setup Successful"})),t,a,g.a.createElement("div",{className:"backstage-form__footer"},g.a.createElement(_.b,{className:"btn btn-primary",type:"submit",to:"/"+this.props.team.name+"/integrations/"+this.state.type},g.a.createElement(f.FormattedMessage,{id:"integrations.done",defaultMessage:"Done"})))))}}]),t}(g.a.Component);t["default"]=v}});