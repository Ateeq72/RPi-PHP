webpackJsonp([15],{1687:function(e,t,a){"use strict";var n=a(6),o=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(o,"a",o);var r=a(3),i=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(i,"a",i);var s=a(7),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(l,"a",l);var d=a(4),u=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(u,"a",u);var g=a(2),c=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(c,"a",c);var m=a(1),_=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(_,"a",_);var h=a(26),f=a(1635),k=a(37),p=a(13),v=a(1636),b=a(12),M=b&&b.__esModule?function(){return b["default"]}:function(){return b};a.d(M,"a",M);var w=a(1860),E=function(e){function t(e){i()(this,t);var a=l()(this,(t.__proto__||o()(t)).call(this,e));a.handleIntegrationChange=a.handleIntegrationChange.bind(a),a.regenOutgoingWebhookToken=a.regenOutgoingWebhookToken.bind(a),a.deleteOutgoingWebhook=a.deleteOutgoingWebhook.bind(a);var n=k.a.getCurrentId();return a.state={outgoingWebhooks:f.a.getOutgoingWebhooks(n),loading:!f.a.hasReceivedOutgoingWebhooks(n)},a}return c()(t,e),u()(t,null,[{key:"propTypes",get:function(){return{team:_.a.propTypes.object.isRequired}}}]),u()(t,[{key:"componentDidMount",value:function(){f.a.addChangeListener(this.handleIntegrationChange),"true"===window.mm_config.EnableOutgoingWebhooks&&h.listOutgoingHooks()}},{key:"componentWillUnmount",value:function(){f.a.removeChangeListener(this.handleIntegrationChange)}},{key:"handleIntegrationChange",value:function(){var e=k.a.getCurrentId();this.setState({outgoingWebhooks:f.a.getOutgoingWebhooks(e),loading:!f.a.hasReceivedOutgoingWebhooks(e)})}},{key:"regenOutgoingWebhookToken",value:function(e){h.regenOutgoingHookToken(e.id)}},{key:"deleteOutgoingWebhook",value:function(e){h.deleteOutgoingHook(e.id)}},{key:"render",value:function(){var e=this,t=this.state.outgoingWebhooks.map(function(t){return _.a.createElement(w.a,{key:t.id,outgoingWebhook:t,onRegenToken:e.regenOutgoingWebhookToken,onDelete:e.deleteOutgoingWebhook})});return _.a.createElement(v.a,{header:_.a.createElement(b.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Installed Outgoing Webhooks"}),addText:_.a.createElement(b.FormattedMessage,{id:"installed_outgoing_webhooks.add",defaultMessage:"Add Outgoing Webhook"}),addLink:"/"+this.props.team.name+"/integrations/outgoing_webhooks/add",emptyText:_.a.createElement(b.FormattedMessage,{id:"installed_outgoing_webhooks.empty",defaultMessage:"No outgoing webhooks found"}),helpText:_.a.createElement(b.FormattedMessage,{id:"installed_outgoing_webhooks.help",defaultMessage:"Create outgoing webhook URLs for use in external integrations. Please see {link} to learn more.",values:{link:_.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-outgoing.html"},_.a.createElement(b.FormattedMessage,{id:"installed_outgoing_webhooks.helpLink",defaultMessage:"documentation"}))}}),searchPlaceholder:p.localizeMessage("installed_outgoing_webhooks.search","Search Outgoing Webhooks"),loading:this.state.loading},t)}}]),t}(_.a.Component);t["default"]=E},1860:function(e,t,a){"use strict";var n=a(47),o=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(o,"a",o);var r=a(6),i=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(i,"a",i);var s=a(3),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(l,"a",l);var d=a(7),u=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(u,"a",u);var g=a(4),c=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(c,"a",c);var m=a(2),_=m&&m.__esModule?function(){return m["default"]}:function(){return m};a.d(_,"a",_);var h=a(1),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var k=a(36),p=a(13),v=a(12),b=v&&v.__esModule?function(){return v["default"]}:function(){return v};a.d(b,"a",b);var M=function(e){function t(e){l()(this,t);var a=u()(this,(t.__proto__||i()(t)).call(this,e));return a.handleRegenToken=a.handleRegenToken.bind(a),a.handleDelete=a.handleDelete.bind(a),a}return _()(t,e),c()(t,null,[{key:"propTypes",get:function(){return{outgoingWebhook:f.a.PropTypes.object.isRequired,onRegenToken:f.a.PropTypes.func.isRequired,onDelete:f.a.PropTypes.func.isRequired,filter:f.a.PropTypes.string}}}]),c()(t,[{key:"handleRegenToken",value:function(e){e.preventDefault(),this.props.onRegenToken(this.props.outgoingWebhook)}},{key:"handleDelete",value:function(e){e.preventDefault(),this.props.onDelete(this.props.outgoingWebhook)}},{key:"matchesFilter",value:function(e,t,a){if(!a)return!0;if(e.display_name.toLowerCase().indexOf(a)!==-1||e.description.toLowerCase().indexOf(a)!==-1)return!0;var n=!0,r=!1,i=void 0;try{for(var s,l=o()(e.trigger_words);!(n=(s=l.next()).done);n=!0){var d=s.value;if(d.toLowerCase().indexOf(a)!==-1)return!0}}catch(u){r=!0,i=u}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return!(!t||!t||t.name.toLowerCase().indexOf(a)===-1)}},{key:"render",value:function(){var e=this.props.outgoingWebhook,t=k.a.get(e.channel_id),a=this.props.filter?this.props.filter.toLowerCase():"",n=0,o=1;if(!this.matchesFilter(e,t,a))return null;var r=void 0;r=e.display_name?e.display_name:t?t.display_name:f.a.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.unknown_channel",defaultMessage:"A Private Webhook"});var i=null;e.description&&(i=f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__description"},e.description)));var s=null;e.trigger_words&&e.trigger_words.length>0&&(s=f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__trigger-words"},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.triggerWords",defaultMessage:"Trigger Words: {triggerWords}",values:{triggerWords:e.trigger_words.join(", ")}}))));var l=f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__url"},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),d=void 0;return e.trigger_when===n?d=f.a.createElement(v.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenFullWord",defaultMessage:"First word matches a trigger word exactly"}):e.trigger_when===o&&(d=f.a.createElement(v.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenStartsWith",defaultMessage:"First word starts with a trigger word"})),f.a.createElement("div",{className:"backstage-list__item"},f.a.createElement("div",{className:"item-details"},f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__name"},r)),i,f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__content_type"},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.content_type",defaultMessage:"Content-Type: {contentType}",values:{contentType:e.content_type||"application/x-www-form-urlencoded"}}))),s,f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__trigger-when"},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.triggerWhen",defaultMessage:"Trigger When: {triggerWhen}",values:{triggerWhen:d}}))),f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__token"},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:e.token}}))),f.a.createElement("div",{className:"item-details__row"},f.a.createElement("span",{className:"item-details__creation"},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:p.displayUsername(e.creator_id),createAt:e.create_at}}))),l),f.a.createElement("div",{className:"item-actions"},f.a.createElement("a",{href:"#",onClick:this.handleRegenToken},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.regenToken",defaultMessage:"Regen Token"}))," - ",f.a.createElement("a",{href:"#",onClick:this.handleDelete},f.a.createElement(v.FormattedMessage,{id:"installed_integrations.delete",defaultMessage:"Delete"}))))}}]),t}(f.a.Component);t.a=M}});