webpackJsonp([20],{1668:function(e,t,a){"use strict";var n=a(114),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(47),i=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(i,"a",i);var o=a(6),l=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(l,"a",l);var u=a(3),m=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(m,"a",m);var c=a(7),d=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(d,"a",d);var f=a(4),_=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(_,"a",_);var h=a(2),p=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(p,"a",p);var g=a(1),j=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(j,"a",j);var E=a(26),v=a(175),M=a(13),y=a(12),b=y&&y.__esModule?function(){return y["default"]}:function(){return y};a.d(b,"a",b);var k=a(1853),C=a(567),N=C&&C.__esModule?function(){return C["default"]}:function(){return C};a.d(N,"a",N);var F=a(152),w=function(e){function t(e){m()(this,t);var a=d()(this,(t.__proto__||l()(t)).call(this,e));return a.handleEmojiChange=a.handleEmojiChange.bind(a),a.deleteEmoji=a.deleteEmoji.bind(a),a.updateFilter=a.updateFilter.bind(a),a.state={emojis:v.a.getCustomEmojiMap(),loading:!v.a.hasReceivedCustomEmojis(),filter:""},a}return p()(t,e),_()(t,null,[{key:"propTypes",get:function(){return{team:j.a.propTypes.object.isRequired,user:j.a.propTypes.object.isRequired}}}]),_()(t,[{key:"componentDidMount",value:function(){v.a.addChangeListener(this.handleEmojiChange),"true"===window.mm_config.EnableCustomEmoji&&E.listEmoji()}},{key:"componentWillUnmount",value:function(){v.a.removeChangeListener(this.handleEmojiChange)}},{key:"handleEmojiChange",value:function(){this.setState({emojis:v.a.getCustomEmojiMap(),loading:!v.a.hasReceivedCustomEmojis()})}},{key:"updateFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"deleteEmoji",value:function(e){E.deleteEmoji(e.id)}},{key:"render",value:function(){var e=this.state.filter.toLowerCase(),t=M.isSystemAdmin(this.props.user.roles),a=[];if(this.state.loading)a.push(j.a.createElement(F.a,{key:"loading"}));else if(0===this.state.emojis.length)a.push(j.a.createElement("tr",{className:"backstage-list__item backstage-list__empty"},j.a.createElement("td",{colSpan:"4"},j.a.createElement(y.FormattedMessage,{id:"emoji_list.empty",defaultMessage:"No custom emoji found"}))));else{var n=!0,s=!1,o=void 0;try{for(var l,u=i()(this.state.emojis);!(n=(l=u.next()).done);n=!0){var m=r()(l.value,2),c=m[1],d=null;(t||this.props.user.id===c.creator_id)&&(d=this.deleteEmoji),a.push(j.a.createElement(k.a,{key:c.id,emoji:c,onDelete:d,filter:e}))}}catch(f){s=!0,o=f}finally{try{!n&&u["return"]&&u["return"]()}finally{if(s)throw o}}}return j.a.createElement("div",{className:"backstage-content emoji-list"},j.a.createElement("div",{className:"backstage-header"},j.a.createElement("h1",null,j.a.createElement(y.FormattedMessage,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),j.a.createElement(C.Link,{className:"add-link",to:"/"+this.props.team.name+"/emoji/add"},j.a.createElement("button",{type:"button",className:"btn btn-primary"},j.a.createElement(y.FormattedMessage,{id:"emoji_list.add",defaultMessage:"Add Custom Emoji"})))),j.a.createElement("div",{className:"backstage-filters"},j.a.createElement("div",{className:"backstage-filter__search"},j.a.createElement("i",{className:"fa fa-search"}),j.a.createElement("input",{type:"search",className:"form-control",placeholder:M.localizeMessage("emoji_list.search","Search Custom Emoji"),value:this.state.filter,onChange:this.updateFilter,style:{flexGrow:0,flexShrink:0}}))),j.a.createElement("span",{className:"backstage-list__help"},j.a.createElement("p",null,j.a.createElement(y.FormattedMessage,{id:"emoji_list.help",defaultMessage:"Custom emoji are available to everyone on your server. Type ':' in a message box to bring up the emoji selection menu. Other users may need to refresh the page before new emojis appear."})),j.a.createElement("p",null,j.a.createElement(y.FormattedMessage,{id:"emoji_list.help2",defaultMessage:"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'."}))),j.a.createElement("div",{className:"backstage-list"},j.a.createElement("table",{className:"emoji-list__table"},j.a.createElement("tr",{className:"backstage-list__item emoji-list__table-header"},j.a.createElement("th",{className:"emoji-list__name"},j.a.createElement(y.FormattedMessage,{id:"emoji_list.name",defaultMessage:"Name"})),j.a.createElement("th",{className:"emoji-list__image"},j.a.createElement(y.FormattedMessage,{id:"emoji_list.image",defaultMessage:"Image"})),j.a.createElement("th",{className:"emoji-list__creator"},j.a.createElement(y.FormattedMessage,{id:"emoji_list.creator",defaultMessage:"Creator"})),j.a.createElement("th",{className:"emoji-list_actions"},j.a.createElement(y.FormattedMessage,{id:"emoji_list.actions",defaultMessage:"Actions"}))),a)))}}]),t}(j.a.Component);t["default"]=w},1853:function(e,t,a){"use strict";var n=a(6),r=n&&n.__esModule?function(){return n["default"]}:function(){return n};a.d(r,"a",r);var s=a(3),i=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(i,"a",i);var o=a(7),l=o&&o.__esModule?function(){return o["default"]}:function(){return o};a.d(l,"a",l);var u=a(4),m=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(m,"a",m);var c=a(2),d=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(d,"a",d);var f=a(1),_=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(_,"a",_);var h=a(175),p=a(18),g=a(13),j=a(12),E=j&&j.__esModule?function(){return j["default"]}:function(){return j};a.d(E,"a",E);var v=function(e){function t(e){i()(this,t);var a=l()(this,(t.__proto__||r()(t)).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a.state={creator:p.a.getProfile(a.props.emoji.creator_id)},a}return d()(t,e),m()(t,null,[{key:"propTypes",get:function(){return{emoji:_.a.PropTypes.object.isRequired,onDelete:_.a.PropTypes.func.isRequired,filter:_.a.PropTypes.string}}}]),m()(t,[{key:"handleDelete",value:function(e){e.preventDefault(),this.props.onDelete(this.props.emoji)}},{key:"matchesFilter",value:function(e,t,a){return!a||(e.name.toLowerCase().indexOf(a)!==-1||!(!t||!(t.username.toLowerCase().indexOf(a)!==-1||t.first_name&&t.first_name.toLowerCase().indexOf(a)!==-1||t.last_name&&t.last_name.toLowerCase().indexOf(a)!==-1||t.nickname&&t.nickname.toLowerCase().indexOf(a)!==-1)))}},{key:"render",value:function(){var e=this.props.emoji,t=this.state.creator,a=this.props.filter?this.props.filter.toLowerCase():"";if(!this.matchesFilter(e,t,a))return null;var n=void 0;t?(n=g.displayUsernameForUser(t),n!==t.username&&(n+=" (@"+t.username+")")):n=_.a.createElement(j.FormattedMessage,{id:"emoji_list.somebody",defaultMessage:"Somebody on another team"});var r=null;return this.props.onDelete&&(r=_.a.createElement("a",{href:"#",onClick:this.handleDelete},_.a.createElement(j.FormattedMessage,{id:"emoji_list.delete",defaultMessage:"Delete"}))),_.a.createElement("tr",{className:"backstage-list__item"},_.a.createElement("td",{className:"emoji-list__name"},":"+e.name+":"),_.a.createElement("td",{className:"emoji-list__image"},_.a.createElement("img",{className:"emoticon",src:h.a.getEmojiImageUrl(e)})),_.a.createElement("td",{className:"emoji-list__creator"},n),_.a.createElement("td",{className:"emoji-list-item_actions"},r))}}]),t}(_.a.Component);t.a=v}});